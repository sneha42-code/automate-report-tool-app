/*! For license information please see main.fe92e6e5.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),a=n(43),i=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var N=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var C=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function k(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case x:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case N:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case _:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:k(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return k(e(t))}catch(n){}}return null}var L=Array.isArray,j=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},I=[],O=-1;function F(e){return{current:e}}function z(e){0>O||(e.current=I[O],I[O]=null,O--)}function B(e,t){O++,I[O]=e.current,e.current=t}var H=F(null),V=F(null),G=F(null),W=F(null);function q(e,t){switch(B(G,t),B(V,e),B(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ad(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=ad(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(H),B(H,e)}function X(){z(H),z(V),z(G)}function Y(e){null!==e.memoizedState&&B(W,e);var t=H.current,n=id(t,e.type);t!==n&&(B(V,e),B(H,n))}function K(e){V.current===e&&(z(H),z(V)),W.current===e&&(z(W),Yd._currentValue=U)}var J=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,$=r.unstable_cancelCallback,Q=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ae=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,se=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/fe|0)|0},me=Math.log,fe=Math.LN2;var ge=256,ve=4194304;function xe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?a=xe(r):0!==(s&=o)?a=xe(s):n||0!==(n=o&~e)&&(a=xe(n)):0!==(o=r&~i)?a=xe(o):0!==s?a=xe(s):n||0!==(n=r&~e)&&(a=xe(n)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:a}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ce(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Pe=Math.random().toString(36).slice(2),ke="__reactFiber$"+Pe,Le="__reactProps$"+Pe,je="__reactContainer$"+Pe,De="__reactEvents$"+Pe,Ue="__reactListeners$"+Pe,Ie="__reactHandles$"+Pe,Oe="__reactResources$"+Pe,Fe="__reactMarker$"+Pe;function ze(e){delete e[ke],delete e[Le],delete e[De],delete e[Ue],delete e[Ie]}function Be(e){var t=e[ke];if(t)return t;for(var n=e.parentNode;n;){if(t=n[je]||n[ke]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yd(e);null!==e;){if(n=e[ke])return n;e=yd(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[ke]||e[je]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ge(e){var t=e[Oe];return t||(t=e[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Fe]=!0}var qe=new Set,Xe={};function Ye(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Xe[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Je,Ze,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},et={};function tt(e,t,n){if(a=t,J.call(et,a)||!J.call(Qe,a)&&($e.test(a)?et[a]=!0:(Qe[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function at(e){if(void 0===Je)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ze}var it=!1;function st(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],o=i[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function ft(e){return e.replace(mt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,a,i,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?xt(e,s,ct(t)):null!=n?xt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,r,a,i,s,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function xt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(L(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Mt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Et(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&Et(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Lt=null;function jt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Le]||null;if(!a)throw Error(s(90));gt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Ut(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==kt||null!==Lt)&&(Bc(),kt&&(t=kt,e=Lt,Lt=kt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function It(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Le]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ot=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(Ot)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Lh){Ft=!1}var Bt=null,Ht=null,Vt=null;function Gt(){if(Vt)return Vt;var e,t,n=Ht,r=n.length,a="value"in Bt?Bt.value:Bt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Vt=a.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Xt(){return!1}function Yt(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?qt:Xt,this.isPropagationStopped=Xt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Kt,Jt,Zt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Yt($t),en=h({},$t,{view:0,detail:0}),tn=Yt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Kt=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Kt=0,Zt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),rn=Yt(nn),an=Yt(h({},nn,{dataTransfer:0})),sn=Yt(h({},en,{relatedTarget:0})),on=Yt(h({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(h({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(h({},$t,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return pn}var fn=Yt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),xn=Yt(h({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=Yt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Yt(h({},$t,{newState:0,oldState:0})),_n=[9,13,27,32],wn=Ot&&"CompositionEvent"in window,Sn=null;Ot&&"documentMode"in document&&(Sn=document.documentMode);var En=Ot&&"TextEvent"in window&&!Sn,Mn=Ot&&(!wn||Sn&&8<Sn&&11>=Sn),Tn=String.fromCharCode(32),Nn=!1;function An(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Ln(e,t,n,r){kt?Lt?Lt.push(r):Lt=[r]:kt=r,0<(t=Gu(t,"onChange")).length&&(n=new Qt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,Dn=null;function Un(e){Uu(e,0)}function In(e){if(ht(Ve(e)))return e}function On(e,t){if("change"===e)return t}var Fn=!1;if(Ot){var zn;if(Ot){var Bn="oninput"in document;if(!Bn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Bn="function"===typeof Hn.oninput}zn=Bn}else zn=!1;Fn=zn&&(!document.documentMode||9<document.documentMode)}function Vn(){jn&&(jn.detachEvent("onpropertychange",Gn),Dn=jn=null)}function Gn(e){if("value"===e.propertyName&&In(Dn)){var t=[];Ln(t,Dn,e,Pt(e)),Ut(Un,t)}}function Wn(e,t,n){"focusin"===e?(Vn(),Dn=n,(jn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Vn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return In(Dn)}function Xn(e,t){if("click"===e)return In(t)}function Yn(e,t){if("input"===e||"change"===e)return In(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!J.call(t,a)||!Kn(e[a],t[a]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function Qn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ot&&"documentMode"in document&&11>=document.documentMode,rr=null,ar=null,ir=null,sr=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Jn(ir,r)||(ir=r,0<(r=Gu(ar,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ot&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),mr=hr("animationiteration"),fr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),xr=hr("transitioncancel"),yr=hr("transitionend"),br=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){br.set(e,t),Ye(t,[e])}_r.push("scrollEnd");var Sr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Mr=[],Tr=0,Nr=0;function Ar(){for(var e=Tr,t=Nr=Tr=0;t<e;){var n=Mr[t];Mr[t++]=null;var r=Mr[t];Mr[t++]=null;var a=Mr[t];Mr[t++]=null;var i=Mr[t];if(Mr[t++]=null,null!==r&&null!==a){var s=r.pending;null===s?a.next=a:(a.next=s.next,s.next=a),r.pending=a}0!==i&&kr(n,a,i)}}function Cr(e,t,n,r){Mr[Tr++]=e,Mr[Tr++]=t,Mr[Tr++]=n,Mr[Tr++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Cr(e,t,n,r),Lr(e)}function Pr(e,t){return Cr(e,null,null,t),Lr(e)}function kr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-pe(n),null===(r=(e=i.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),i):null}function Lr(e){if(50<kc)throw kc=0,Lc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var jr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Dr(e,t,n,r)}function Ir(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Or(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,a,i){var o=0;if(r=e,"function"===typeof e)Ir(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Ur(31,n,t,a)).elementType=N,e.lanes=i,e;case g:return Br(n.children,a,i,t);case v:o=8,a|=24;break;case x:return(e=Ur(12,n,t,2|a)).elementType=x,e.lanes=i,e;case S:return(e=Ur(13,n,t,a)).elementType=S,e.lanes=i,e;case E:return(e=Ur(19,n,t,a)).elementType=E,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case _:o=10;break e;case b:o=9;break e;case w:o=11;break e;case M:o=14;break e;case T:o=16,r=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Ur(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Br(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Vr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=[],Wr=0,qr=null,Xr=0,Yr=[],Kr=0,Jr=null,Zr=1,$r="";function Qr(e,t){Gr[Wr++]=Xr,Gr[Wr++]=qr,qr=e,Xr=t}function ea(e,t,n){Yr[Kr++]=Zr,Yr[Kr++]=$r,Yr[Kr++]=Jr,Jr=e;var r=Zr;e=$r;var a=32-pe(r)-1;r&=~(1<<a),n+=1;var i=32-pe(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Zr=1<<32-pe(t)+a|n<<a|r,$r=i+e}else Zr=1<<i|n<<a|r,$r=e}function ta(e){null!==e.return&&(Qr(e,1),ea(e,1,0))}function na(e){for(;e===qr;)qr=Gr[--Wr],Gr[Wr]=null,Xr=Gr[--Wr],Gr[Wr]=null;for(;e===Jr;)Jr=Yr[--Kr],Yr[Kr]=null,$r=Yr[--Kr],Yr[Kr]=null,Zr=Yr[--Kr],Yr[Kr]=null}var ra=null,aa=null,ia=!1,sa=null,oa=!1,la=Error(s(519));function ca(e){throw fa(Er(Error(s(418,"")),e)),la}function ua(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ke]=e,t[Le]=r,n){case"dialog":Iu("cancel",t),Iu("close",t);break;case"iframe":case"object":case"embed":Iu("load",t);break;case"video":case"audio":for(n=0;n<ju.length;n++)Iu(ju[n],t);break;case"source":Iu("error",t);break;case"img":case"image":case"link":Iu("error",t),Iu("load",t);break;case"details":Iu("toggle",t);break;case"input":Iu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Iu("invalid",t);break;case"textarea":Iu("invalid",t),_t(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Iu("beforetoggle",t),Iu("toggle",t)),null!=r.onScroll&&Iu("scroll",t),null!=r.onScrollEnd&&Iu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||ca(e)}function da(e){for(ra=e.return;ra;)switch(ra.tag){case 5:case 13:return void(oa=!1);case 27:case 3:return void(oa=!0);default:ra=ra.return}}function ha(e){if(e!==ra)return!1;if(!ia)return da(e),ia=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),da(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){aa=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}aa=null}}else 27===n?(n=aa,pd(e.type)?(e=xd,xd=null,aa=e):aa=n):aa=ra?vd(e.stateNode.nextSibling):null;return!0}function pa(){aa=ra=null,ia=!1}function ma(){var e=sa;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),sa=null),e}function fa(e){null===sa?sa=[e]:sa.push(e)}var ga=F(null),va=null,xa=null;function ya(e,t,n){B(ga,t._currentValue),t._currentValue=n}function ba(e){e._currentValue=ga.current,z(ga)}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wa(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var o=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),_a(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),_a(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Sa(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=a.type;Kn(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===W.current){if(null===(o=a.alternate))throw Error(s(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}a=a.return}null!==e&&wa(t,e,n,r),t.flags|=262144}function Ea(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ma(e){va=e,xa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ta(e){return Aa(va,e)}function Na(e,t){return null===va&&Ma(e),Aa(e,t)}function Aa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xa){if(null===e)throw Error(s(308));xa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xa=xa.next=t;return n}var Ca="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ra=r.unstable_scheduleCallback,Pa=r.unstable_NormalPriority,ka={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function La(){return{controller:new Ca,data:new Map,refCount:0}}function ja(e){e.refCount--,0===e.refCount&&Ra(Pa,(function(){e.controller.abort()}))}var Da=null,Ua=0,Ia=0,Oa=null;function Fa(){if(0===--Ua&&null!==Da){null!==Oa&&(Oa.status="fulfilled");var e=Da;Da=null,Ia=0,Oa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var za=j.S;j.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Da){var n=Da=[];Ua=0,Ia=Cu(),Oa={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ua++,t.then(Fa,Fa)}(0,t),null!==za&&za(e,t)};var Ba=F(null);function Ha(){var e=Ba.current;return null!==e?e:rc.pooledCache}function Va(e,t){B(Ba,null===t?Ba.current:t.pool)}function Ga(){var e=Ha();return null===e?null:{parent:ka._currentValue,pool:e}}var Wa=Error(s(460)),qa=Error(s(474)),Xa=Error(s(542)),Ya={then:function(){}};function Ka(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ja(){}function Za(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ja,Ja),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ja,Ja);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw $a=t,Wa}}var $a=null;function Qa(){if(null===$a)throw Error(s(459));var e=$a;return $a=null,e}function ei(e){if(e===Wa||e===Xa)throw Error(s(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ai(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Lr(e),kr(e,null,n),t}return Cr(e,r,t,n),Lr(e)}function si(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Oa)throw Oa}}function ui(e,t,n,r){li=!1;var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var p=-536870913&o.lane,m=p!==o.lane;if(m?(ic&p)===p:(r&p)===p){0!==p&&p===Ia&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,g=o;p=t;var v=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(v,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(v,d,p):f)||void 0===p)break e;d=h({},d,p);break e;case 2:ti=!0}}null!==(p=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[p]:m.push(p))}else m={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,s|=p;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),pc|=s,e.lanes=s,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var pi=F(null),mi=F(0);function fi(e,t){B(mi,e=dc),B(pi,t),dc=e|t.baseLanes}function gi(){B(mi,dc),B(pi,pi.current)}function vi(){dc=mi.current,z(pi),z(mi)}var xi=0,yi=null,bi=null,_i=null,wi=!1,Si=!1,Ei=!1,Mi=0,Ti=0,Ni=null,Ai=0;function Ci(){throw Error(s(321))}function Ri(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function Pi(e,t,n,r,a,i){return xi=i,yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=null===e||null===e.memoizedState?Ws:qs,Ei=!1,i=n(r,a),Ei=!1,Si&&(i=Li(t,n,r,a)),ki(e),i}function ki(e){j.H=Gs;var t=null!==bi&&null!==bi.next;if(xi=0,_i=bi=yi=null,wi=!1,Ti=0,Ni=null,t)throw Error(s(300));null===e||No||null!==(e=e.dependencies)&&Ea(e)&&(No=!0)}function Li(e,t,n,r){yi=e;var a=0;do{if(Si&&(Ni=null),Ti=0,Si=!1,25<=a)throw Error(s(301));if(a+=1,_i=bi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}j.H=Xs,i=t(n,r)}while(Si);return i}function ji(){var e=j.H,t=e.useState()[0];return t="function"===typeof t.then?zi(t):t,e=e.useState()[0],(null!==bi?bi.memoizedState:null)!==e&&(yi.flags|=1024),t}function Di(){var e=0!==Mi;return Mi=0,e}function Ui(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ii(e){if(wi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}wi=!1}xi=0,_i=bi=yi=null,Si=!1,Ti=Mi=0,Ni=null}function Oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_i?yi.memoizedState=_i=e:_i=_i.next=e,_i}function Fi(){if(null===bi){var e=yi.alternate;e=null!==e?e.memoizedState:null}else e=bi.next;var t=null===_i?yi.memoizedState:_i.next;if(null!==t)_i=t,bi=e;else{if(null===e){if(null===yi.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(bi=e).memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},null===_i?yi.memoizedState=_i=e:_i=_i.next=e}return _i}function zi(e){var t=Ti;return Ti+=1,null===Ni&&(Ni=[]),e=Za(Ni,e,t),t=yi,null===(null===_i?t.memoizedState:_i.next)&&(t=t.alternate,j.H=null===t||null===t.memoizedState?Ws:qs),e}function Bi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zi(e);if(e.$$typeof===_)return Ta(e)}throw Error(s(438,String(e)))}function Hi(e){var t=null,n=yi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=yi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function Vi(e,t){return"function"===typeof t?t(e):t}function Gi(e){return Wi(Fi(),bi,e)}function Wi(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(xi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ia&&(d=!0);else{if((xi&p)===p){u=u.next,p===Ia&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,yi.lanes|=p,pc|=p}h=u.action,Ei&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=i):c=c.next=p,yi.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Kn(i,e.memoizedState)&&(No=!0,d&&null!==(n=Oa)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function qi(e){var t=Fi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);Kn(i,t.memoizedState)||(No=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Xi(e,t,n){var r=yi,a=Fi(),i=ia;if(i){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Kn((bi||a).memoizedState,n);if(o&&(a.memoizedState=n,No=!0),a=a.queue,gs(2048,8,Ji.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||null!==_i&&1&_i.memoizedState.tag){if(r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Ki.bind(null,r,a,n,t),null),null===rc)throw Error(s(349));i||0!==(124&xi)||Yi(r,t,n)}return n}function Yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=yi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ki(e,t,n,r){t.value=n,t.getSnapshot=r,Zi(t)&&$i(e)}function Ji(e,t,n){return n((function(){Zi(t)&&$i(e)}))}function Zi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(r){return!0}}function $i(e){var t=Pr(e,2);null!==t&&Uc(t,e,2)}function Qi(e){var t=Oi();if("function"===typeof e){var n=e;if(e=n(),Ei){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t}function es(e,t,n,r){return e.baseState=n,Wi(e,bi,"function"===typeof r?r:Vi)}function ts(e,t,n,r,a){if(Bs(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==j.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,ns(t,i)):(i.next=n.next,t.pending=n.next=i)}}function ns(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=j.T,s={};j.T=s;try{var o=n(a,r),l=j.S;null!==l&&l(s,o),rs(e,t,o)}catch(c){is(e,t,c)}finally{j.T=i}}else try{rs(e,t,i=n(a,r))}catch(u){is(e,t,u)}}function rs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){as(e,t,n)}),(function(n){return is(e,t,n)})):as(e,t,n)}function as(e,t,n){t.status="fulfilled",t.value=n,ss(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ns(e,n)))}function is(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ss(t),t=t.next}while(t!==r)}e.action=null}function ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ls(e,t){if(ia){var n=rc.formState;if(null!==n){e:{var r=yi;if(ia){if(aa){t:{for(var a=aa,i=oa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=vd(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){aa=vd(a.nextSibling),r="F!"===a.data;break e}}ca(r)}r=!1}r&&(t=n[0])}}return(n=Oi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},n.queue=r,n=Os.bind(null,yi,r),r.dispatch=n,r=Qi(!1),i=zs.bind(null,yi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Oi()).queue=a,n=ts.bind(null,yi,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function cs(e){return us(Fi(),bi,e)}function us(e,t,n){if(t=Wi(e,t,os)[0],e=Gi(Vi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zi(t)}catch(s){if(s===Wa)throw Xa;throw s}else r=t;var a=(t=Fi()).queue,i=a.dispatch;return n!==t.memoizedState&&(yi.flags|=2048,ps(9,{destroy:void 0,resource:void 0},ds.bind(null,a,n),null)),[r,i,e]}function ds(e,t){e.action=t}function hs(e){var t=Fi(),n=bi;if(null!==n)return us(t,n,e);Fi(),t=t.memoizedState;var r=(n=Fi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ps(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=yi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ms(){return Fi().memoizedState}function fs(e,t,n,r){var a=Oi();r=void 0===r?null:r,yi.flags|=e,a.memoizedState=ps(1|t,{destroy:void 0,resource:void 0},n,r)}function gs(e,t,n,r){var a=Fi();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==bi&&null!==r&&Ri(r,bi.memoizedState.deps)?a.memoizedState=ps(t,i,n,r):(yi.flags|=e,a.memoizedState=ps(1|t,i,n,r))}function vs(e,t){fs(8390656,8,e,t)}function xs(e,t){gs(2048,8,e,t)}function ys(e,t){return gs(4,2,e,t)}function bs(e,t){return gs(4,4,e,t)}function _s(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ws(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,gs(4,4,_s.bind(null,t,e),n)}function Ss(){}function Es(e,t){var n=Fi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ri(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ms(e,t){var n=Fi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ri(t,r[1]))return r[0];if(r=e(),Ei){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ts(e,t,n){return void 0===n||0!==(1073741824&xi)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),yi.lanes|=e,pc|=e,n)}function Ns(e,t,n,r){return Kn(n,t)?n:null!==pi.current?(e=Ts(e,n,r),Kn(e,t)||(No=!0),e):0===(42&xi)?(No=!0,e.memoizedState=n):(e=Dc(),yi.lanes|=e,pc|=e,t)}function As(e,t,n,r,a){var i=D.p;D.p=0!==i&&8>i?i:8;var s=j.T,o={};j.T=o,zs(e,!1,t,n);try{var l=a(),c=j.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Fs(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),jc());else Fs(e,t,r,jc())}catch(u){Fs(e,t,{then:function(){},status:"rejected",reason:u},jc())}finally{D.p=i,j.T=s}}function Cs(){}function Rs(e,t,n,r){if(5!==e.tag)throw Error(s(476));var a=Ps(e).queue;As(e,a,t,U,null===n?Cs:function(){return ks(e),n(r)})}function Ps(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:U},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ks(e){Fs(e,Ps(e).next.queue,{},jc())}function Ls(){return Ta(Yd)}function js(){return Fi().memoizedState}function Ds(){return Fi().memoizedState}function Us(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=jc(),r=ii(t,e=ai(n),n);return null!==r&&(Uc(r,t,n),si(r,t,n)),t={cache:La()},void(e.payload=t)}t=t.return}}function Is(e,t,n){var r=jc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bs(e)?Hs(t,n):null!==(n=Rr(e,t,n,r))&&(Uc(n,e,r),Vs(n,t,r))}function Os(e,t,n){Fs(e,t,n,jc())}function Fs(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bs(e))Hs(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,Kn(o,s))return Cr(e,t,a,0),null===rc&&Ar(),!1}catch(l){}if(null!==(n=Rr(e,t,a,r)))return Uc(n,e,r),Vs(n,t,r),!0}return!1}function zs(e,t,n,r){if(r={lane:2,revertLane:Cu(),action:r,hasEagerState:!1,eagerState:null,next:null},Bs(e)){if(t)throw Error(s(479))}else null!==(t=Rr(e,n,r,2))&&Uc(t,e,2)}function Bs(e){var t=e.alternate;return e===yi||null!==t&&t===yi}function Hs(e,t){Si=wi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}var Gs={readContext:Ta,use:Bi,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useLayoutEffect:Ci,useInsertionEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useSyncExternalStore:Ci,useId:Ci,useHostTransitionStatus:Ci,useFormState:Ci,useActionState:Ci,useOptimistic:Ci,useMemoCache:Ci,useCacheRefresh:Ci},Ws={readContext:Ta,use:Bi,useCallback:function(e,t){return Oi().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:vs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,fs(4194308,4,_s.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fs(4194308,4,e,t)},useInsertionEffect:function(e,t){fs(4,2,e,t)},useMemo:function(e,t){var n=Oi();t=void 0===t?null:t;var r=e();if(Ei){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Oi();if(void 0!==n){var a=n(t);if(Ei){he(!0);try{n(t)}finally{he(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Is.bind(null,yi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Oi().memoizedState=e},useState:function(e){var t=(e=Qi(e)).queue,n=Os.bind(null,yi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ss,useDeferredValue:function(e,t){return Ts(Oi(),e,t)},useTransition:function(){var e=Qi(!1);return e=As.bind(null,yi,e.queue,!0,!1),Oi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=yi,a=Oi();if(ia){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===rc)throw Error(s(349));0!==(124&ic)||Yi(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,vs(Ji.bind(null,r,i,e),[e]),r.flags|=2048,ps(9,{destroy:void 0,resource:void 0},Ki.bind(null,r,i,n,t),null),n},useId:function(){var e=Oi(),t=rc.identifierPrefix;if(ia){var n=$r;t="\xab"+t+"R"+(n=(Zr&~(1<<32-pe(Zr)-1)).toString(32)+n),0<(n=Mi++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ai++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ls,useFormState:ls,useActionState:ls,useOptimistic:function(e){var t=Oi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zs.bind(null,yi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hi,useCacheRefresh:function(){return Oi().memoizedState=Us.bind(null,yi)}},qs={readContext:Ta,use:Bi,useCallback:Es,useContext:Ta,useEffect:xs,useImperativeHandle:ws,useInsertionEffect:ys,useLayoutEffect:bs,useMemo:Ms,useReducer:Gi,useRef:ms,useState:function(){return Gi(Vi)},useDebugValue:Ss,useDeferredValue:function(e,t){return Ns(Fi(),bi.memoizedState,e,t)},useTransition:function(){var e=Gi(Vi)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Xi,useId:js,useHostTransitionStatus:Ls,useFormState:cs,useActionState:cs,useOptimistic:function(e,t){return es(Fi(),0,e,t)},useMemoCache:Hi,useCacheRefresh:Ds},Xs={readContext:Ta,use:Bi,useCallback:Es,useContext:Ta,useEffect:xs,useImperativeHandle:ws,useInsertionEffect:ys,useLayoutEffect:bs,useMemo:Ms,useReducer:qi,useRef:ms,useState:function(){return qi(Vi)},useDebugValue:Ss,useDeferredValue:function(e,t){var n=Fi();return null===bi?Ts(n,e,t):Ns(n,bi.memoizedState,e,t)},useTransition:function(){var e=qi(Vi)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Xi,useId:js,useHostTransitionStatus:Ls,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=Fi();return null!==bi?es(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hi,useCacheRefresh:Ds},Ys=null,Ks=0;function Js(e){var t=Ks;return Ks+=1,null===Ys&&(Ys=[]),Za(Ys,e,t)}function Zs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $s(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Or(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===T&&Qs(i)===t.type)?(Zs(t=a(t,n.props),n),t.return=e,t):(Zs(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Br(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Zs(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Vr(t,e.mode,n)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),n)}if(L(t)||R(t))return(t=Br(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Js(t),n);if(t.$$typeof===_)return h(e,Na(e,t),n);$s(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===a?c(e,t,n,r):null;case f:return n.key===a?u(e,t,n,r):null;case T:return p(e,t,n=(a=n._init)(n._payload),r)}if(L(n)||R(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Js(n),r);if(n.$$typeof===_)return p(e,t,Na(e,n),r);$s(e,n)}return null}function v(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case T:return v(e,t,n,r=(0,r._init)(r._payload),a)}if(L(r)||R(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return v(e,t,n,Js(r),a);if(r.$$typeof===_)return v(e,t,n,Na(t,r),a);$s(t,r)}return null}function x(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===T&&Qs(y)===c.type){n(l,c.sibling),Zs(d=a(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Br(u.props.children,l.mode,d,u.key)).return=l,l=d):(Zs(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case f:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Vr(u,l.mode,d)).return=l,l=d}return o(l);case T:return x(l,c,u=(y=u._init)(u._payload),d)}if(L(u))return function(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,f=null;null!==d&&m<o.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var g=p(a,d,o[m],l);if(null===g){null===d&&(d=f);break}e&&d&&null===g.alternate&&t(a,d),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g,d=f}if(m===o.length)return n(a,d),ia&&Qr(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return ia&&Qr(a,m),c}for(d=r(d);m<o.length;m++)null!==(f=v(d,a,m,o[m],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?m:f.key),s=i(f,s,m),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(a,e)})),ia&&Qr(a,m),c}(l,c,u,d);if(R(u)){if("function"!==typeof(y=R(u)))throw Error(s(150));return function(a,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,m=o,f=o=0,g=null,x=l.next();null!==m&&!x.done;f++,x=l.next()){m.index>f?(g=m,m=null):g=m.sibling;var y=p(a,m,x.value,c);if(null===y){null===m&&(m=g);break}e&&m&&null===y.alternate&&t(a,m),o=i(y,o,f),null===d?u=y:d.sibling=y,d=y,m=g}if(x.done)return n(a,m),ia&&Qr(a,f),u;if(null===m){for(;!x.done;f++,x=l.next())null!==(x=h(a,x.value,c))&&(o=i(x,o,f),null===d?u=x:d.sibling=x,d=x);return ia&&Qr(a,f),u}for(m=r(m);!x.done;f++,x=l.next())null!==(x=v(m,a,f,x.value,c))&&(e&&null!==x.alternate&&m.delete(null===x.key?f:x.key),o=i(x,o,f),null===d?u=x:d.sibling=x,d=x);return e&&m.forEach((function(e){return t(a,e)})),ia&&Qr(a,f),u}(l,c,u=y.call(u),d)}if("function"===typeof u.then)return x(l,c,Js(u),d);if(u.$$typeof===_)return x(l,c,Na(l,u),d);$s(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=a(c,u)).return=l,l=d):(n(l,c),(d=Hr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Ks=0;var a=x(e,t,n,r);return Ys=null,a}catch(s){if(s===Wa||s===Xa)throw s;var i=Ur(29,s,null,e.mode);return i.lanes=r,i.return=e,i}}}var to=eo(!0),no=eo(!1),ro=F(null),ao=null;function io(e){var t=e.alternate;B(co,1&co.current),B(ro,e),null===ao&&(null===t||null!==pi.current||null!==t.memoizedState)&&(ao=e)}function so(e){if(22===e.tag){if(B(co,co.current),B(ro,e),null===ao){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ao=e)}}else oo()}function oo(){B(co,co.current),B(ro,ro.current)}function lo(e){z(ro),ao===e&&(ao=null),z(co)}var co=F(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jc(),a=ai(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ii(e,a,r))&&(Uc(t,e,r),si(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jc(),a=ai(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ii(e,a,r))&&(Uc(t,e,r),si(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jc(),r=ai(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Uc(t,e,n),si(t,e,n))}};function mo(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(a,i))}function fo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=h({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function xo(e){vo(e)}function yo(e){console.error(e)}function bo(e){vo(e)}function _o(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function wo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function So(e,t,n){return(n=ai(n)).tag=3,n.payload={element:null},n.callback=function(){_o(e,t)},n}function Eo(e){return(e=ai(e)).tag=3,e}function Mo(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){wo(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){wo(t,n,r),"function"!==typeof a&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var To=Error(s(461)),No=!1;function Ao(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Co(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return Ma(t),r=Pi(e,t,n,s,i,a),o=Di(),null===e||No?(ia&&o&&ta(t),t.flags|=1,Ao(e,t,r,a),t.child):(Ui(e,t,a),Ko(e,t,a))}function Ro(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Ir(i)||void 0!==i.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Po(e,t,i,r,a))}if(i=e.child,!Jo(e,a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(s,r)&&e.ref===t.ref)return Ko(e,t,a)}return t.flags|=1,(e=Or(i,r)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(No=!1,t.pendingProps=r=i,!Jo(e,a))return t.lanes=e.lanes,Ko(e,t,a);0!==(131072&e.flags)&&(No=!0)}}return Do(e,t,n,r,a)}function ko(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(a=t.child=e.child,i=0;null!==a;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Lo(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Lo(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Va(0,null!==i?i.cachePool:null),null!==i?fi(t,i):gi(),so(t)}else null!==i?(Va(0,i.cachePool),fi(t,i),oo(),t.memoizedState=null):(null!==e&&Va(0,null),gi(),oo());return Ao(e,t,a,n),t.child}function Lo(e,t,n,r){var a=Ha();return a=null===a?null:{parent:ka._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Va(0,null),gi(),so(t),null!==e&&Sa(e,t,r,!0),null}function jo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Do(e,t,n,r,a){return Ma(t),n=Pi(e,t,n,r,void 0,a),r=Di(),null===e||No?(ia&&r&&ta(t),t.flags|=1,Ao(e,t,n,a),t.child):(Ui(e,t,a),Ko(e,t,a))}function Uo(e,t,n,r,a,i){return Ma(t),t.updateQueue=null,n=Li(t,r,n,a),ki(e),r=Di(),null===e||No?(ia&&r&&ta(t),t.flags|=1,Ao(e,t,n,i),t.child):(Ui(e,t,i),Ko(e,t,i))}function Io(e,t,n,r,a){if(Ma(t),null===t.stateNode){var i=jr,s=n.contextType;"object"===typeof s&&null!==s&&(i=Ta(s)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=po,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),s=n.contextType,i.context="object"===typeof s&&null!==s?Ta(s):jr,i.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(ho(t,n,s,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&po.enqueueReplaceState(i,i.state,null),ui(t,r,i,a),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=go(n,o);i.props=l;var c=i.context,u=n.contextType;s=jr,"object"===typeof u&&null!==u&&(s=Ta(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==s)&&fo(t,i,r,s),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,a),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ti||mo(t,n,l,r,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=s,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=go(n,s=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=jr,"object"===typeof c&&null!==c&&(l=Ta(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&fo(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,a),ci();var p=t.memoizedState;s!==d||h!==p||ti||null!==e&&null!==e.dependencies&&Ea(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),p=t.memoizedState),(u=ti||mo(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Ea(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,jo(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,a),t.child=to(t,null,n,a)):Ao(e,t,n,a),t.memoizedState=i.state,e=t.child):e=Ko(e,t,a),e}function Oo(e,t,n,r){return pa(),t.flags|=256,Ao(e,t,n,r),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Ga()}}function Bo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ho(e,t,n){var r,a=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ia){if(i?io(t):oo(),ia){var l,c=aa;if(l=c){e:{for(l=c,c=oa;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Jr?{id:Zr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},(l=Ur(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ra=t,aa=null,l=!0):l=!1}l||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=a.children,a=a.fallback,i?(oo(),c=Go({mode:"hidden",children:c},i=t.mode),a=Br(a,i,n,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(i=t.child).memoizedState=zo(n),i.childLanes=Bo(e,r,n),t.memoizedState=Fo,a):(io(t),Vo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=a.fallback,c=t.mode,a=Go({mode:"visible",children:a.children},c),(i=Br(i,c,n,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,to(t,e.child,null,n),(a=t.child).memoizedState=zo(n),a.childLanes=Bo(e,r,n),t.memoizedState=Fo,t=i);else if(io(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(s(419))).stack="",a.digest=r,fa({value:a,source:null,stack:null}),t=Wo(e,t,n)}else if(No||Sa(e,t,n,!1),r=0!==(n&e.childLanes),No||r){if(null!==(r=rc)&&(0!==(a=0!==((a=0!==(42&(a=n&-n))?1:Ae(a))&(r.suspendedLanes|n))?0:a)&&a!==l.retryLane))throw l.retryLane=a,Pr(e,a),Uc(r,e,a),To;"$?"===c.data||Xc(),t=Wo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=vd(c.nextSibling),ra=t,ia=!0,sa=null,oa=!1,null!==e&&(Yr[Kr++]=Zr,Yr[Kr++]=$r,Yr[Kr++]=Jr,Zr=e.id,$r=e.overflow,Jr=t),(t=Vo(t,a.children)).flags|=4096);return t}return i?(oo(),i=a.fallback,c=t.mode,u=(l=e.child).sibling,(a=Or(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Or(u,i):(i=Br(i,c,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=ka._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ga(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Bo(e,r,n),t.memoizedState=Fo,a):(io(t),e=(n=e.child).sibling,(n=Or(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Vo(e,t){return(t=Go({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Go(e,t){return(e=Ur(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return to(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Xo(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Yo(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Ao(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(co,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Xo(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Xo(t,!0,n,null,i);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Sa(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Or(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Or(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ea(e))}function Zo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)No=!0;else{if(!Jo(e,n)&&0===(128&t.flags))return No=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),ya(0,ka,e.memoizedState.cache),pa();break;case 27:case 5:Y(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:ya(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ho(e,t,n):(io(t),null!==(e=Ko(e,t,n))?e.sibling:null);io(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Sa(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),B(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n);case 24:ya(0,ka,e.memoizedState.cache)}return Ko(e,t,n)}(e,t,n);No=0!==(131072&e.flags)}else No=!1,ia&&0!==(1048576&t.flags)&&ea(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((a=r.$$typeof)===w){t.tag=11,t=Co(null,t,r,e,n);break e}if(a===M){t.tag=14,t=Ro(null,t,r,e,n);break e}}throw t=k(r)||r,Error(s(306,t,""))}Ir(r)?(e=go(r,e),t.tag=1,t=Io(null,t,r,e,n)):(t.tag=0,t=Do(null,t,r,e,n))}return t;case 0:return Do(e,t,t.type,t.pendingProps,n);case 1:return Io(e,t,r=t.type,a=go(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ya(0,ka,r),r!==i.cache&&wa(t,[ka],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Oo(e,t,r,n);break e}if(r!==a){fa(a=Er(Error(s(424)),t)),t=Oo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=vd(e.firstChild),ra=t,ia=!0,sa=null,oa=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===a){t=Ko(e,t,n);break e}Ao(e,t,r,n)}t=t.child}return t;case 26:return jo(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:ia||(n=t.type,e=t.pendingProps,(r=rd(G.current).createElement(n))[ke]=t,r[Le]=e,ed(r,n,e),We(r),t.stateNode=r):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&ia&&(r=t.stateNode=bd(t.type,t.pendingProps,G.current),ra=t,oa=!0,a=aa,pd(t.type)?(xd=a,aa=vd(r.firstChild)):aa=a),Ao(e,t,t.pendingProps.children,n),jo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ia&&((a=r=aa)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,oa))?(t.stateNode=r,ra=t,aa=vd(r.firstChild),oa=!1,a=!0):a=!1),a||ca(t)),Y(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,sd(a,i)?r=null:null!==o&&sd(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Pi(e,t,ji,null,null,n),Yd._currentValue=a),jo(e,t),Ao(e,t,r,n),t.child;case 6:return null===e&&ia&&((e=n=aa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,oa))?(t.stateNode=n,ra=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return Ho(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):Ao(e,t,r,n),t.child;case 11:return Co(e,t,t.type,t.pendingProps,n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ya(0,t.type,r.value),Ao(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ma(t),r=r(a=Ta(a)),t.flags|=1,Ao(e,t,r,n),t.child;case 14:return Ro(e,t,t.type,t.pendingProps,n);case 15:return Po(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Go(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Or(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ko(e,t,n);case 24:return Ma(t),r=Ta(ka),null===e?(null===(a=Ha())&&(a=rc,i=La(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},ni(t),ya(0,ka,a)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ya(0,ka,r)):(r=i.cache,ya(0,ka,r),r!==a.cache&&wa(t,[ka],n,!0))),Ao(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function $o(e){e.flags|=4}function Qo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=ro.current)&&((4194048&ic)===ic?null!==ao:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ao))throw $a=Ya,qa;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ba(ka),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ha(t)?$o(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ma())),nl(t),null;case 26:return n=t.memoizedState,null===e?($o(t),null!==n?(nl(t),Qo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($o(t),nl(t),Qo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&$o(t),nl(t),t.flags&=-16777217),null;case 27:K(t),n=G.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$o(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return nl(t),null}e=H.current,ha(t)?ua(t):(e=bd(a,r,n),t.stateNode=e,$o(t))}return nl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$o(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return nl(t),null}if(e=H.current,ha(t))ua(t);else{switch(a=rd(G.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[ke]=t,e[Le]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$o(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&$o(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=G.current,ha(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ra))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ke]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Ju(e.nodeValue,n)))||ca(t)}else(e=rd(e).createTextNode(r))[ke]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[ke]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),a=!1}else a=ma(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return X(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return ba(t.type),nl(t),null;case 19:if(z(co),null===(a=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=a.rendering))if(r)tl(a,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,tl(a,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return B(co,1&co.current|2),t.child}e=e.sibling}null!==a.tail&&te()>wc&&(t.flags|=128,r=!0,tl(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!ia)return nl(t),null}else 2*te()-a.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=co.current,B(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),vi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Ba),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ba(ka),nl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function al(e,t){switch(na(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ba(ka),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return X(),null;case 10:return ba(t.type),null;case 22:case 23:return lo(t),vi(),null!==e&&z(Ba),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ba(ka),null;default:return null}}function il(e,t){switch(na(t),t.tag){case 3:ba(ka),X();break;case 26:case 27:case 5:K(t);break;case 4:X();break;case 13:lo(t);break;case 19:z(co);break;case 10:ba(t.type);break;case 22:case 23:lo(t),vi(),null!==e&&z(Ba);break;case 24:ba(ka)}}function sl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==a)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,a=t;var l=n,c=o;try{c()}catch(u){uu(a,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){uu(e,t,a)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){uu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){uu(e,e.return,a)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||$u(e,t,m,null,r,h)}}for(var p in r){var m=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=m||null!=h))switch(p){case"type":i=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:m!==h&&$u(e,t,p,m,r,h)}}return void gt(e,o,l,c,u,d,i,a);case"select":for(i in m=o=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||$u(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&$u(e,t,a,i,r,c)}return t=l,n=o,r=m,void(null!=p?yt(e,!!n,p,!1):!!r!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=p=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:$u(e,t,l,null,r,a)}for(o in r)if(a=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=a||null!=i))switch(o){case"value":p=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(s(91));break;default:a!==i&&$u(e,t,o,a,r,i)}return void bt(e,p,m);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else $u(e,t,f,null,r,p);for(c in r)if(p=r[c],m=n[c],r.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else $u(e,t,c,p,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&$u(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(null!=p||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:$u(e,t,u,p,r,m)}return;default:if(Tt(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&Qu(e,t,v,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||void 0===p&&void 0===m||Qu(e,t,d,p,r,m);return}}for(var x in n)p=n[x],n.hasOwnProperty(x)&&null!=p&&!r.hasOwnProperty(x)&&$u(e,t,x,null,r,p);for(h in r)p=r[h],m=n[h],!r.hasOwnProperty(h)||p===m||null==p&&null==m||$u(e,t,h,p,r,m)}(r,e.type,n,t),r[Le]=t}catch(a){uu(e,e.return,a)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function xl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ed(t,r,n),t[ke]=e,t[Le]=n}catch(i){uu(e,e.return,i)}}var yl=!1,bl=!1,_l=!1,wl="function"===typeof WeakSet?WeakSet:Set,Sl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Il(e,n),4&r&&sl(5,n);break;case 1:if(Il(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){uu(n,n.return,s)}else{var a=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Il(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(s){uu(n,n.return,s)}}break;case 27:null===t&&4&r&&xl(n);case 26:case 5:Il(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Il(e,n);break;case 13:Il(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||bl,a=yl;var i=bl;yl=r,(bl=t)&&!i?Fl(e,n,0!==(8772&n.subtreeFlags)):Il(e,n),yl=a,bl=i}break;case 30:break;default:Il(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Nl=!1;function Al(e,t,n){for(n=n.child;null!==n;)Cl(e,t,n),n=n.sibling}function Cl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:bl||dl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||dl(n,t);var r=Tl,a=Nl;pd(n.type)&&(Tl=n.stateNode,Nl=!1),Al(e,t,n),_d(n.stateNode),Tl=r,Nl=a;break;case 5:bl||dl(n,t);case 6:if(r=Tl,a=Nl,Tl=null,Al(e,t,n),Nl=a,null!==(Tl=r))if(Nl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(s){uu(n,t,s)}else try{Tl.removeChild(n.stateNode)}catch(s){uu(n,t,s)}break;case 18:null!==Tl&&(Nl?(md(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nh(e)):md(Tl,n.stateNode));break;case 4:r=Tl,a=Nl,Tl=n.stateNode.containerInfo,Nl=!0,Al(e,t,n),Tl=r,Nl=a;break;case 0:case 11:case 14:case 15:bl||ol(2,n,t),bl||ol(4,n,t),Al(e,t,n);break;case 1:bl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Al(e,t,n),bl=r;break;default:Al(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nh(e)}catch(n){uu(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function kl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Tl=l.stateNode,Nl=!1;break e}break;case 5:Tl=l.stateNode,Nl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Tl)throw Error(s(160));Cl(i,o,a),Tl=null,Nl=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)jl(t,e),t=t.sibling}var Ll=null;function jl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kl(t,e),Dl(e),4&r&&(ol(3,e,e.return),sl(3,e),ol(5,e,e.return));break;case 1:kl(t,e),Dl(e),512&r&&(bl||null===n||dl(n,n.return)),64&r&&yl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Ll;if(kl(t,e),Dl(e),512&r&&(bl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Fe]||i[ke]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),ed(i,r,n),i[ke]=e,We(i),r=i;break e;case"link":var o=Fd("link","href",a).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(o=Fd("meta","content",a).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(s(468,r))}i[ke]=e,We(i),r=i}e.stateNode=r}else zd(a,e.type,e.stateNode);else e.stateNode=jd(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?zd(a,e.type,e.stateNode):jd(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:kl(t,e),Dl(e),512&r&&(bl||null===n||dl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(kl(t,e),Dl(e),512&r&&(bl||null===n||dl(n,n.return)),32&e.flags){a=e.stateNode;try{wt(a,"")}catch(m){uu(e,e.return,m)}}4&r&&null!=e.stateNode&&pl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(_l=!0);break;case 6:if(kl(t,e),Dl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){uu(e,e.return,m)}}break;case 3:if(Od=null,a=Ll,Ll=Ed(t.containerInfo),kl(t,e),Ll=a,Dl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nh(t.containerInfo)}catch(m){uu(e,e.return,m)}_l&&(_l=!1,Ul(e));break;case 4:r=Ll,Ll=Ed(e.stateNode.containerInfo),kl(t,e),Dl(e),Ll=r;break;case 12:default:kl(t,e),Dl(e);break;case 13:kl(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=yl,d=bl;if(yl=u||a,bl=d||c,kl(t,e),bl=d,yl=u,Dl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||yl||bl||Ol(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){uu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){uu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:kl(t,e),Dl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var a=n.stateNode;vl(e,fl(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(wt(i,""),n.flags&=-33),vl(e,fl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,fl(e),o);break;default:throw Error(s(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ul(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ul(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Il(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ol(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ol(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ol(t);break;case 27:_d(t.stateNode);case 26:case 5:dl(t,t.return),Ol(t);break;case 22:null===t.memoizedState&&Ol(t);break;default:Ol(t)}e=e.sibling}}function Fl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:Fl(a,i,n),sl(4,i);break;case 1:if(Fl(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var o=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)di(l[a],o)}catch(c){uu(r,r.return,c)}}n&&64&s&&ll(i),ul(i,i.return);break;case 27:xl(i);case 26:case 5:Fl(a,i,n),n&&null===r&&4&s&&hl(i),ul(i,i.return);break;case 12:Fl(a,i,n);break;case 13:Fl(a,i,n),n&&4&s&&Rl(a,i);break;case 22:null===i.memoizedState&&Fl(a,i,n),ul(i,i.return);break;case 30:break;default:Fl(a,i,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ja(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ja(e))}function Hl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Vl(e,t,n,r),t=t.sibling}function Vl(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,r),2048&a&&sl(9,t);break;case 1:case 13:default:Hl(e,t,n,r);break;case 3:Hl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ja(e)));break;case 12:if(2048&a){Hl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,o=i.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Hl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,null!==t.memoizedState?2&i._visibility?Hl(e,t,n,r):Wl(e,t):2&i._visibility?Hl(e,t,n,r):(i._visibility|=2,Gl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&a&&zl(s,t);break;case 24:Hl(e,t,n,r),2048&a&&Bl(t.alternate,t)}}function Gl(e,t,n,r,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,s=t,o=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Gl(i,s,o,l,a),sl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?Gl(i,s,o,l,a):Wl(i,s):(u._visibility|=2,Gl(i,s,o,l,a)),a&&2048&c&&zl(s.alternate,s);break;case 24:Gl(i,s,o,l,a),a&&2048&c&&Bl(s.alternate,s);break;default:Gl(i,s,o,l,a)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Wl(n,r),2048&a&&zl(r.alternate,r);break;case 24:Wl(n,r),2048&a&&Bl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var ql=8192;function Xl(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Xl(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,n){if(null===Hd)throw Error(s(475));var r=Hd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Cd(n.href),i=e.querySelector(Rd(a));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Gd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void We(i);i=e.ownerDocument||e,n=Pd(n),(a=wd.get(a))&&Ud(n,a),We(i=i.createElement("link"));var o=i;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Gd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Xl(e);break;case 3:case 4:var t=Ll;Ll=Ed(e.stateNode.containerInfo),Xl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,Xl(e),ql=t):Xl(e))}}function Kl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Ql(r,e)}Kl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,$l(e)):Jl(e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Ql(r,e)}Kl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),$l(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,$l(t));break;default:$l(t)}e=e.sibling}}function Ql(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:ja(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var a=(r=Sl).sibling,i=r.return;if(Ml(r),r===n){Sl=null;break e}if(null!==a){a.return=i,Sl=a;break e}Sl=i}}}var ec={getCacheForType:function(e){var t=Ta(ka),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ac=null,ic=0,sc=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,pc=0,mc=0,fc=0,gc=0,vc=0,xc=null,yc=null,bc=!1,_c=0,wc=1/0,Sc=null,Ec=null,Mc=0,Tc=null,Nc=null,Ac=0,Cc=0,Rc=null,Pc=null,kc=0,Lc=null;function jc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==j.T){return 0!==Ia?Ia:Cu()}return Re()}function Dc(){0===gc&&(gc=0===(536870912&ic)||ia?we():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function Uc(e,t,n){(e!==rc||2!==sc&&9!==sc)&&null===e.cancelPendingCommit||(Vc(e,0),zc(e,ic,gc,!1)),Me(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(mc|=n),4===hc&&zc(e,ic,gc,!1)),wu(e))}function Ic(e,t,n){if(0!==(6&nc))throw Error(s(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),a=r?function(e,t){var n=nc;nc|=2;var r=Wc(),a=qc();rc!==e||ic!==t?(Sc=null,wc=te()+500,Vc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==sc&&null!==ac){t=ac;var i=oc;t:switch(sc){case 1:sc=0,oc=null,Qc(e,t,i,1);break;case 2:case 9:if(Ka(i)){sc=0,oc=null,$c(t);break}t=function(){2!==sc&&9!==sc||rc!==e||(sc=7),wu(e)},i.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:Ka(i)?(sc=0,oc=null,$c(t)):(sc=0,oc=null,Qc(e,t,i,7));break;case 5:var o=null;switch(ac.tag){case 26:o=ac.memoizedState;case 5:case 27:var l=ac;if(!o||Bd(o)){sc=0,oc=null;var c=l.sibling;if(null!==c)ac=c;else{var u=l.return;null!==u?(ac=u,eu(u)):ac=null}break t}}sc=0,oc=null,Qc(e,t,i,5);break;case 6:sc=0,oc=null,Qc(e,t,i,6);break;case 8:Hc(),hc=6;break e;default:throw Error(s(462))}}Jc();break}catch(d){Gc(e,d)}return xa=va=null,j.H=r,j.A=a,nc=n,null!==ac?0:(rc=null,ic=0,Ar(),hc)}(e,t):Yc(e,t,!0),i=r;;){if(0===a){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Fc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,mc|=i,a=4;break e}i=yc,yc=a,null!==i&&(null===yc?yc=i:yc.push.apply(yc,i))}a=o}if(i=!1,2!==a)continue}}if(1===a){Vc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,i=a){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,gc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(a=_c+300-te())){if(zc(r,t,gc,!lc),0!==ye(r,0,!0))break e;r.timeoutHandle=ld(Oc.bind(null,r,n,yc,Sc,bc,t,gc,mc,vc,lc,i,2,-0,0),a)}else Oc(r,n,yc,Sc,bc,t,gc,mc,vc,lc,i,0,-0,0)}break}a=Yc(e,t,!1),i=!1}wu(e)}function Oc(e,t,n,r,a,i,o,l,c,u,d,h,p,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Hd={stylesheets:null,count:0,unsuspend:Vd},Yl(t),null!==(h=function(){if(null===Hd)throw Error(s(475));var e=Hd;return e.stylesheets&&0===e.count&&qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,a,o,l,c,d,1,p,m)),void zc(e,i,o,!u);nu(e,t,i,n,r,a,o,l,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Kn(i(),a))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~fc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-pe(a),s=1<<i;r[i]=-1,a&=~s}0!==n&&Te(e,n,t)}function Bc(){return 0!==(6&nc)||(Su(0,!1),!1)}function Hc(){if(null!==ac){if(0===sc)var e=ac.return;else xa=va=null,Ii(e=ac),Ys=null,Ks=0,e=ac;for(;null!==e;)il(e.alternate,e),e=e.return;ac=null}}function Vc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),rc=e,ac=n=Or(e.current,null),ic=t,sc=0,oc=null,lc=!1,cc=be(e,t),uc=!1,vc=gc=fc=mc=pc=hc=0,yc=xc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-pe(r),i=1<<a;t|=e[a],r&=~i}return dc=t,Ar(),n}function Gc(e,t){yi=null,j.H=Gs,t===Wa||t===Xa?(t=Qa(),sc=3):t===qa?(t=Qa(),sc=4):sc=t===To?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ac&&(hc=1,_o(e,Er(t,e.current)))}function Wc(){var e=j.H;return j.H=Gs,null===e?Gs:e}function qc(){var e=j.A;return j.A=ec,e}function Xc(){hc=4,lc||(4194048&ic)!==ic&&null!==ro.current||(cc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===rc||zc(rc,ic,gc,!1)}function Yc(e,t,n){var r=nc;nc|=2;var a=Wc(),i=qc();rc===e&&ic===t||(Sc=null,Vc(e,t)),t=!1;var s=hc;e:for(;;)try{if(0!==sc&&null!==ac){var o=ac,l=oc;switch(sc){case 8:Hc(),s=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=sc;if(sc=0,oc=null,Qc(e,o,l,c),n&&cc){s=0;break e}break;default:c=sc,sc=0,oc=null,Qc(e,o,l,c)}}Kc(),s=hc;break}catch(u){Gc(e,u)}return t&&e.shellSuspendCounter++,xa=va=null,nc=r,j.H=a,j.A=i,null===ac&&(rc=null,ic=0,Ar()),s}function Kc(){for(;null!==ac;)Zc(ac)}function Jc(){for(;null!==ac&&!Q();)Zc(ac)}function Zc(e){var t=Zo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ac=t}function $c(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Uo(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Uo(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Ii(t);default:il(n,t),t=Zo(n,t=ac=Fr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ac=t}function Qc(e,t,n,r){xa=va=null,Ii(t),Ys=null,Ks=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Sa(t,n,a,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===ao?Xc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ya?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,a)),!1;case 22:return n.flags|=65536,r===Ya?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,a)),!1}throw Error(s(435,n.tag))}return du(e,r,a),Xc(),!1}if(ia)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==la&&fa(Er(e=Error(s(422),{cause:r}),n))):(r!==la&&fa(Er(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Er(r,n),oi(e,a=So(e.stateNode,r,a)),4!==hc&&(hc=2)),!1;var i=Error(s(520),{cause:r});if(i=Er(i,n),null===xc?xc=[i]:xc.push(i),4!==hc&&(hc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,oi(n,e=So(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ec||!Ec.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Mo(a=Eo(a),e,n,r),oi(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,ic))return hc=1,_o(e,Er(n,e.current)),void(ac=null)}catch(i){if(null!==a)throw ac=a,i;return hc=1,_o(e,Er(n,e.current)),void(ac=null)}32768&t.flags?(ia||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ac=n);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=al(e.alternate,e);if(null!==n)return n.flags&=32767,void(ac=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=n}while(null!==e);hc=6,ac=null}function nu(e,t,n,r,a,i,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==Mc);if(0!==(6&nc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-pe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,n,i|=Nr,o,l,c),e===rc&&(ac=rc=null,ic=0),Nc=t,Tc=e,Ac=n,Cc=i,Rc=a,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(ie,(function(){return lu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=j.T,j.T=null,a=D.p,D.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===a&&(l=o),p===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(i=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var f=go(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nc=o,D.p=a,j.T=r}}Mc=1,ru(),au(),iu()}}function ru(){if(1===Mc){Mc=0;var e=Tc,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=j.T,j.T=null;var r=D.p;D.p=2;var a=nc;nc|=4;try{jl(t,e);var i=nd,s=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&Qn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=o.textContent.length,f=Math.min(l.start,m),g=void 0===l.end?f:Math.min(l.end,m);!p.extend&&f>g&&(s=g,g=f,f=s);var v=$n(o,f),x=$n(o,g);if(v&&x&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==x.node||p.focusOffset!==x.offset)){var y=d.createRange();y.setStart(v.node,v.offset),p.removeAllRanges(),f>g?(p.addRange(y),p.extend(x.node,x.offset)):(y.setEnd(x.node,x.offset),p.addRange(y))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nh=!!td,nd=td=null}finally{nc=a,D.p=r,j.T=n}}e.current=t,Mc=2}}function au(){if(2===Mc){Mc=0;var e=Tc,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=j.T,j.T=null;var r=D.p;D.p=2;var a=nc;nc|=4;try{El(e,t.alternate,t)}finally{nc=a,D.p=r,j.T=n}}Mc=3}}function iu(){if(4===Mc||3===Mc){Mc=0,ee();var e=Tc,t=Nc,n=Ac,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Mc=5:(Mc=0,Nc=Tc=null,su(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Ec=null),Ce(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=j.T,a=D.p,D.p=2,j.T=null;try{for(var i=e.onRecoverableError,s=0;s<r.length;s++){var o=r[s];i(o.value,{componentStack:o.stack})}}finally{j.T=t,D.p=a}}0!==(3&Ac)&&ou(),wu(e),a=e.pendingLanes,0!==(4194090&n)&&0!==(42&a)?e===Lc?kc++:(kc=0,Lc=e):kc=0,Su(0,!1)}}function su(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,ja(t)))}function ou(e){return ru(),au(),iu(),lu()}function lu(){if(5!==Mc)return!1;var e=Tc,t=Cc;Cc=0;var n=Ce(Ac),r=j.T,a=D.p;try{D.p=32>n?32:n,j.T=null,n=Rc,Rc=null;var i=Tc,o=Ac;if(Mc=0,Nc=Tc=null,Ac=0,0!==(6&nc))throw Error(s(331));var l=nc;if(nc|=4,Zl(i.current),Vl(i,i.current,o,n),nc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{D.p=a,j.T=r,su(e,t)}}function cu(e,t,n){t=Er(n,t),null!==(e=ii(e,t=So(e.stateNode,t,2),2))&&(Me(e,2),wu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Er(n,e),null!==(r=ii(t,n=Eo(2),2))&&(Mo(n,r,t,e),Me(r,2),wu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(uc=!0,a.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-_c?0===(2&nc)&&Vc(e,0):fc|=n,vc===ic&&(vc=0)),wu(e)}function pu(e,t){0===t&&(t=Se()),null!==(e=Pr(e,t))&&(Me(e,t),wu(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function fu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),pu(e,n)}var gu=null,vu=null,xu=!1,yu=!1,bu=!1,_u=0;function wu(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),yu=!0,xu||(xu=!0,dd((function(){0!==(6&nc)?Z(re,Eu):Mu()})))}function Su(e,t){if(!bu&&yu){bu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var s=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-pe(42|e)+1)-1,i=201326741&(i&=a&~(s&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Au(r,i))}else i=ic,0===(3&(i=ye(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,i)||(n=!0,Au(r,i));r=r.next}}while(n);bu=!1}}function Eu(){Mu()}function Mu(){yu=xu=!1;var e=0;0!==_u&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=_u),_u=0);for(var t=te(),n=null,r=gu;null!==r;){var a=r.next,i=Tu(r,t);0===i?(r.next=null,null===n?gu=a:n.next=a,null===a&&(vu=n)):(n=r,(0!==e||0!==(3&i))&&(yu=!0)),r=a}Su(e,!1)}function Tu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-pe(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=_e(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ic,n=ye(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===sc||9===sc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&$(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&$(r),Ce(n)){case 2:case 8:n=ae;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Nu.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&$(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==Mc&&5!==Mc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=ye(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ic(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function Au(e,t){if(ou())return null;Ic(e,t,!0)}function Cu(){return 0===_u&&(_u=we()),_u}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ct(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var ku=0;ku<_r.length;ku++){var Lu=_r[ku];wr(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}wr(pr,"onAnimationEnd"),wr(mr,"onAnimationIteration"),wr(fr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(gr,"onTransitionRun"),wr(vr,"onTransitionStart"),wr(xr,"onTransitionCancel"),wr(yr,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function Uu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){vo(u)}a.currentTarget=null,i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){vo(u)}a.currentTarget=null,i=l}}}}function Iu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Bu(t,e,2,!1),n.add(r))}function Ou(e,t,n){var r=0;t&&(r|=4),Bu(n,e,r,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Fu]){e[Fu]=!0,qe.forEach((function(t){"selectionchange"!==t&&(Du.has(t)||Ou(t,!1,e),Ou(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fu]||(t[Fu]=!0,Ou("selectionchange",!1,t))}}function Bu(e,t,n,r){switch(ch(t)){case 2:var a=rh;break;case 8:a=ah;break;default:a=ih}n=a.bind(null,t,n,e),a=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hu(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===a)return;s=s.return}for(;null!==o;){if(null===(s=Be(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=i=s;continue e}o=o.parentNode}}r=r.return}Ut((function(){var r=i,a=Pt(n),s=[];e:{var o=br.get(e);if(void 0!==o){var c=Qt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":u="focus",c=sn;break;case"focusout":u="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case pr:case mr:case fr:c=on;break;case yr:c=xn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=yn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==o?o+"Capture":null:o;d=[];for(var m,f=r;null!==f;){var g=f;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===p||null!=(g=It(f,p))&&d.push(Vu(f,g,m)),h)break;f=f.return}0<d.length&&(o=new c(o,u,null,n,a),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Be(u)&&!u[je])&&(c||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Be(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==c?o:Ve(c),m=null==u?o:Ve(u),(o=new d(g,f+"leave",c,n,a)).target=h,o.relatedTarget=m,g=null,Be(a)===r&&((d=new d(p,f+"enter",u,n,a)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,f=0,m=d=c;m;m=Wu(m))f++;for(m=0,g=p;g;g=Wu(g))m++;for(;0<f-m;)d=Wu(d),f--;for(;0<m-f;)p=Wu(p),m--;for(;f--;){if(d===p||null!==p&&d===p.alternate)break e;d=Wu(d),p=Wu(p)}d=null}else d=null;null!==c&&qu(s,o,c,d,!1),null!==u&&null!==h&&qu(s,h,u,d,!0)}if("select"===(c=(o=r?Ve(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=On;else if(kn(o))if(Fn)v=Yn;else{v=qn;var x=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(v=On):v=Xn;switch(v&&(v=v(e,r))?Ln(s,v,n,a):(x&&x(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&xt(o,"number",o.value)),x=r?Ve(r):window,e){case"focusin":(kn(x)||"true"===x.contentEditable)&&(rr=x,ar=r,ir=null);break;case"focusout":ir=ar=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,or(s,n,a);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(s,n,a)}var y;if(wn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rn?An(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Rn&&(y=Gt()):(Ht="value"in(Bt=a)?Bt.value:Bt.textContent,Rn=!0)),0<(x=Gu(r,b)).length&&(b=new cn(b,e,null,n,a),s.push({event:b,listeners:x}),y?b.data=y:null!==(y=Cn(n))&&(b.data=y))),(y=En?function(e,t){switch(e){case"compositionend":return Cn(t);case"keypress":return 32!==t.which?null:(Nn=!0,Tn);case"textInput":return(e=t.data)===Tn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!wn&&An(e,t)?(e=Gt(),Vt=Ht=Bt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Gu(r,"onBeforeInput")).length&&(x=new cn("onBeforeInput","beforeinput",null,n,a),s.push({event:x,listeners:b}),x.data=y)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=Ru((a[Le]||null).action),s=r.submitter;s&&null!==(t=(t=s[Le]||null)?Ru(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var o=new Qt("action","action",null,r,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==_u){var e=s?Pu(a,s):new FormData(a);Rs(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=s?Pu(a,s):new FormData(a),Rs(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(s,e,r,n,a)}Uu(s,t)}))}function Vu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gu(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=It(e,n))&&r.unshift(Vu(e,a,i)),null!=(a=It(e,t))&&r.push(Vu(e,a,i))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qu(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=It(n,i))&&s.unshift(Vu(n,c,l)):a||null!=(c=It(n,i))&&s.push(Vu(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Ku(e){return("string"===typeof e?e:""+e).replace(Xu,"\n").replace(Yu,"")}function Ju(e,t){return t=Ku(t),Ku(e)===t}function Zu(){}function $u(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Mt(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&$u(e,t,"name",a.name,a,null),$u(e,t,"formEncType",a.formEncType,a,null),$u(e,t,"formMethod",a.formMethod,a,null),$u(e,t,"formTarget",a.formTarget,a,null)):($u(e,t,"encType",a.encType,a,null),$u(e,t,"method",a.method,a,null),$u(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"onScroll":null!=r&&Iu("scroll",e);break;case"onScrollEnd":null!=r&&Iu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ct(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Iu("beforetoggle",e),Iu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Nt.get(n)||n,r)}}function Qu(e,t,n,r,a,i){switch(n){case"style":Mt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Iu("scroll",e);break;case"onScrollEnd":null!=r&&Iu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Xe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Le]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Iu("error",e),Iu("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:$u(e,t,r,o,n,null)}}return i&&$u(e,t,"srcSet",n.srcSet,n,null),void(a&&$u(e,t,"src",n.src,n,null));case"input":Iu("invalid",e);var l=r=o=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:$u(e,t,a,d,n,null)}}return vt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Iu("invalid",e),a=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:$u(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!a,void(null!=t?yt(e,!!a,t,!1):null!=n&&yt(e,!!a,n,!0));case"textarea":for(o in Iu("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:$u(e,t,o,l,n,null)}return _t(e,a,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else $u(e,t,c,a,n,null);return;case"dialog":Iu("beforetoggle",e),Iu("toggle",e),Iu("cancel",e),Iu("close",e);break;case"iframe":case"object":Iu("load",e);break;case"video":case"audio":for(a=0;a<ju.length;a++)Iu(ju[a],e);break;case"image":Iu("error",e),Iu("load",e);break;case"details":Iu("toggle",e);break;case"embed":case"source":case"link":Iu("error",e),Iu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:$u(e,t,u,a,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&Qu(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&$u(e,t,l,a,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function ad(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout((function(){throw e}))}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var s=e.ownerDocument;if(1&n&&_d(s.documentElement),2&n&&_d(s.body),4&n)for(_d(n=s.head),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}if(0===a)return e.removeChild(i),void Nh(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Nh(t)}function fd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var xd=null;function yd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function _d(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var wd=new Map,Sd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Md=D.d;D.d={f:function(){var e=Md.f(),t=Bc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?ks(t):Md.r(e)},D:function(e){Md.D(e),Nd("dns-prefetch",e,null)},C:function(e,t){Md.C(e,t),Nd("preconnect",e,t)},L:function(e,t,n){Md.L(e,t,n);var r=Td;if(r&&e&&t){var a='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+ft(n.imageSizes)+'"]')):a+='[href="'+ft(e)+'"]';var i=a;switch(t){case"style":i=Cd(e);break;case"script":i=kd(e)}wd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wd.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Rd(i))||"script"===t&&r.querySelector(Ld(i))||(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Md.m(e,t);var n=Td;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=kd(e)}if(!wd.has(i)&&(e=h({rel:"modulepreload",href:e},t),wd.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(i)))return}ed(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Md.X(e,t);var n=Td;if(n&&e){var r=Ge(n).hoistableScripts,a=kd(e),i=r.get(a);i||((i=n.querySelector(Ld(a)))||(e=h({src:e,async:!0},t),(t=wd.get(a))&&Id(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){Md.S(e,t,n);var r=Td;if(r&&e){var a=Ge(r).hoistableStyles,i=Cd(e);t=t||"default";var s=a.get(i);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(Rd(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wd.get(i))&&Ud(e,n);var l=s=r.createElement("link");We(l),ed(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Dd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},a.set(i,s)}}},M:function(e,t){Md.M(e,t);var n=Td;if(n&&e){var r=Ge(n).hoistableScripts,a=kd(e),i=r.get(a);i||((i=n.querySelector(Ld(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=wd.get(a))&&Id(e,t),We(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var Td="undefined"===typeof document?null:document;function Nd(e,t,n){var r=Td;if(r&&"string"===typeof t&&t){var a=ft(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Sd.has(a)||(Sd.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ed(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Ad(e,t,n,r){var a,i,o,l,c=(c=G.current)?Ed(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Cd(n.href),(r=(n=Ge(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Cd(n.href);var u=Ge(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),wd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wd.set(e,n),u||(a=c,i=e,o=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),ed(i,"link",o),We(i),a.head.appendChild(i))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=kd(n),(r=(n=Ge(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Cd(e){return'href="'+ft(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function kd(e){return'[src="'+ft(e)+'"]'}function Ld(e){return"script[async]"+e}function jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,We(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",a),Dd(r,n.precedence,e),t.instance=r;case"stylesheet":a=Cd(n.href);var i=e.querySelector(Rd(a));if(i)return t.state.loading|=4,t.instance=i,We(i),i;r=Pd(n),(a=wd.get(a))&&Ud(r,a),We(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),ed(i,"link",r),t.state.loading|=4,Dd(i,n.precedence,e),t.instance=i;case"script":return i=kd(n.src),(a=e.querySelector(Ld(i)))?(t.instance=a,We(a),a):(r=n,(a=wd.get(i))&&Id(r=h({},n),a),We(a=(e=e.ownerDocument||e).createElement("script")),ed(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Dd(r,n.precedence,e));return t.instance}function Dd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)i=o;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Id(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Od=null;function Fd(e,t,n){if(null===Od){var r=new Map,a=Od=new Map;a.set(n,r)}else(r=(a=Od).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Fe]||i[ke]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var o=r.get(s);o?o.push(i):r.set(s,[i])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hd=null;function Vd(){}function Gd(){if(this.count--,0===this.count)if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Xd,e),Wd=null,Gd.call(e))}function Xd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(a=t.instance).getAttribute("data-precedence"),(i=n.get(s)||r)===r&&n.set(null,a),n.set(s,a),this.count++,r=Gd.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:_,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Kd(e,t,n,r,a,i,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jd(e,t,n,r,a,i,s,o,l,c,u,d){return e=new Kd(e,t,n,s,o,l,c,d),t=1,!0===i&&(t|=24),i=Ur(3,null,null,t),e.current=i,i.stateNode=e,(t=La()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Zd(e){return e?e=jr:jr}function $d(e,t,n,r,a,i){a=Zd(a),null===r.context?r.context=a:r.pendingContext=a,(r=ai(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Uc(n,0,t),si(n,e,t))}function Qd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Qd(e,t),(e=e.alternate)&&Qd(e,t)}function th(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Uc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var a=j.T;j.T=null;var i=D.p;try{D.p=2,ih(e,t,n,r)}finally{D.p=i,j.T=a}}function ah(e,t,n,r){var a=j.T;j.T=null;var i=D.p;try{D.p=8,ih(e,t,n,r)}finally{D.p=i,j.T=a}}function ih(e,t,n,r){if(nh){var a=sh(r);if(null===a)Hu(e,t,r,oh,n),xh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return dh=yh(dh,e,t,n,r,a),!0;case"dragenter":return hh=yh(hh,e,t,n,r,a),!0;case"mouseover":return ph=yh(ph,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return mh.set(i,yh(mh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,fh.set(i,yh(fh.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(xh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==a;){var i=He(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=xe(i.pendingLanes);if(0!==s){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-pe(s);o.entanglements[1]|=l,s&=~l}wu(i),0===(6&nc)&&(wc=te()+500,Su(0,!1))}}break;case 13:null!==(o=Pr(i,2))&&Uc(o,0,2),Bc(),eh(i,2)}if(null===(i=sh(r))&&Hu(e,t,r,oh,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hu(e,t,r,null,n)}}function sh(e){return lh(e=Pt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=Be(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ae:return 8;case ie:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,ph=null,mh=new Map,fh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function yh(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=He(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function bh(e){var t=Be(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,(function(){if(13===n.tag){var e=jc();e=Ae(e);var t=Pr(n,e);null!==t&&Uc(t,0,e),eh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _h(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sh(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function wh(e,t,n){_h(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&_h(dh)&&(dh=null),null!==hh&&_h(hh)&&(hh=null),null!==ph&&_h(ph)&&(ph=null),mh.forEach(wh),fh.forEach(wh)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var Mh=null;function Th(e){Mh!==e&&(Mh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Mh===e&&(Mh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=He(n);null!==i&&(e.splice(t,3),t-=3,Rs(i,{pending:!0,data:a,method:n.method,action:r},r,a))}})))}function Nh(e){function t(t){return Eh(t,e)}null!==dh&&Eh(dh,e),null!==hh&&Eh(hh,e),null!==ph&&Eh(ph,e),mh.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)bh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],s=a[Le]||null;if("function"===typeof i)s||Th(n);else if(s){var o=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[Le]||null)o=s.formAction;else if(null!==lh(a))continue}else o=s.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Th(n)}}}function Ah(e){this._internalRoot=e}function Ch(e){this._internalRoot=e}Ch.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$d(t.current,jc(),e,t,null,null)},Ch.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$d(e.current,2,null,e,null,null),Bc(),t[je]=null}},Ch.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&bh(e)}};var Rh=a.version;if("19.1.0"!==Rh)throw Error(s(527,Rh,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return u(a),e;if(i===r)return u(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{ue=kh.inject(Ph),de=kh}catch(jh){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,r="",a=xo,i=yo,l=bo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,r,a,i,l,0,null),e[je]=t.current,zu(e),new Ah(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var r=!1,a="",i=xo,l=yo,c=bo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,r,a,i,l,c,0,u)).context=Zd(null),n=t.current,(a=ai(r=Ae(r=jc()))).callback=null,ii(n,a,r),n=r,t.current.lanes=n,Me(t,n),wu(t),e[je]=t.current,zu(e),new Ch(t)},t.version="19.1.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,a){for(var i,s,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in i=Object(arguments[l]))n.call(i,c)&&(o[c]=i[c]);if(t){s=t(i);for(var u=0;u<s.length;u++)r.call(i,s[u])&&(o[s[u]]=i[s[u]])}}return o}},173:(e,t,n)=>{e.exports=n(497)()},175:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,f(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,a,i,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(){}function C(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return C((u=e._init)(e._payload),t,a,i,s)}}if(u)return s=s(e),u=""===i?"."+N(e,0):i,_(s)?(a="",null!=u&&(a=u.replace(T,"$&/")+"/"),C(s,t,a,"",(function(e){return e}))):null!=s&&(M(s)&&(l=s,c=a+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+u,s=E(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,m=""===i?".":i+":";if(_(e))for(var f=0;f<e.length;f++)u+=C(i=e[f],t,a,o=m+N(i,f),s);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(i=e.next()).done;)u+=C(i=i.value,t,a,o=m+N(i,f++),s);else if("object"===o){if("function"===typeof e.then)return C(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=s,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var s=Array(i),o=0;o<i;o++)s[o]=arguments[o+2];r.children=s}return E(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return E(e,i,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),a=w.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(L,k)}catch(i){k(i)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=w.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.0"},332:(e,t,n)=>{"use strict";var r,a=n(43),i=(r=a)&&"object"===typeof r&&"default"in r?r.default:r;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!==typeof r)throw new Error("Expected WrappedComponent to be a React component.");var l,c=[];function u(){l=e(c.map((function(e){return e.props}))),d.canUseDOM?t(l):n&&(l=n(l))}var d=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.peek=function(){return l},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,c=[],e};var s=a.prototype;return s.UNSAFE_componentWillMount=function(){c.push(this),u()},s.componentDidUpdate=function(){u()},s.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),u()},s.render=function(){return i.createElement(r,this.props)},a}(a.PureComponent);return s(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),s(d,"canUseDOM",o),d}}},366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,a="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var o,l,c,u;if(Array.isArray(e)){if((o=e.length)!=s.length)return!1;for(l=o;0!==l--;)if(!i(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!i(l.value[1],s.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((o=e.length)!=s.length)return!1;for(l=o;0!==l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!i(e[c[l]],s[c[l]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return i(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},497:(e,t,n)=>{"use strict";var r=n(218);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,_(e),!f)if(null!==r(c))f=!0,E||(E=!0,S());else{var t=r(u);null!==t&&k(w,t.startTime-e)}}var S,E=!1,M=-1,T=5,N=-1;function A(){return!!v||!(t.unstable_now()-N<T)}function C(){if(v=!1,E){var e=t.unstable_now();N=e;var n=!0;try{e:{f=!1,g&&(g=!1,y(M),M=-1),m=!0;var i=p;try{t:{for(_(e),h=r(c);null!==h&&!(h.expirationTime>e&&A());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,_(e),n=!0;break t}h===r(c)&&a(c),_(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&k(w,l.startTime-e),n=!1}}break e}finally{h=null,p=i,m=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof b)S=function(){b(C)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=C,S=function(){P.postMessage(null)}}else S=function(){x(C,0)};function k(e,n){M=x((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(M),M=-1):g=!0,k(w,i-s))):(e.sortIndex=o,n(c,e),f||m||(f=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".ca7ef2ab.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="create-automation-report:";n.l=(r,a,i,s)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[a];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var s=n.p+n.u(t),o=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,i,s=r[0],o=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkcreate_automation_report=self.webpackChunkcreate_automation_report||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>An,hasStandardBrowserEnv:()=>Rn,hasStandardBrowserWebWorkerEnv:()=>Pn,navigator:()=>Cn,origin:()=>kn});var t=n(43),r=n(391);function a(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(175);const u=["sri"],d=["page"],h=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],f=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function v(){return E((function(e,t){let{pathname:n="/",search:r="",hash:a=""}=S(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),_("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:w(t))}),(function(e,t){y("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function x(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function E(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,o="POP",l=null,u=d();function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:o,location:m.location,delta:t})}function p(e){return M(e)}null==u&&(u=0,s.replaceState(c(c({},s.state),{},{idx:u}),""));let m={get action(){return o},get location(){return e(a,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(g,h),l=e,()=>{a.removeEventListener(g,h),l=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=_(m.location,e,t);n&&n(r,e),u=d()+1;let c=b(r,u),h=m.createHref(r);try{s.pushState(c,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(h)}i&&l&&l({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=_(m.location,e,t);n&&n(r,e),u=d();let a=b(r,u),c=m.createHref(r);s.replaceState(a,"",c),i&&l&&l({action:o,location:m.location,delta:0})},go:e=>s.go(e)};return m}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),x(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:w(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function T(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let a=H(("string"===typeof t?S(t):t).pathname||"/",n);if(null==a)return null;let i=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=B(a);s=O(i[o],e,r)}return s}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=(e,a,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(x(s.relativePath.startsWith(r),'Absolute route path "'.concat(s.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),s.relativePath=s.relativePath.slice(r.length));let o=X([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(x(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),A(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of C(e.path))a(e,t,r);else a(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let s=C(r.join("/")),o=[];return o.push(...s.map((e=>""===e?i:[i,e].join("/")))),a&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var R=/^:[\w-]+$/,P=3,k=2,L=1,j=10,D=-2,U=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(U)&&(r+=D),t&&(r+=k),n.filter((e=>!U(e))).reduce(((e,t)=>e+(R.test(t)?P:""===t?L:j)),r)}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},i="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),s.push({params:a,pathname:X([i,u.pathname]),pathnameBase:Y(X([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=X([i,u.pathnameBase]))}return s}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=z(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:s,pattern:e}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function B(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function V(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function W(e){let t=G(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function q(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=S(e):(r=c({},e),x(!r.pathname||!r.pathname.includes("?"),V("?","pathname","search",r)),x(!r.pathname||!r.pathname.includes("#"),V("#","pathname","hash",r)),x(!r.search||!r.search.includes("#"),V("#","search","hash",r)));let i,s=""===e||""===r.pathname,o=s?"/":r.pathname;if(null==o)i=n;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:a=""}="string"===typeof e?S(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:K(r),hash:J(a)}}(r,i),u=o&&"/"!==o&&o.endsWith("/"),d=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var X=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var $=["POST","PUT","PATCH","DELETE"],Q=(new Set($),["GET",...$]);new Set(Q),Symbol("ResetLoaderData");var ee=t.createContext(null);ee.displayName="DataRouter";var te=t.createContext(null);te.displayName="DataRouterState";var ne=t.createContext({isTransitioning:!1});ne.displayName="ViewTransition";var re=t.createContext(new Map);re.displayName="Fetchers";var ae=t.createContext(null);ae.displayName="Await";var ie=t.createContext(null);ie.displayName="Navigation";var se=t.createContext(null);se.displayName="Location";var oe=t.createContext({outlet:null,matches:[],isDataRoute:!1});oe.displayName="Route";var le=t.createContext(null);le.displayName="RouteError";function ce(){return null!=t.useContext(se)}function ue(){return x(ce(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(se).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function he(e){t.useContext(ie).static||t.useLayoutEffect(e)}function pe(){let{isDataRoute:e}=t.useContext(oe);return e?function(){let{router:e}=Se("useNavigate"),n=Me("useNavigate"),r=t.useRef(!1);he((()=>{r.current=!0}));let a=t.useCallback((async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(r.current,de),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:n},a)))}),[e,n]);return a}():function(){x(ce(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ee),{basename:n,navigator:r}=t.useContext(ie),{matches:a}=t.useContext(oe),{pathname:i}=ue(),s=JSON.stringify(W(a)),o=t.useRef(!1);he((()=>{o.current=!0}));let l=t.useCallback((function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(o.current,de),!o.current)return;if("number"===typeof t)return void r.go(t);let l=q(t,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:X([n,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)}),[n,r,s,i,e]);return l}()}t.createContext(null);function me(){let{matches:e}=t.useContext(oe),n=e[e.length-1];return n?n.params:{}}function fe(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(oe),{pathname:a}=ue(),i=JSON.stringify(W(r));return t.useMemo((()=>q(e,JSON.parse(i),a,"path"===n)),[e,i,a,n])}function ge(e,n,r,a){x(ce(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=t.useContext(ie),{matches:o}=t.useContext(oe),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Ae(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,f=ue();if(n){var g;let e="string"===typeof n?S(n):n;x("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=f;let v=m.pathname||"/",b=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=!s&&r&&r.matches&&r.matches.length>0?r.matches:T(e,{pathname:b});y(p||null!=_,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),y(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=_e(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:X([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:X([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,a);return n&&w?t.createElement(se.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},w):w}function ve(){let e=Te(),n=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:s},"ErrorBoundary")," or"," ",t.createElement("code",{style:s},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,o)}var xe=t.createElement(ve,null),ye=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(oe.Provider,{value:this.props.routeContext},t.createElement(le.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function be(e){let{routeContext:n,match:r,children:a}=e,i=t.useContext(ee);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(oe.Provider,{value:n},a)}function _e(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let a=e,i=null===r||void 0===r?void 0:r.errors;if(null!=i){let e=a.findIndex((e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id])));x(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,o=-1;if(r)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){s=!0,a=o>=0?a.slice(0,o+1):[a[0]];break}}}return a.reduceRight(((e,l,c)=>{let u,d=!1,h=null,p=null;r&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||xe,s&&(o<0&&0===c?(Ae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,c+1)),f=()=>{let n;return n=u?h:d?p:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(be,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(ye,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()}),null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Se(e){let n=t.useContext(ee);return x(n,we(e)),n}function Ee(e){let n=t.useContext(te);return x(n,we(e)),n}function Me(e){let n=function(e){let n=t.useContext(oe);return x(n,we(e)),n}(e),r=n.matches[n.matches.length-1];return x(r.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),r.route.id}function Te(){var e;let n=t.useContext(le),r=Ee("useRouteError"),a=Me("useRouteError");return void 0!==n?n:null===(e=r.errors)||void 0===e?void 0:e[a]}var Ne={};function Ae(e,t,n){t||Ne[e]||(Ne[e]=!0,y(!1,n))}t.memo((function(e){let{routes:t,future:n,state:r}=e;return ge(t,void 0,r,n)}));function Ce(e){let{to:n,replace:r,state:a,relative:i}=e;x(ce(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=t.useContext(ie);y(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(oe),{pathname:l}=ue(),c=pe(),u=q(n,W(o),l,"path"===i),d=JSON.stringify(u);return t.useEffect((()=>{c(JSON.parse(d),{replace:r,state:a,relative:i})}),[c,d,i,r,a]),null}function Re(e){x(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pe(e){let{basename:n="/",children:r=null,location:a,navigationType:i="POP",navigator:s,static:o=!1}=e;x(!ce(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo((()=>({basename:l,navigator:s,static:o,future:{}})),[l,s,o]);"string"===typeof a&&(a=S(a));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=a,f=t.useMemo((()=>{let e=H(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:m},navigationType:i}}),[l,u,d,h,p,m,i]);return y(null!=f,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==f?null:t.createElement(ie.Provider,{value:c},t.createElement(se.Provider,{children:r,value:f}))}function ke(e){let{children:t,location:n}=e;return ge(Le(t),n)}t.Component;function Le(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,((e,a)=>{if(!t.isValidElement(e))return;let i=[...n,a];if(e.type===t.Fragment)return void r.push.apply(r,Le(e.props.children,i));x(e.type===Re,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),x(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Le(e.props.children,i)),r.push(s)})),r}var je="get",De="application/x-www-form-urlencoded";function Ue(e){return null!=e&&"string"===typeof e.tagName}var Ie=null;var Oe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return null==e||Oe.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(De,'"')),null)}function ze(e,t){let n,r,a,i,s;if(Ue(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?H(s,t):null,n=e.getAttribute("method")||je,a=Fe(e.getAttribute("enctype"))||De,i=new FormData(e)}else if(function(e){return Ue(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ue(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(r=o?H(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||je,a=Fe(e.getAttribute("formenctype"))||Fe(s.getAttribute("enctype"))||De,i=new FormData(s,e),!function(){if(null===Ie)try{new FormData(document.createElement("form"),0),Ie=!1}catch(e){Ie=!0}return Ie}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(Ue(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=je,r=null,a=De,s=e}var o;return i&&"text/plain"===a&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:s}}function Be(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function He(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Ve(e){return null!=e&&"string"===typeof e.page}function Ge(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,n,r,a,i){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>s(e,t)||o(e,t))):"data"===i?t.filter(((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a})).flat(1),[...new Set(r)];var r}function Xe(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,a)=>{if(t&&!Ve(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(i)||(n.add(i),e.push({key:i,link:a})),e}),[])}function Ye(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Ke=new Set([100,101,204,205]);function Je(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===H(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}t.Component;function Ze(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let a,i=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(n))return t.createElement($e,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),i);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement($e,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),i)}function $e(e){var n;let{title:r,renderScripts:a,isOutsideRemixApp:i,children:s}=e,{routeModules:o}=rt();return null!==o.root&&void 0!==n&&n.Layout&&!i?s:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,a?t.createElement(ut,null):null)))}function Qe(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=t.useContext(ee);return Be(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=t.useContext(te);return Be(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=t.createContext(void 0);function rt(){let e=t.useContext(nt);return Be(e,"You must render this element inside a <HydratedRouter> element"),e}function at(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function it(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function st(e){let{page:n}=e,r=a(e,d),{router:i}=et(),s=t.useMemo((()=>T(i.routes,n,i.basename)),[i.routes,n,i.basename]);return s?t.createElement(lt,c({page:n,matches:s},r)):null}function ot(e){let{manifest:n,routeModules:r}=rt(),[a,i]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,n){return Xe((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await He(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(Ge).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"}))))}(e,n,r).then((e=>{t||i(e)})),()=>{t=!0}}),[e,n,r]),a}function lt(e){let{page:n,matches:r}=e,i=a(e,h),s=ue(),{manifest:o,routeModules:l}=rt(),{basename:u}=et(),{loaderData:d,matches:p}=tt(),m=t.useMemo((()=>We(n,r,p,o,s,"data")),[n,r,p,o,s]),f=t.useMemo((()=>We(n,r,p,o,s,"assets")),[n,r,p,o,s]),g=t.useMemo((()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(r.forEach((n=>{var r;let a=o.routes[n.route.id];a&&a.hasLoader&&(!m.some((e=>e.route.id===n.route.id))&&n.route.id in d&&null!==(r=l[n.route.id])&&void 0!==r&&r.shouldRevalidate||a.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let a=Je(n,u);return t&&e.size>0&&a.searchParams.set("_routes",r.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[a.pathname+a.search]}),[u,d,s,o,m,r,n,l]),v=t.useMemo((()=>qe(f,o)),[f,o]),x=ot(f);return t.createElement(t.Fragment,null,g.map((e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},i)))),v.map((e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},i)))),x.map((e=>{let{key:n,link:r}=e;return t.createElement("link",c({key:n},r))})))}nt.displayName="FrameworkContext";var ct=!1;function ut(e){let{manifest:n,serverHandoffString:r,isSpaMode:i,renderMeta:s,routeDiscovery:o,ssr:l}=rt(),{router:d,static:h,staticContext:p}=et(),{matches:m}=tt(),f=Qe(o,l);s&&(s.didRenderScripts=!0);let g=it(m,null,i);t.useEffect((()=>{0}),[]);let v=t.useMemo((()=>{var i;let s=p?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(g.map(((e,t)=>{let r="route".concat(t),a=n.routes[e.route.id];Be(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(r," = {").concat(u.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=a(e,u),i=new Set(t.state.matches.map((e=>e.route.id))),s=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push("/".concat(s.join("/"))),s.pop();o.forEach((e=>{let n=T(t.routes,e,t.basename);n&&n.forEach((e=>i.add(e.route.id)))}));let l=[...i].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(s),type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(o),type:"module",async:!0})))}),[]),x=ct?[]:(n.entry.imports.concat(qe(g,n,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let b="object"===typeof n.sri?n.sri:{};return ct?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,f?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:b[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:b[n.entry.module],suppressHydrationWarning:!0}),x.map((n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:b[n],suppressHydrationWarning:!0}))),v)}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.6.0")}catch(Ug){}function pt(e){let{basename:n,children:r,window:a}=e,i=t.useRef();null==i.current&&(i.current=v({window:a,v5Compat:!0}));let s=i.current,[o,l]=t.useState({action:s.action,location:s.location}),c=t.useCallback((e=>{t.startTransition((()=>l(e)))}),[l]);return t.useLayoutEffect((()=>s.listen(c)),[s,c]),t.createElement(Pe,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:s})}var mt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=t.forwardRef((function(e,n){let r,{onClick:i,discover:s="render",prefetch:o="none",relative:l,reloadDocument:u,replace:d,state:h,target:m,to:f,preventScrollReset:g,viewTransition:v}=e,b=a(e,p),{basename:_}=t.useContext(ie),S="string"===typeof f&&mt.test(f),E=!1;if("string"===typeof f&&S&&(r=f,ht))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=H(t.pathname,_);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:E=!0}catch(Ug){y(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let M=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(ce(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=t.useContext(ie),{hash:i,pathname:s,search:o}=fe(e,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:X([r,s])),a.createHref({pathname:l,search:o,hash:i})}(f,{relative:l}),[T,N,A]=function(e,n){let r=t.useContext(nt),[a,i]=t.useState(!1),[s,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,p=t.useRef(null);t.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(a){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[a]);let m=()=>{i(!0)},f=()=>{i(!1),o(!1)};return r?"intent"!==e?[s,p,{}]:[s,p,{onFocus:at(l,m),onBlur:at(c,f),onMouseEnter:at(u,m),onMouseLeave:at(d,f),onTouchStart:at(h,m)}]:[!1,p,{}]}(o,b),C=function(e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=pe(),c=ue(),u=fe(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:w(c)===w(u);l(e,{replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o})}}),[c,l,u,r,a,n,e,i,s,o])}(f,{replace:d,state:h,target:m,preventScrollReset:g,relative:l,viewTransition:v});let R=t.createElement("a",c(c(c({},b),A),{},{href:r||M,onClick:E||u?i:function(e){i&&i(e),e.defaultPrevented||C(e)},ref:dt(n,N),target:m,"data-discover":S||"render"!==s?void 0:"true"}));return T&&!S?t.createElement(t.Fragment,null,R,t.createElement(st,{page:M})):R}));ft.displayName="Link";var gt=t.forwardRef((function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:d,children:h}=e,p=a(e,m),f=fe(u,{relative:p.relative}),g=ue(),v=t.useContext(te),{navigator:y,basename:b}=t.useContext(ie),_=null!=v&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(ne);x(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=yt("useViewTransitionState"),i=fe(e,{relative:n.relative});if(!r.isTransitioning)return!1;let s=H(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=H(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=F(i.pathname,o)||null!=F(i.pathname,s)}(f)&&!0===d,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=g.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(S=S.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&b&&(E=H(E,b)||E);const M="/"!==w&&w.endsWith("/")?w.length-1:w.length;let T,N=S===w||!o&&S.startsWith(w)&&"/"===S.charAt(M),A=null!=E&&(E===w||!o&&E.startsWith(w)&&"/"===E.charAt(w.length)),C={isActive:N,isPending:A,isTransitioning:_},R=N?r:void 0;T="function"===typeof s?s(C):[s,N?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(C):l;return t.createElement(ft,c(c({},p),{},{"aria-current":R,className:T,ref:n,style:P,to:u,viewTransition:d}),"function"===typeof h?h(C):h)}));gt.displayName="NavLink";var vt=t.forwardRef(((e,n)=>{let{discover:r="render",fetcherKey:i,navigate:s,reloadDocument:o,replace:l,state:u,method:d=je,action:h,onSubmit:p,relative:m,preventScrollReset:g,viewTransition:v}=e,y=a(e,f),b=wt(),_=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(ie),a=t.useContext(oe);x(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s=c({},fe(e||".",{relative:n})),o=ue();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(s.pathname="/"===s.pathname?r:X([r,s.pathname]));return w(s)}(h,{relative:m}),S="get"===d.toLowerCase()?"get":"post",E="string"===typeof h&&mt.test(h);return t.createElement("form",c(c({ref:n,method:S,action:_,onSubmit:o?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:l,state:u,relative:m,preventScrollReset:g,viewTransition:v})}},y),{},{"data-discover":E||"render"!==r?void 0:"true"}))}));function xt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let n=t.useContext(ee);return x(n,xt(e)),n}vt.displayName="Form";var bt=0,_t=()=>"__".concat(String(++bt),"__");function wt(){let{router:e}=yt("useSubmit"),{basename:n}=t.useContext(ie),r=Me("useRouteId");return t.useCallback((async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:s,encType:o,formData:l,body:c}=ze(t,n);if(!1===a.navigate){let t=a.fetcherKey||_t();await e.fetch(t,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||s,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||s,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,n,r])}function St(e,t){return function(){return e.apply(t,arguments)}}const{toString:Et}=Object.prototype,{getPrototypeOf:Mt}=Object,{iterator:Tt,toStringTag:Nt}=Symbol,At=(Ct=Object.create(null),e=>{const t=Et.call(e);return Ct[t]||(Ct[t]=t.slice(8,-1).toLowerCase())});var Ct;const Rt=e=>(e=e.toLowerCase(),t=>At(t)===e),Pt=e=>t=>typeof t===e,{isArray:kt}=Array,Lt=Pt("undefined");const jt=Rt("ArrayBuffer");const Dt=Pt("string"),Ut=Pt("function"),It=Pt("number"),Ot=e=>null!==e&&"object"===typeof e,Ft=e=>{if("object"!==At(e))return!1;const t=Mt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Nt in e)&&!(Tt in e)},zt=Rt("Date"),Bt=Rt("File"),Ht=Rt("Blob"),Vt=Rt("FileList"),Gt=Rt("URLSearchParams"),[Wt,qt,Xt,Yt]=["ReadableStream","Request","Response","Headers"].map(Rt);function Kt(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),kt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let s;for(n=0;n<i;n++)s=r[n],t.call(null,e[s],s,e)}}function Jt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const Zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,$t=e=>!Lt(e)&&e!==Zt;const Qt=(en="undefined"!==typeof Uint8Array&&Mt(Uint8Array),e=>en&&e instanceof en);var en;const tn=Rt("HTMLFormElement"),nn=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),rn=Rt("RegExp"),an=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Kt(n,((n,a)=>{let i;!1!==(i=t(n,a,e))&&(r[a]=i||n)})),Object.defineProperties(e,r)};const sn=Rt("AsyncFunction"),on=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],Zt.addEventListener("message",(e=>{let{source:t,data:a}=e;t===Zt&&a===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),Zt.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Ut(Zt.postMessage)),ln="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Zt):"undefined"!==typeof process&&process.nextTick||on,cn={isArray:kt,isArrayBuffer:jt,isBuffer:function(e){return null!==e&&!Lt(e)&&null!==e.constructor&&!Lt(e.constructor)&&Ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ut(e.append)&&("formdata"===(t=At(e))||"object"===t&&Ut(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&jt(e.buffer),t},isString:Dt,isNumber:It,isBoolean:e=>!0===e||!1===e,isObject:Ot,isPlainObject:Ft,isReadableStream:Wt,isRequest:qt,isResponse:Xt,isHeaders:Yt,isUndefined:Lt,isDate:zt,isFile:Bt,isBlob:Ht,isRegExp:rn,isFunction:Ut,isStream:e=>Ot(e)&&Ut(e.pipe),isURLSearchParams:Gt,isTypedArray:Qt,isFileList:Vt,forEach:Kt,merge:function e(){const{caseless:t}=$t(this)&&this||{},n={},r=(r,a)=>{const i=t&&Jt(n,a)||a;Ft(n[i])&&Ft(r)?n[i]=e(n[i],r):Ft(r)?n[i]=e({},r):kt(r)?n[i]=r.slice():n[i]=r};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Kt(arguments[a],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Kt(t,((t,r)=>{n&&Ut(t)?e[r]=St(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,i,s;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)s=a[i],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&Mt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:At,kindOfTest:Rt,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(kt(e))return e;let t=e.length;if(!It(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Tt]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:tn,hasOwnProperty:nn,hasOwnProp:nn,reduceDescriptors:an,freezeMethods:e=>{an(e,((t,n)=>{if(Ut(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Ut(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return kt(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Jt,global:Zt,isContextDefined:$t,isSpecCompliantForm:function(e){return!!(e&&Ut(e.append)&&"FormData"===e[Nt]&&e[Tt])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ot(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const a=kt(e)?[]:{};return Kt(e,((e,t)=>{const i=n(e,r+1);!Lt(i)&&(a[t]=i)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:sn,isThenable:e=>e&&(Ot(e)||Ut(e))&&Ut(e.then)&&Ut(e.catch),setImmediate:on,asap:ln,isIterable:e=>null!=e&&Ut(e[Tt])};function un(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}cn.inherits(un,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:cn.toJSONObject(this.config),code:this.code,status:this.status}}});const dn=un.prototype,hn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{hn[e]={value:e}})),Object.defineProperties(un,hn),Object.defineProperty(dn,"isAxiosError",{value:!0}),un.from=(e,t,n,r,a,i)=>{const s=Object.create(dn);return cn.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),un.call(s,e.message,t,n,r,a),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const pn=un;function mn(e){return cn.isPlainObject(e)||cn.isArray(e)}function fn(e){return cn.endsWith(e,"[]")?e.slice(0,-2):e}function gn(e,t,n){return e?e.concat(t).map((function(e,t){return e=fn(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const vn=cn.toFlatObject(cn,{},null,(function(e){return/^is[A-Z]/.test(e)}));const xn=function(e,t,n){if(!cn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=cn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!cn.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,i=n.dots,s=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&cn.isSpecCompliantForm(t);if(!cn.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(cn.isDate(e))return e.toISOString();if(!o&&cn.isBlob(e))throw new pn("Blob is not supported. Use a Buffer instead.");return cn.isArrayBuffer(e)||cn.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"===typeof e)if(cn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(cn.isArray(e)&&function(e){return cn.isArray(e)&&!e.some(mn)}(e)||(cn.isFileList(e)||cn.endsWith(n,"[]"))&&(o=cn.toArray(e)))return n=fn(n),o.forEach((function(e,r){!cn.isUndefined(e)&&null!==e&&t.append(!0===s?gn([n],r,i):null===s?n:n+"[]",l(e))})),!1;return!!mn(e)||(t.append(gn(a,n,i),l(e)),!1)}const u=[],d=Object.assign(vn,{defaultVisitor:c,convertValue:l,isVisitable:mn});if(!cn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!cn.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),cn.forEach(n,(function(n,i){!0===(!(cn.isUndefined(n)||null===n)&&a.call(t,n,cn.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t};function yn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function bn(e,t){this._pairs=[],e&&xn(e,this,t)}const _n=bn.prototype;_n.append=function(e,t){this._pairs.push([e,t])},_n.toString=function(e){const t=e?function(t){return e.call(this,t,yn)}:yn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const wn=bn;function Sn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function En(e,t,n){if(!t)return e;const r=n&&n.encode||Sn;cn.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let i;if(i=a?a(t,n):cn.isURLSearchParams(t)?t.toString():new wn(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Mn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){cn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Tn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:wn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},An="undefined"!==typeof window&&"undefined"!==typeof document,Cn="object"===typeof navigator&&navigator||void 0,Rn=An&&(!Cn||["ReactNative","NativeScript","NS"].indexOf(Cn.product)<0),Pn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,kn=An&&window.location.href||"http://localhost",Ln=c(c({},e),Nn);const jn=function(e){function t(e,n,r,a){let i=e[a++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),o=a>=e.length;if(i=!i&&cn.isArray(r)?r.length:i,o)return cn.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&cn.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],a)&&cn.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let i;for(r=0;r<a;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(cn.isFormData(e)&&cn.isFunction(e.entries)){const n={};return cn.forEachEntry(e,((e,r)=>{t(function(e){return cn.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Dn={transitional:Tn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=cn.isObject(e);a&&cn.isHTMLForm(e)&&(e=new FormData(e));if(cn.isFormData(e))return r?JSON.stringify(jn(e)):e;if(cn.isArrayBuffer(e)||cn.isBuffer(e)||cn.isStream(e)||cn.isFile(e)||cn.isBlob(e)||cn.isReadableStream(e))return e;if(cn.isArrayBufferView(e))return e.buffer;if(cn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return xn(e,new Ln.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Ln.isNode&&cn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=cn.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return xn(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(cn.isString(e))try{return(t||JSON.parse)(e),cn.trim(e)}catch(Ug){if("SyntaxError"!==Ug.name)throw Ug}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Dn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(cn.isResponse(e)||cn.isReadableStream(e))return e;if(e&&cn.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Ug){if(n){if("SyntaxError"===Ug.name)throw pn.from(Ug,pn.ERR_BAD_RESPONSE,this,null,this.response);throw Ug}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ln.classes.FormData,Blob:Ln.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};cn.forEach(["delete","get","head","post","put","patch"],(e=>{Dn.headers[e]={}}));const Un=Dn,In=cn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),On=Symbol("internals");function Fn(e){return e&&String(e).trim().toLowerCase()}function zn(e){return!1===e||null==e?e:cn.isArray(e)?e.map(zn):String(e)}function Bn(e,t,n,r,a){return cn.isFunction(r)?r.call(this,t,n):(a&&(t=n),cn.isString(t)?cn.isString(r)?-1!==t.indexOf(r):cn.isRegExp(r)?r.test(t):void 0:void 0)}class Hn{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=Fn(t);if(!a)throw new Error("header name must be a non-empty string");const i=cn.findKey(r,a);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=zn(e))}const i=(e,t)=>cn.forEach(e,((e,n)=>a(e,n,t)));if(cn.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(cn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&In[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(cn.isObject(e)&&cn.isIterable(e)){let n,r,a={};for(const t of e){if(!cn.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?cn.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=Fn(e)){const n=cn.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(cn.isFunction(t))return t.call(this,e,n);if(cn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Fn(e)){const n=cn.findKey(this,e);return!(!n||void 0===this[n]||t&&!Bn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=Fn(e)){const a=cn.findKey(n,e);!a||t&&!Bn(0,n[a],a,t)||(delete n[a],r=!0)}}return cn.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!Bn(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return cn.forEach(this,((r,a)=>{const i=cn.findKey(n,a);if(i)return t[i]=zn(r),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();s!==a&&delete t[a],t[s]=zn(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return cn.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&cn.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[On]=this[On]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Fn(e);t[r]||(!function(e,t){const n=cn.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return cn.isArray(e)?e.forEach(r):r(e),this}}Hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),cn.reduceDescriptors(Hn.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),cn.freezeMethods(Hn);const Vn=Hn;function Gn(e,t){const n=this||Un,r=t||n,a=Vn.from(r.headers);let i=r.data;return cn.forEach(e,(function(e){i=e.call(n,i,a.normalize(),t?t.status:void 0)})),a.normalize(),i}function Wn(e){return!(!e||!e.__CANCEL__)}function qn(e,t,n){pn.call(this,null==e?"canceled":e,pn.ERR_CANCELED,t,n),this.name="CanceledError"}cn.inherits(qn,pn,{__CANCEL__:!0});const Xn=qn;function Yn(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new pn("Request failed with status code "+n.status,[pn.ERR_BAD_REQUEST,pn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Kn=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,i=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];a||(a=l),n[i]=o,r[i]=l;let u=s,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Jn=function(e,t){let n,r,a=0,i=1e3/t;const s=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=i?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),i-t)))},()=>n&&s(n)]},Zn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=Kn(50,250);return Jn((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,o=i-r,l=a(o);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},$n=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Qn=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cn.asap((()=>e(...n)))},er=Ln.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ln.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ln.origin),Ln.navigator&&/(msie|trident)/i.test(Ln.navigator.userAgent)):()=>!0,tr=Ln.hasStandardBrowserEnv?{write(e,t,n,r,a,i){const s=[e+"="+encodeURIComponent(t)];cn.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),cn.isString(r)&&s.push("path="+r),cn.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function nr(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const rr=e=>e instanceof Vn?c({},e):e;function ar(e,t){t=t||{};const n={};function r(e,t,n,r){return cn.isPlainObject(e)&&cn.isPlainObject(t)?cn.merge.call({caseless:r},e,t):cn.isPlainObject(t)?cn.merge({},t):cn.isArray(t)?t.slice():t}function a(e,t,n,a){return cn.isUndefined(t)?cn.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function i(e,t){if(!cn.isUndefined(t))return r(void 0,t)}function s(e,t){return cn.isUndefined(t)?cn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,a,i){return i in t?r(n,a):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>a(rr(e),rr(t),0,!0)};return cn.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=l[r]||a,s=i(e[r],t[r],r);cn.isUndefined(s)&&i!==o||(n[r]=s)})),n}const ir=e=>{const t=ar({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=Vn.from(o),t.url=En(nr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),cn.isFormData(r))if(Ln.hasStandardBrowserEnv||Ln.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ln.hasStandardBrowserEnv&&(a&&cn.isFunction(a)&&(a=a(t)),a||!1!==a&&er(t.url))){const e=i&&s&&tr.read(s);e&&o.set(i,e)}return t},sr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=ir(e);let a=r.data;const i=Vn.from(r.headers).normalize();let s,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=Vn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Yn((function(e){t(e),m()}),(function(e){n(e),m()}),{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new pn("Request aborted",pn.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new pn("Network Error",pn.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||Tn;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new pn(t,a.clarifyTimeoutError?pn.ETIMEDOUT:pn.ECONNABORTED,e,f)),f=null},void 0===a&&i.setContentType(null),"setRequestHeader"in f&&cn.forEach(i.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),cn.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),d&&"json"!==d&&(f.responseType=r.responseType),p&&([l,u]=Zn(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=Zn(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{f&&(n(!t||t.type?new Xn(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Ln.protocols.indexOf(v)?n(new pn("Unsupported protocol "+v+":",pn.ERR_BAD_REQUEST,e)):f.send(a||null)}))},or=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof pn?t:new Xn(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,a(new pn("timeout ".concat(t," of ms exceeded"),pn.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:o}=r;return o.unsubscribe=()=>cn.asap(s),o}};function lr(e,t){this.v=e,this.k=t}function cr(e){return function(){return new ur(e.apply(this,arguments))}}function ur(e){var t,n;function r(t,n){try{var i=e[t](n),s=i.value,o=s instanceof lr;Promise.resolve(o?s.v:s).then((function(n){if(o){var l="return"===t?"return":"next";if(!s.k||n.done)return r(l,n);n=e[l](n).value}a(i.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(i,s){var o={key:e,arg:a,resolve:i,reject:s,next:null};n?n=n.next=o:(t=n=o,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function dr(e){return new lr(e,0)}function hr(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new lr(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function pr(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new mr(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function mr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return mr=function(e){this.s=e,this.n=e.next},mr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new mr(e)}ur.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ur.prototype.next=function(e){return this._invoke("next",e)},ur.prototype.throw=function(e){return this._invoke("throw",e)},ur.prototype.return=function(e){return this._invoke("return",e)};const fr=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},gr=function(){var e=cr((function*(e,t){var n,r=!1,a=!1;try{for(var i,s=pr(vr(e));r=!(i=yield dr(s.next())).done;r=!1){const e=i.value;yield*hr(pr(fr(e,t)))}}catch(o){a=!0,n=o}finally{try{r&&null!=s.return&&(yield dr(s.return()))}finally{if(a)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),vr=function(){var e=cr((function*(e){if(e[Symbol.asyncIterator])return void(yield*hr(pr(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield dr(t.read());if(e)break;yield n}}finally{yield dr(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),xr=(e,t,n,r)=>{const a=gr(e,t);let i,s=0,o=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return o(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},yr="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,br=yr&&"function"===typeof ReadableStream,_r=yr&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),wr=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Ug){return!1}},Sr=br&&wr((()=>{let e=!1;const t=new Request(Ln.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Er=br&&wr((()=>cn.isReadableStream(new Response("").body))),Mr={stream:Er&&(e=>e.body)};var Tr;yr&&(Tr=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Mr[e]&&(Mr[e]=cn.isFunction(Tr[e])?t=>t[e]():(t,n)=>{throw new pn("Response type '".concat(e,"' is not supported"),pn.ERR_NOT_SUPPORT,n)})})));const Nr=async(e,t)=>{const n=cn.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(cn.isBlob(e))return e.size;if(cn.isSpecCompliantForm(e)){const t=new Request(Ln.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return cn.isArrayBufferView(e)||cn.isArrayBuffer(e)?e.byteLength:(cn.isURLSearchParams(e)&&(e+=""),cn.isString(e)?(await _r(e)).byteLength:void 0)})(t):n},Ar=yr&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:i,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:p}=ir(e);u=u?(u+"").toLowerCase():"text";let m,f=or([a,i&&i.toAbortSignal()],s);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(l&&Sr&&"get"!==n&&"head"!==n&&0!==(v=await Nr(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(cn.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=$n(v,Zn(Qn(l)));r=xr(n.body,65536,e,t)}}cn.isString(h)||(h=h?"include":"omit");const a="credentials"in Request.prototype;m=new Request(t,c(c({},p),{},{signal:f,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:a?h:void 0}));let i=await fetch(m);const s=Er&&("stream"===u||"response"===u);if(Er&&(o||s&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=cn.toFiniteNumber(i.headers.get("content-length")),[n,r]=o&&$n(t,Zn(Qn(o),!0))||[];i=new Response(xr(i.body,65536,n,(()=>{r&&r(),g&&g()})),e)}u=u||"text";let x=await Mr[cn.findKey(Mr,u)||"text"](i,e);return!s&&g&&g(),await new Promise(((t,n)=>{Yn(t,n,{data:x,headers:Vn.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:m})}))}catch(x){if(g&&g(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new pn("Network Error",pn.ERR_NETWORK,e,m),{cause:x.cause||x});throw pn.from(x,x&&x.code,e,m)}}),Cr={http:null,xhr:sr,fetch:Ar};cn.forEach(Cr,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Ug){}Object.defineProperty(e,"adapterName",{value:t})}}));const Rr=e=>"- ".concat(e),Pr=e=>cn.isFunction(e)||null===e||!1===e,kr=e=>{e=cn.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Pr(n)&&(r=Cr[(t=String(n)).toLowerCase()],void 0===r))throw new pn("Unknown adapter '".concat(t,"'"));if(r)break;a[t||"#"+i]=r}if(!r){const e=Object.entries(a).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Rr).join("\n"):" "+Rr(e[0]):"as no adapter specified";throw new pn("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Lr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xn(null,e)}function jr(e){Lr(e),e.headers=Vn.from(e.headers),e.data=Gn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return kr(e.adapter||Un.adapter)(e).then((function(t){return Lr(e),t.data=Gn.call(e,e.transformResponse,t),t.headers=Vn.from(t.headers),t}),(function(t){return Wn(t)||(Lr(e),t&&t.response&&(t.response.data=Gn.call(e,e.transformResponse,t.response),t.response.headers=Vn.from(t.response.headers))),Promise.reject(t)}))}const Dr="1.9.0",Ur={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ur[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ir={};Ur.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,i)=>{if(!1===e)throw new pn(r(a," has been removed"+(t?" in "+t:"")),pn.ERR_DEPRECATED);return t&&!Ir[a]&&(Ir[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,i)}},Ur.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Or={assertOptions:function(e,t,n){if("object"!==typeof e)throw new pn("options must be an object",pn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const i=r[a],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new pn("option "+i+" must be "+n,pn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new pn("Unknown option "+i,pn.ERR_BAD_OPTION)}},validators:Ur},Fr=Or.validators;class zr{constructor(e){this.defaults=e||{},this.interceptors={request:new Mn,response:new Mn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Ug){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ar(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&Or.assertOptions(n,{silentJSONParsing:Fr.transitional(Fr.boolean),forcedJSONParsing:Fr.transitional(Fr.boolean),clarifyTimeoutError:Fr.transitional(Fr.boolean)},!1),null!=r&&(cn.isFunction(r)?t.paramsSerializer={serialize:r}:Or.assertOptions(r,{encode:Fr.function,serialize:Fr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Or.assertOptions(t,{baseUrl:Fr.spelling("baseURL"),withXsrfToken:Fr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&cn.merge(a.common,a[t.method]);a&&cn.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=Vn.concat(i,a);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[jr.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=jr.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return En(nr((e=ar(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}cn.forEach(["delete","get","head","options"],(function(e){zr.prototype[e]=function(t,n){return this.request(ar(n||{},{method:e,url:t,data:(n||{}).data}))}})),cn.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(ar(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}zr.prototype[e]=t(),zr.prototype[e+"Form"]=t(!0)}));const Br=zr;class Hr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new Xn(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Hr((function(t){e=t})),cancel:e}}}const Vr=Hr;const Gr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gr).forEach((e=>{let[t,n]=e;Gr[n]=t}));const Wr=Gr;const qr=function e(t){const n=new Br(t),r=St(Br.prototype.request,n);return cn.extend(r,Br.prototype,n,{allOwnKeys:!0}),cn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ar(t,n))},r}(Un);qr.Axios=Br,qr.CanceledError=Xn,qr.CancelToken=Vr,qr.isCancel=Wn,qr.VERSION=Dr,qr.toFormData=xn,qr.AxiosError=pn,qr.Cancel=qr.CanceledError,qr.all=function(e){return Promise.all(e)},qr.spread=function(e){return function(t){return e.apply(null,t)}},qr.isAxiosError=function(e){return cn.isObject(e)&&!0===e.isAxiosError},qr.mergeConfig=ar,qr.AxiosHeaders=Vn,qr.formToJSON=e=>jn(cn.isHTMLForm(e)?new FormData(e):e),qr.getAdapter=kr,qr.HttpStatusCode=Wr,qr.default=qr;const Xr=qr,Yr={BLOG_URL:"https://aiblog.automatereporting.com/",API_URL:"https://aiblog.automatereporting.com/wp-json/wp/v2",AUTH_URL:"https://aiblog.automatereporting.com/wp-json/jwt-auth/v1",TOKEN_ENDPOINT:"https://aiblog.automatereporting.com/wp-json/jwt-auth/v1/token",TOKEN_VALIDATE_ENDPOINT:"https://aiblog.automatereporting.com/wp-json/jwt-auth/v1/token/validate",AUTH_METHOD:"jwt",POSTS_PER_PAGE:6,POSTS_PER_PAGE_SIDEBAR:4,EXCERPT_LENGTH:200,DEFAULT_FEATURED_IMAGE:"/default-hero.png",DEFAULT_AVATAR:"/api/placeholder/96/96",CACHE_DURATION:{POSTS:3e5,CATEGORIES:18e5,TAGS:18e5},TIMEOUT:6e3,API_VERSION:"wp/v2",TOKEN_REFRESH_THRESHOLD:3e5,ERROR_MESSAGES:{CONNECTION_FAILED:"Could not connect to WordPress. Please check your internet connection.",AUTH_FAILED:"Authentication failed. Please check your credentials.",PERMISSION_DENIED:"You do not have permission to perform this action.",POST_NOT_FOUND:"The requested post could not be found.",MEDIA_UPLOAD_FAILED:"Failed to upload media file.",TOKEN_EXPIRED:"Authentication token has expired. Please log in again.",TOKEN_INVALID:"Invalid authentication token. Please log in again."}};const Kr=Yr;const Jr=new class{constructor(){this.baseURL=Kr.API_URL,this.authURL=Kr.AUTH_URL,this.blogURL=Kr.BLOG_URL,this.api=Xr.create({baseURL:this.baseURL,timeout:Kr.TIMEOUT,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use((async e=>{const t=await this.getValidToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.api.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(this.logout(),"/blog-management"!==window.location.pathname&&(window.location.href="/blog-management")),Promise.reject(e)}))}async login(e,t){try{console.log("Attempting login to:","".concat(this.authURL,"/token"));const n=await Xr.post("".concat(this.authURL,"/token"),{username:e,password:t},{timeout:Kr.TIMEOUT,headers:{"Content-Type":"application/json",Accept:"application/json"}});console.log("Login response:",n.data);const{token:a,user_email:i,user_nicename:s,user_display_name:o}=n.data;if(!a)throw new Error("No token received from server");let l=null;try{const e=await Xr.get("".concat(this.baseURL,"/users/me"),{headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"},timeout:Kr.TIMEOUT});console.log("User details response:",e.data),l=e.data}catch(r){console.warn("Could not fetch user details:",r),l={id:n.data.user_id||1,name:o||s||e,username:s||e,email:i||"",capabilities:{edit_posts:!0,upload_files:!0,publish_posts:!0,edit_published_posts:!0,delete_posts:!0},roles:["editor"]}}const c=["edit_posts","upload_files"],u=l.capabilities?Object.keys(l.capabilities):[];return c.some((e=>u.includes(e)||l.capabilities&&l.capabilities[e]))||!l.roles||l.roles.includes("administrator")||console.warn("User capabilities check failed, but proceeding..."),this._storeAuthData(a,l),{success:!0,token:a,user:this._formatUserData(l)}}catch(a){var n;throw console.error("WordPress login error:",a),console.error("Error response:",null===(n=a.response)||void 0===n?void 0:n.data),this._handleAuthError(a)}}async refreshToken(){try{const e=this.getToken();if(!e)throw new Error("No token available for refresh");const t=await Xr.post("".concat(this.authURL,"/token/validate"),{},{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"},timeout:Kr.TIMEOUT});if(t.data&&"jwt_auth_valid_token"===t.data.code)return e;throw new Error("Token validation failed")}catch(e){throw console.error("Token refresh/validation failed:",e),this.logout(),new Error(Kr.ERROR_MESSAGES.TOKEN_INVALID)}}async getValidToken(){const e=this.getToken();if(!e)return null;const t=localStorage.getItem("wp_auth_timestamp");if(!t)return this.logout(),null;const n=parseInt(t),r=Date.now();if(r-n>5184e5)try{return await this.refreshToken()}catch(i){return null}const a=localStorage.getItem("wp_last_validation");if(!a||r-parseInt(a)>36e5)try{return await Xr.post("".concat(this.authURL,"/token/validate"),{},{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"},timeout:5e3}),localStorage.setItem("wp_last_validation",r.toString()),e}catch(i){return console.error("Token validation failed:",i),this.logout(),null}return e}_storeAuthData(e,t){try{localStorage.setItem("wp_token",e),localStorage.setItem("wp_user",JSON.stringify(this._formatUserData(t))),localStorage.setItem("wp_auth_timestamp",Date.now().toString())}catch(n){throw console.error("Failed to store auth data:",n),new Error("Failed to store authentication data. Please check your browser settings.")}}_formatUserData(e){var t,n;return{id:e.id||e.user_id||1,username:e.username||e.user_login||e.slug||"user",displayName:e.name||e.display_name||e.user_display_name||e.username||"User",email:e.email||e.user_email||"",capabilities:e.capabilities||{edit_posts:!0,upload_files:!0,publish_posts:!0,edit_published_posts:!0,delete_posts:!0},avatar:(null===(t=e.avatar_urls)||void 0===t?void 0:t[96])||(null===(n=e.avatar_urls)||void 0===n?void 0:n[96])||Kr.DEFAULT_AVATAR||"https://www.gravatar.com/avatar/?d=mp&s=96",roles:e.roles||["editor"],link:e.link||""}}_handleAuthError(e){var t,n,r,a,i;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)?new Error("Invalid username or password. Please check your credentials."):403===(null===(n=e.response)||void 0===n?void 0:n.status)?new Error("Access forbidden. Your user account may not have sufficient permissions."):404===(null===(r=e.response)||void 0===r?void 0:r.status)?new Error("WordPress REST API or JWT endpoint not found. Please check your site configuration."):"ENOTFOUND"===e.code||"NETWORK_ERROR"===e.code?new Error("Cannot reach WordPress site. Please check your internet connection."):null!==(a=e.response)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.message?new Error(e.response.data.message):new Error("Login failed: ".concat(e.message||"Unknown error occurred"))}async testConnection(){try{const e=await Xr.get("".concat(this.baseURL,"/"),{timeout:5e3,headers:{Accept:"application/json"}});return{success:!0,data:e.data,wpVersion:e.headers["x-wp-version"]||"Unknown",apiVersion:e.data.name||"WordPress REST API"}}catch(e){return console.error("Connection test failed:",e),{success:!1,error:e.message||"Connection failed",code:e.code||"UNKNOWN_ERROR"}}}logout(){try{localStorage.removeItem("wp_token"),localStorage.removeItem("wp_user"),localStorage.removeItem("wp_auth_timestamp"),localStorage.removeItem("wp_last_validation")}catch(e){console.error("Error during logout:",e)}}getToken(){return localStorage.getItem("wp_token")}getUser(){try{const e=localStorage.getItem("wp_user");return e?JSON.parse(e):null}catch(e){return console.error("Error parsing user data:",e),this.logout(),null}}getCurrentUser(){return this.getUser()}isAuthenticated(){const e=this.getToken(),t=this.getUser();return!(!e||!t)}async createPost(e){try{if(!this.isAuthenticated())throw new Error("User not authenticated. Please login first.");const t=await this._formatPostForAPI(e),n=await this.api.post("/posts",t);return this.formatWordPressPost(n.data)}catch(t){throw console.error("Error creating post:",t),this._handleError(t)}}async updatePost(e,t){try{if(!this.isAuthenticated())throw new Error("User not authenticated. Please login first.");const n=await this._formatPostForAPI(t),r=await this.api.put("/posts/".concat(e),n);return this.formatWordPressPost(r.data)}catch(n){throw console.error("Error updating post:",n),this._handleError(n)}}async deletePost(e){try{if(!this.isAuthenticated())throw new Error("User not authenticated. Please login first.");return await this.api.delete("/posts/".concat(e)),{success:!0,id:e}}catch(t){throw console.error("Error deleting post:",t),this._handleError(t)}}async uploadMedia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n,r;if(!this.isAuthenticated())throw new Error("User not authenticated. Please login first.");const a=new FormData;a.append("file",e),t.title&&a.append("title",t.title),t.caption&&a.append("caption",t.caption),t.alt&&a.append("alt_text",t.alt);const i=await this.api.post("/media",a,{headers:{"Content-Type":"multipart/form-data"},transformRequest:[e=>e]});return{id:i.data.id,url:i.data.source_url,title:(null===(n=i.data.title)||void 0===n?void 0:n.rendered)||"",alt:i.data.alt_text||"",caption:(null===(r=i.data.caption)||void 0===r?void 0:r.rendered)||""}}catch(a){throw console.error("Error uploading media:",a),this._handleError(a)}}async _formatPostForAPI(e){var t;return{title:e.title,content:e.content,excerpt:e.excerpt,status:e.status||"draft",categories:await this.processCategoryIds(e.categories||[]),tags:await this.processTagIds(e.tags||[]),featured_media:e.featured_media||null,meta:{subtitle:(null===(t=e.meta)||void 0===t?void 0:t.subtitle)||e.subtitle||""}}}async processCategoryIds(e){if(!Array.isArray(e)||0===e.length)return[1];const t=[];for(const n of e)if("string"===typeof n&&n.trim()){const e=await this.createOrGetCategory(n.trim());e&&t.push(e)}else"number"===typeof n&&t.push(n);return t.length>0?t:[1]}async processTagIds(e){if(!Array.isArray(e)||0===e.length)return[];const t=[];for(const n of e)if("string"===typeof n&&n.trim()){const e=await this.createOrGetTag(n.trim());e&&t.push(e)}else"number"===typeof n&&t.push(n);return t}async createOrGetCategory(e){try{const t=(await this.api.get("/categories",{params:{search:e,per_page:100}})).data.find((t=>t.name.toLowerCase()===e.toLowerCase()));if(t)return t.id;const n=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return(await this.api.post("/categories",{name:e,slug:n})).data.id}catch(t){return console.error("Error creating/getting category:",t),1}}async createOrGetTag(e){try{const t=(await this.api.get("/tags",{params:{search:e,per_page:100}})).data.find((t=>t.name.toLowerCase()===e.toLowerCase()));if(t)return t.id;const n=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return(await this.api.post("/tags",{name:e,slug:n})).data.id}catch(t){return console.error("Error creating/getting tag:",t),null}}async getUserPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!this.isAuthenticated())throw new Error("User not authenticated. Please login first.");const t=this.getUser(),n=await this.api.get("/posts",{params:c({author:t.id,status:"publish,draft,pending",_embed:!0,per_page:10},e)});return{posts:n.data.map((e=>this.formatWordPressPost(e))),totalPages:parseInt(n.headers["x-wp-totalpages"])||1,total:parseInt(n.headers["x-wp-total"])||0}}catch(t){throw console.error("Error fetching user posts:",t),this._handleError(t)}}formatWordPressPost(e){var t,n,r,a,i,s;return{id:e.id,title:(null===(t=e.title)||void 0===t?void 0:t.rendered)||"",subtitle:(null===(n=e.meta)||void 0===n?void 0:n.subtitle)||"",excerpt:(null===(r=e.excerpt)||void 0===r||null===(a=r.rendered)||void 0===a?void 0:a.replace(/<[^>]*>/g,""))||"",content:(null===(i=e.content)||void 0===i?void 0:i.rendered)||"",image:this.getFeatureImage(e),date:e.date,modified:e.modified,slug:e.slug,status:e.status,categories:this.getCategories(e),tags:this.getTags(e),author:this.getAuthor(e),link:e.link,readingTime:this.calculateReadingTime((null===(s=e.content)||void 0===s?void 0:s.rendered)||"")}}calculateReadingTime(e){const t=e.replace(/<[^>]*>/g,"").split(/\s+/).length;return Math.ceil(t/200)||1}_handleError(e){let t="An unknown error occurred";if(e.response)if(401===e.response.status)t=Kr.ERROR_MESSAGES.TOKEN_INVALID,this.logout();else if(403===e.response.status)t="You do not have permission to perform this action.";else if(404===e.response.status)t="WordPress endpoint not found. Please check your site configuration.";else if(413===e.response.status)t="File too large. Please try a smaller file.";else if(415===e.response.status)t="Unsupported file type.";else{const n=e.response.data;t=n.message?n.message:n.code?"WordPress Error: ".concat(n.code):"Server error: ".concat(e.response.status)}else t=e.request?"No response from WordPress API. Please check your connection.":e.message;return new Error(t)}getFeatureImage(e){var t,n;return null!==(t=e._embedded)&&void 0!==t&&null!==(n=t["wp:featuredmedia"])&&void 0!==n&&n[0]?e._embedded["wp:featuredmedia"][0].source_url:Kr.DEFAULT_FEATURED_IMAGE}getCategories(e){var t,n;return null!==(t=e._embedded)&&void 0!==t&&null!==(n=t["wp:term"])&&void 0!==n&&n[0]?e._embedded["wp:term"][0].map((e=>e.name)):[]}getTags(e){var t,n;return null!==(t=e._embedded)&&void 0!==t&&null!==(n=t["wp:term"])&&void 0!==n&&n[1]?e._embedded["wp:term"][1].map((e=>e.name)):[]}getAuthor(e){var t,n;if(null!==(t=e._embedded)&&void 0!==t&&null!==(n=t.author)&&void 0!==n&&n[0]){var r,a,i;const t=e._embedded.author[0];return{name:t.name,avatar:(null===(r=t.avatar_urls)||void 0===r?void 0:r[96])||Kr.DEFAULT_AVATAR,bio:t.description||"",link:t.link,social:{twitter:(null===(a=t.social)||void 0===a?void 0:a.twitter)||"",linkedin:(null===(i=t.social)||void 0===i?void 0:i.linkedin)||""}}}return{name:"Unknown Author",avatar:Kr.DEFAULT_AVATAR,bio:"",social:{twitter:"",linkedin:""}}}async testMediaUploadCapability(){try{var e,t,n,r;if(!this.isAuthenticated())return{canUpload:!1,reason:"Not authenticated"};const i=this.getCurrentUser();if(!i)return{canUpload:!1,reason:"No user data available"};if(!((null===(e=i.capabilities)||void 0===e?void 0:e.upload_files)||(null===(t=i.roles)||void 0===t?void 0:t.includes("administrator"))||(null===(n=i.roles)||void 0===n?void 0:n.includes("editor"))||(null===(r=i.roles)||void 0===r?void 0:r.includes("author"))))return{canUpload:!1,reason:"User role does not have upload permissions",userRoles:i.roles};try{await this.api.get("/media",{params:{per_page:1},timeout:5e3});return{canUpload:!0,reason:"All checks passed",apiAccessible:!0}}catch(a){return{canUpload:!1,reason:"Media API endpoint not accessible",error:a.message}}}catch(i){return{canUpload:!1,reason:"Error checking upload capability",error:i.message}}}async getUploadLimits(){try{await this.api.get("/");return{maxFileSize:8388608,allowedTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],maxWidth:2048,maxHeight:2048}}catch(e){return console.warn("Could not fetch upload limits:",e),{maxFileSize:2097152,allowedTypes:["image/jpeg","image/png","image/gif"],maxWidth:1024,maxHeight:1024}}}validateFileForUpload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(!e)return n.push("No file provided"),{isValid:!1,errors:n};const r=t||{maxFileSize:8388608,allowedTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"]};e.size>r.maxFileSize&&n.push("File too large: ".concat((e.size/1024/1024).toFixed(2),"MB. Maximum: ").concat(r.maxFileSize/1024/1024,"MB")),r.allowedTypes.includes(e.type)||n.push("File type not allowed: ".concat(e.type,". Allowed: ").concat(r.allowedTypes.join(", "))),e.name&&""!==e.name.trim()||n.push("File must have a valid name");return/[<>:"/\\|?*]/.test(e.name)&&n.push("File name contains unsafe characters"),{isValid:0===n.length,errors:n,warnings:[]}}};const Zr=n.p+"static/media/logo.742de9ab4508afeb81d335f33c997218.svg",$r="auth_token",Qr="current_user",ea="refresh_token",ta="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1/auth";console.log("AuthService initialized in ".concat("production"," mode with URL: ").concat(ta)),Xr.defaults.timeout=1e4;const na=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;localStorage.setItem($r,e),localStorage.setItem(Qr,JSON.stringify(t)),n&&localStorage.setItem(ea,n)},ra=()=>{localStorage.removeItem($r),localStorage.removeItem(Qr),localStorage.removeItem(ea)},aa=()=>localStorage.getItem($r),ia=()=>localStorage.getItem(ea),sa=()=>{try{const e=localStorage.getItem(Qr);return e?JSON.parse(e):null}catch(e){return console.error("Error getting current user:",e),null}},oa=e=>{try{localStorage.setItem(Qr,JSON.stringify(e))}catch(t){console.error("Error updating stored user:",t)}},la=()=>{const e=aa(),t=sa();if(!e||!t)return!1;try{if(e.includes(".")){const t=JSON.parse(atob(e.split(".")[1])),n=Date.now()/1e3;if(t.exp&&t.exp<n)return ra(),!1}return!0}catch(n){return console.error("Token validation error:",n),ra(),!1}},ca=()=>{const e=aa();if(!e||!e.includes("."))return!1;try{const t=JSON.parse(atob(e.split(".")[1])),n=Date.now()/1e3;return t.exp-n<300}catch(t){return console.error("Token check error:",t),!1}},ua=async e=>{let{email:t,password:n,rememberMe:r=!1}=e;try{const e=await Xr.post("".concat(ta,"/login"),{email:t,password:n,rememberMe:r});return e.data&&e.data.success?{success:!0,token:e.data.token,user:e.data.user,refreshToken:e.data.refreshToken,message:e.data.message||"Login successful"}:{success:!1,message:e.data.message||"Login failed"}}catch(i){var a;return console.error("Login error:",i),i.response?{success:!1,message:(null===(a=i.response.data)||void 0===a?void 0:a.message)||"Server error: ".concat(i.response.status),status:i.response.status}:i.request?{success:!1,message:"Network error. Please check your connection."}:{success:!1,message:i.message||"An unexpected error occurred"}}},da=async e=>{let{fullName:t,email:n,password:r}=e;try{const e=await Xr.post("".concat(ta,"/signup"),{fullName:t,email:n,password:r});return e.data&&e.data.success?{success:!0,token:e.data.token,user:e.data.user,refreshToken:e.data.refreshToken,message:e.data.message||"Registration successful"}:{success:!1,message:e.data.message||"Registration failed"}}catch(i){var a;return console.error("Signup error:",i),i.response?{success:!1,message:(null===(a=i.response.data)||void 0===a?void 0:a.message)||"Server error: ".concat(i.response.status),status:i.response.status}:i.request?{success:!1,message:"Network error. Please check your connection."}:{success:!1,message:i.message||"An unexpected error occurred"}}},ha=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e||ia();if(!t)return{success:!1,message:"No refresh token available"};const n=await Xr.post("".concat(ta,"/refresh-token"),{refreshToken:t});if(n.data&&n.data.success){const e=sa();return na(n.data.token,e,n.data.refreshToken),{success:!0,token:n.data.token,refreshToken:n.data.refreshToken}}return{success:!1,message:n.data.message||"Token refresh failed"}}catch(n){var t;return console.error("Token refresh error:",n),n.response?{success:!1,message:(null===(t=n.response.data)||void 0===t?void 0:t.message)||"Token refresh failed",status:n.response.status}:{success:!1,message:"Network error. Please check your connection."}}},pa=async()=>{try{const t=aa();if(t)try{await Xr.post("".concat(ta,"/logout"),{},{headers:{Authorization:"Bearer ".concat(t)}})}catch(e){console.error("Logout endpoint error:",e)}return ra(),{success:!0,message:"Logged out successfully"}}catch(e){return console.error("Logout error:",e),ra(),{success:!0,message:"Logged out"}}},ma=async()=>{if(ca())try{const e=await ha();e.success||(console.warn("Auto token refresh failed:",e.message),pa())}catch(e){console.error("Auto token refresh error:",e),pa()}},fa={isAuthenticated:la,getCurrentUser:sa,getToken:aa,getRefreshToken:ia,getAuthHeaders:()=>{const e=aa();return e?{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}:{"Content-Type":"application/json"}},storeAuthData:na,clearAuthData:ra,updateStoredUser:oa,login:ua,loginWithStorage:async e=>{try{const t=await ua(e);if(t.success&&t.token&&t.user)return na(t.token,t.user,t.refreshToken),t;throw new Error(t.message||"Login failed")}catch(t){throw console.error("Login with storage error:",t),t}},signup:da,signupWithStorage:async e=>{try{const t=await da(e);if(t.success&&t.token&&t.user)return na(t.token,t.user,t.refreshToken),t;throw new Error(t.message||"Signup failed")}catch(t){throw console.error("Signup with storage error:",t),t}},logout:pa,forgotPassword:async e=>{try{return{success:!0,message:(await Xr.post("".concat(ta,"/forgot-password"),{email:e})).data.message||"Password reset email sent"}}catch(n){var t;return console.error("Forgot password error:",n),n.response?{success:!1,message:(null===(t=n.response.data)||void 0===t?void 0:t.message)||"Failed to send reset email",status:n.response.status}:n.request?{success:!1,message:"Network error. Please check your connection."}:{success:!1,message:n.message||"An unexpected error occurred"}}},resetPassword:async e=>{let{token:t,newPassword:n}=e;try{return{success:!0,message:(await Xr.post("".concat(ta,"/reset-password"),{token:t,newPassword:n})).data.message||"Password reset successful"}}catch(a){var r;return console.error("Reset password error:",a),a.response?{success:!1,message:(null===(r=a.response.data)||void 0===r?void 0:r.message)||"Password reset failed",status:a.response.status}:{success:!1,message:"Network error. Please check your connection."}}},verifyEmail:async e=>{try{return{success:!0,message:(await Xr.post("".concat(ta,"/verify-email"),{token:e})).data.message||"Email verified successfully"}}catch(n){var t;return console.error("Email verification error:",n),n.response?{success:!1,message:(null===(t=n.response.data)||void 0===t?void 0:t.message)||"Email verification failed",status:n.response.status}:{success:!1,message:"Network error. Please check your connection."}}},refreshToken:ha,getProfile:async()=>{try{const e=aa();if(!e)return{success:!1,message:"No authentication token"};const t=await Xr.get("".concat(ta,"/profile"),{headers:{Authorization:"Bearer ".concat(e)}});return t.data&&t.data.success?(oa(t.data.user),{success:!0,user:t.data.user}):{success:!1,message:t.data.message||"Failed to get profile"}}catch(n){var e,t;return console.error("Get profile error:",n),401===(null===(e=n.response)||void 0===e?void 0:e.status)?(ra(),{success:!1,message:"Session expired. Please login again.",status:401}):n.response?{success:!1,message:(null===(t=n.response.data)||void 0===t?void 0:t.message)||"Failed to get profile",status:n.response.status}:{success:!1,message:"Network error. Please check your connection."}}},updateProfile:async e=>{try{const t=aa();if(!t)return{success:!1,message:"No authentication token"};const n=await Xr.put("".concat(ta,"/profile"),e,{headers:{Authorization:"Bearer ".concat(t)}});return n.data&&n.data.success?(oa(n.data.user),{success:!0,user:n.data.user,message:n.data.message||"Profile updated successfully"}):{success:!1,message:n.data.message||"Profile update failed"}}catch(r){var t,n;return console.error("Update profile error:",r),401===(null===(t=r.response)||void 0===t?void 0:t.status)?(ra(),{success:!1,message:"Session expired. Please login again.",status:401}):r.response?{success:!1,message:(null===(n=r.response.data)||void 0===n?void 0:n.message)||"Profile update failed",status:r.response.status}:{success:!1,message:"Network error. Please check your connection."}}},shouldRefreshToken:ca,autoRefreshToken:ma,initializeAuth:()=>{la()&&ca()&&ma(),setInterval((()=>{la()&&ma()}),3e5)}};var ga=n(579);const va=()=>{const[e,n]=(0,t.useState)(!1),[r,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),p=(0,t.useRef)(null),m=ue(),f=m.pathname.startsWith("/blog")||m.pathname.startsWith("/admin")||"/wplogin"===m.pathname;m.pathname.startsWith("/blog/create")||m.pathname.startsWith("/blog/edit")||m.pathname.startsWith("/admin");(0,t.useEffect)((()=>{const e=()=>{const e=Jr.isAuthenticated(),t=Jr.getCurrentUser();s(e),l(t);const n=fa.isAuthenticated(),r=fa.getCurrentUser();u(n),h(r)};e();const t=setInterval(e,3e4);return()=>clearInterval(t)}),[]);const g=e=>{a(r===e?null:e)},v=async()=>{await Jr.logout(),s(!1),l(null),n(!1),a(null)},x=async()=>{await fa.logout(),u(!1),h(null),n(!1),a(null)};(0,t.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const y=()=>{n(!1),a(null)},b=()=>(0,ga.jsx)(gt,{to:"/wplogin",className:"btn btn-outline",onClick:y,children:"WP Login"}),_=()=>{var e,t;return(0,ga.jsxs)("li",{className:"nav-item dropdown ".concat(1===r?"open":""),children:[(0,ga.jsx)("span",{className:"nav-link dropdown-toggle",onClick:()=>g(1),children:(0,ga.jsxs)("span",{className:"user-avatar",children:[(0,ga.jsx)("img",{src:(null===o||void 0===o?void 0:o.avatar)||"/default-avatar.png",alt:(null===o||void 0===o?void 0:o.displayName)||(null===o||void 0===o?void 0:o.name)||"User",style:{width:"20px",height:"20px",borderRadius:"50%",marginRight:"5px"}}),(null===o||void 0===o?void 0:o.displayName)||(null===o||void 0===o?void 0:o.name)||"User",(0,ga.jsx)("span",{className:"auth-indicator",title:"WordPress Account",children:"WP"})]})}),(0,ga.jsxs)("ul",{className:"dropdown-menu",children:[(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/admin/profile",className:"dropdown-item",onClick:y,children:"Profile"})}),((null===o||void 0===o||null===(e=o.roles)||void 0===e?void 0:e.includes("administrator"))||(null===o||void 0===o||null===(t=o.roles)||void 0===t?void 0:t.includes("editor"))||Object.keys((null===o||void 0===o?void 0:o.capabilities)||{}).includes("edit_users"))&&(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/admin/users",className:"dropdown-item",onClick:y,children:"User Management"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/blog/create",className:"dropdown-item",onClick:y,children:"Create Post"})}),m.pathname.startsWith("/blog/")&&!m.pathname.startsWith("/blog/create")&&!m.pathname.startsWith("/blog/edit")&&"/blog"!==m.pathname&&(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/blog/edit/".concat(m.pathname.split("/").pop()),className:"dropdown-item",onClick:y,children:"Edit This Post"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)("hr",{className:"dropdown-divider"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)("button",{onClick:v,className:"dropdown-item logout-btn",style:{background:"none",border:"none",width:"100%",textAlign:"left",color:"inherit",cursor:"pointer"},children:"Logout (WordPress)"})})]})]})},w=()=>(0,ga.jsxs)("li",{className:"nav-item dropdown ".concat(1===r?"open":""),children:[(0,ga.jsx)("span",{className:"nav-link dropdown-toggle",onClick:()=>g(1),children:(0,ga.jsxs)("span",{className:"user-avatar",children:[(0,ga.jsx)("img",{src:(null===d||void 0===d?void 0:d.avatar)||"/default-avatar.png",alt:(null===d||void 0===d?void 0:d.fullName)||(null===d||void 0===d?void 0:d.name)||"User",style:{width:"20px",height:"20px",borderRadius:"50%",marginRight:"5px"}}),(null===d||void 0===d?void 0:d.fullName)||(null===d||void 0===d?void 0:d.name)||"User"]})}),(0,ga.jsxs)("ul",{className:"dropdown-menu",children:[(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/dashboard",className:"dropdown-item",onClick:y,children:"Dashboard"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/settings",className:"dropdown-item",onClick:y,children:"Settings"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)("hr",{className:"dropdown-divider"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)("button",{onClick:x,className:"dropdown-item logout-btn",style:{background:"none",border:"none",width:"100%",textAlign:"left",color:"inherit",cursor:"pointer"},children:"Logout"})})]})]});return(0,ga.jsx)("header",{className:"header header-fullwidth",children:(0,ga.jsx)("div",{className:"container header-container-fullwidth",children:(0,ga.jsxs)("div",{className:"header-content",children:[(0,ga.jsx)("div",{className:"logo",children:(0,ga.jsxs)(gt,{to:"/",onClick:y,children:[(0,ga.jsx)("img",{src:Zr,alt:"Automate Reporting",className:"logo-img"}),(0,ga.jsx)("span",{className:"logo-text",children:"Automate Reporting"})]})}),(0,ga.jsxs)("button",{className:"mobile-menu-toggle",onClick:()=>{n(!e)},"aria-label":"Toggle menu",children:[(0,ga.jsx)("span",{className:"hamburger-line"}),(0,ga.jsx)("span",{className:"hamburger-line"}),(0,ga.jsx)("span",{className:"hamburger-line"})]}),(0,ga.jsxs)("nav",{className:"main-nav ".concat(e?"open":""),ref:p,children:[(0,ga.jsxs)("ul",{className:"nav-list",children:[(0,ga.jsx)("li",{className:"nav-item",children:(0,ga.jsx)(gt,{to:"/",className:e=>{let{isActive:t}=e;return t?"nav-link active":"nav-link"},onClick:y,children:"Home"})}),(0,ga.jsxs)("li",{className:"nav-item dropdown ".concat(0===r?"open":""),children:[(0,ga.jsx)("span",{className:"nav-link dropdown-toggle",onClick:()=>g(0),children:"Product"}),(0,ga.jsxs)("ul",{className:"dropdown-menu",children:[(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/tool/docs",className:"dropdown-item",onClick:y,children:"Docs file format"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/tool/excel",className:"dropdown-item",onClick:y,children:"Excel file format"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/tool/html",className:"dropdown-item",onClick:y,children:"Html file format"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/tool/slicer",className:"dropdown-item",onClick:y,children:"Slicer analysis tool"})}),(0,ga.jsx)("li",{children:(0,ga.jsx)(gt,{to:"/tool/predictive-analysis",className:"dropdown-item",onClick:y,children:"Predictive analysis tool"})})]})]}),(0,ga.jsx)("li",{className:"nav-item",children:(0,ga.jsx)(gt,{to:"/blog",className:e=>{let{isActive:t}=e;return t?"nav-link active":"nav-link"},onClick:y,children:"Blog"})}),f&&!i&&(0,ga.jsx)("li",{className:"nav-item wp-login-item",children:(0,ga.jsx)(b,{})}),f&&i&&(0,ga.jsx)(_,{}),!f&&c&&(0,ga.jsx)(w,{})]}),!f&&!c&&(0,ga.jsxs)("div",{className:"header-actions",children:[(0,ga.jsx)(gt,{to:"/book-demo",className:"btn btn-secondary",onClick:y,children:"Book a Demo"}),(0,ga.jsx)(gt,{to:"/signup",className:"btn btn-primary",onClick:y,children:"Get Started"})]})]})]})})})},xa=[".xlsx"],ya=e=>{const t=[],n=[];return e&&0!==e.length?(Array.from(e).forEach((e=>{const r="."+e.name.split(".").pop().toLowerCase();e.size>10485760?n.push('File "'.concat(e.name,'" exceeds the maximum size limit of 10MB.')):xa.includes(r)?t.push(e):n.push('File "'.concat(e.name,'" has an invalid file type. Only Excel (.xlsx) files are allowed.'))})),{isValid:0===n.length,validFiles:t,errors:n}):(n.push("No files selected."),{isValid:!1,validFiles:t,errors:n})},ba=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",_a="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1";console.log("DocsReportService initialized in ".concat("production"," mode with URL: ").concat(_a));const wa=Xr.create({baseURL:_a,headers:{"Content-Type":"application/json"}}),Sa={uploadFile:async(e,t)=>{try{const n=new FormData;n.append("file",e);return(await wa.post("/docs/upload/",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const n=Math.round(100*e.loaded/e.total);t&&t(n)}})).data}catch(n){throw console.error("Error uploading file:",n),n}},generateReport:async e=>{try{return(await wa.post("/docs/generate-report/",null,{params:{file_id:e},timeout:6e4})).data}catch(t){throw console.error("Error generating report:",t),t}},getDownloadUrl:(e,t)=>"".concat(_a,"/docs/download/?file_id=").concat(e,"&filename=").concat(t),downloadReport:(e,t)=>{const n=Sa.getDownloadUrl(e,t);window.open(n,"_blank")},_handleError:e=>{let t="An unknown error occurred";if(e.response){t=e.response.data.detail||e.response.data.message||"Server error: ".concat(e.response.status)}else t=e.request?"No response from server. Please check your connection.":e.message;return new Error(t)}},Ea=Sa;async function Ma(){const e="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1";try{const t=await Xr.get("".concat(e,"/health"),{timeout:5e3});return 200===t.status?{success:!0,message:"API connection successful.",data:t.data}:{success:!1,message:"API responded with status ".concat(t.status)}}catch(t){let e="API connection failed.";return e=t.response?"Server error: ".concat(t.response.status," - ").concat(t.response.statusText):t.request?"No response from server. Please check your connection and API URL.":"ECONNABORTED"===t.code?"Request timeout. The API server may be slow or unavailable.":t.message||"Unknown connection error.",{success:!1,message:e}}}async function Ta(e){const t="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1";try{const n=await Xr.get("".concat(t,"/").concat(e,"/health"),{timeout:5e3});return 200===n.status?{success:!0,message:"".concat(e," service is healthy."),data:n.data}:{success:!1,message:"".concat(e," service responded with status ").concat(n.status)}}catch(n){let t="".concat(e," service health check failed.");return t=n.response?"".concat(e," service error: ").concat(n.response.status," - ").concat(n.response.statusText):n.request?"No response from ".concat(e," service."):"ECONNABORTED"===n.code?"".concat(e," service timeout."):n.message||"Unknown ".concat(e," service error."),{success:!1,message:t}}}const Na=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!1),[i,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)([]),[g,v]=(0,t.useState)(null),[x,y]=(0,t.useState)(!1),[b,_]=(0,t.useState)({isOnline:!0,message:"API connection established"}),w=(0,t.useRef)(null),S=ue();(0,t.useEffect)((()=>{S.pathname.startsWith("/tool")?y(!0):y(!1)}),[S]);const E=async e=>{if(e.target.files&&e.target.files.length>0){p(null),f([]);const r=ya(e.target.files);if(!r.isValid&&(f(r.errors),0===r.validFiles.length))return void(e.target.value="");const a=r.validFiles;n((e=>[...e,...a.map((e=>({name:e.name,size:e.size,type:e.type,formattedSize:ba(e.size),status:"pending"})))])),s(!0),l(0);try{const e=await Ea.uploadFile(a[0],(e=>l(e)));v(e.file_id),n((t=>t.map(((n,r)=>r>=t.length-a.length?c(c({},n),{},{status:"uploaded",id:e.file_id}):n)))),s(!1),l(100)}catch(t){console.error("Error uploading files:",t),p("Failed to upload files. Please try again."),s(!1),n((e=>e.map(((t,n)=>n>=e.length-a.length?c(c({},t),{},{status:"failed"}):t))))}e.target.value=""}};return(0,t.useEffect)((()=>{(async()=>{const e=await Ma();_({isOnline:e.success,message:e.message})})()}),[]),(0,ga.jsx)("div",{className:"tool-platform fade-in",children:(0,ga.jsxs)("div",{className:"analytics-platform",children:[!b.isOnline&&(0,ga.jsxs)("div",{className:"api-status-warning",children:[(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,ga.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,ga.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,ga.jsx)("span",{children:b.message})]}),(0,ga.jsxs)("div",{className:"platform-modules",children:[(0,ga.jsxs)("section",{className:"data-module fade-in",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Data Input --- Output (file format  * docs)"}),(0,ga.jsx)("p",{className:"module-description",children:"Upload Excel file containing separation data"})]}),(0,ga.jsx)("div",{className:"file-input-section",children:(0,ga.jsxs)("div",{className:"file-dropzone ".concat(i?"disabled":""),onClick:()=>{w.current&&!i&&w.current.click()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:async e=>{if(e.preventDefault(),e.stopPropagation(),i)return;const t=e.dataTransfer.files;if(t&&t.length>0){const e={target:{files:t,value:""}};await E(e)}},style:{cursor:i?"not-allowed":"pointer"},children:[(0,ga.jsx)("div",{className:"dropzone-icon",children:(0,ga.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ga.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M12 16V8",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M9 11L12 8L15 11",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ga.jsx)("p",{className:"dropzone-text",children:i?"Uploading...":"Click to select Excel file or drag and drop"}),(0,ga.jsx)("p",{className:"dropzone-subtext",children:"Excel format (.xlsx) required"}),(0,ga.jsx)("input",{ref:w,type:"file",className:"file-input",onChange:E,accept:".xlsx",disabled:i,style:{display:"none"}})]})}),m.length>0&&(0,ga.jsxs)("div",{className:"validation-alert",children:[(0,ga.jsx)("div",{className:"alert-header",children:"File Validation Errors:"}),(0,ga.jsx)("ul",{className:"alert-list",children:m.map(((e,t)=>(0,ga.jsx)("li",{children:e},t)))})]}),h&&(0,ga.jsx)("div",{className:"system-alert",children:h}),e.length>0&&(0,ga.jsxs)("div",{className:"selected-files-panel",children:[(0,ga.jsx)("div",{className:"panel-header",children:"Selected Files"}),i&&(0,ga.jsxs)("div",{className:"upload-progress-indicator",children:[(0,ga.jsx)("div",{className:"progress-bar",children:(0,ga.jsx)("div",{className:"progress-completed",style:{width:"".concat(o,"%")}})}),(0,ga.jsxs)("div",{className:"progress-percentage",children:[o,"% Complete"]})]}),(0,ga.jsxs)("table",{className:"files-table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Filename"}),(0,ga.jsx)("th",{children:"Size"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Action"})]})}),(0,ga.jsx)("tbody",{children:e.map(((t,r)=>(0,ga.jsxs)("tr",{className:t.status,children:[(0,ga.jsx)("td",{className:"file-name",children:t.name}),(0,ga.jsx)("td",{className:"file-size",children:t.formattedSize}),(0,ga.jsx)("td",{className:"file-status",children:"uploaded"===t.status?"Uploaded":"failed"===t.status?"Failed":"Pending"}),(0,ga.jsx)("td",{className:"file-action",children:(0,ga.jsx)("button",{className:"remove-file-btn",onClick:()=>(async t=>{const r=e[t];n((e=>e.filter(((e,n)=>n!==t)))),r.id===g&&(v(null),d(null))})(r),children:"Remove"})})]},r)))})]})]})]}),(0,ga.jsxs)("section",{className:"analysis-module fade-in",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Analysis Controls"}),(0,ga.jsx)("p",{className:"module-description",children:"Generate and download reports"})]}),(0,ga.jsxs)("div",{className:"control-panel",children:[(0,ga.jsxs)("div",{className:"control-actions",children:[(0,ga.jsx)("button",{className:"control-btn analyze-btn ".concat(r?"processing":""," ").concat(g?"":"disabled"),onClick:async()=>{if(0!==e.length&&g){a(!0),p(null);try{const e=await Ea.generateReport(g);a(!1),d({id:e.file_id,name:e.report_file||"Attrition_Report.docx",size:"Unknown",date:(new Date).toLocaleDateString(),url:Ea.getDownloadUrl(e.file_id,e.report_file)})}catch(t){console.error("Error generating report:",t),p("Failed to generate report. Please try again."),a(!1)}}else p("Please upload files before generating a report")},disabled:r||0===e.length||!g,children:r?"Processing Data...":"Generate Report"}),(0,ga.jsx)("button",{className:"control-btn retrieve-btn ".concat(u?"":"disabled"),onClick:async()=>{if(u){p(null);try{u.url&&window.open(u.url,"_blank")}catch(e){console.error("Error downloading report:",e),p("Failed to download report. Please try again.")}}else p("No report available to download. Please generate a report first.")},disabled:!u,children:"Download Report"})]}),u&&(0,ga.jsxs)("div",{className:"analysis-complete",children:[(0,ga.jsx)("div",{className:"complete-header",children:"Analysis Summary"}),(0,ga.jsxs)("div",{className:"report-metadata",children:[(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Document:"}),(0,ga.jsx)("span",{className:"metadata-value",children:u.name})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Generated:"}),(0,ga.jsx)("span",{className:"metadata-value",children:u.date})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Status:"}),(0,ga.jsx)("span",{className:"metadata-value status-complete",children:"Complete"})]})]}),(0,ga.jsx)("div",{className:"report-description",children:"The analysis document has been generated successfully. Click to download."})]})]})]}),x&&(0,ga.jsxs)("section",{className:"specifications-module fade-in",children:[(0,ga.jsx)("div",{className:"module-header",children:(0,ga.jsx)("h3",{children:"System Specifications"})}),(0,ga.jsxs)("div",{className:"specifications-grid",children:[(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"File Requirements"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"XLSX format with standard data fields"}),(0,ga.jsx)("p",{children:"Employee demographic and employment information"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Analysis Parameters"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Multi-dimensional attrition metrics"}),(0,ga.jsx)("p",{children:"Demographic, department, and tenure segmentation"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Output Format"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Microsoft Word (.docx) document"}),(0,ga.jsx)("p",{children:"Embedded visualizations and data tables"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Data Security"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Secure processing without persistent storage"}),(0,ga.jsx)("p",{children:"Compliance with data protection regulations"})]})]})]})]})]})]})})};const Aa=new class{constructor(){this.baseURL="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1",this.api=Xr.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}}),console.log("ExcelReportService initialized in ".concat("production"," mode with URL: ").concat(this.baseURL))}async uploadFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=new FormData;n.append("file",e);return(await this.api.post("/excel/upload/",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(t){const n=Math.round(100*e.loaded/e.total);t(n)}}})).data}catch(n){throw console.error("Error uploading file:",n),this._handleError(n)}}async generateReport(e){try{return(await this.api.post("/excel/generate-report/",null,{params:{file_id:e},timeout:3e4})).data}catch(t){throw console.error("Error generating report:",t),this._handleError(t)}}getDownloadUrl(e,t){return"".concat(this.baseURL,"/excel/download/").concat(e,"/").concat(t)}downloadReport(e,t){const n=this.getDownloadUrl(e,t);window.open(n,"_blank")}async getRecentReports(){try{return(await this.api.get("/recent")).data}catch(e){throw console.error("Error fetching recent reports:",e),this._handleError(e)}}_handleError(e){let t="An unknown error occurred";if(e.response){t=e.response.data.detail||e.response.data.message||"Server error: ".concat(e.response.status)}else t=e.request?"No response from server. Please check your connection.":e.message;return new Error(t)}},Ca=()=>{const e=ue(),[n,r]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),[s,o]=(0,t.useState)(!1),[l,u]=(0,t.useState)(0),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)([]),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)({isOnline:!0,message:"API connection established"}),[_,w]=(0,t.useState)(!1),S=(0,t.useRef)(null);(0,t.useEffect)((()=>{(async()=>{const e=await Ma();b({isOnline:e.success,message:e.message})})()}),[]),(0,t.useEffect)((()=>{e.pathname.startsWith("/tool")?w(!0):w(!1)}),[e]);const E=async e=>{if(!y.isOnline)return void m("Cannot upload files while API is offline. Please try again later.");m(null),g([]);const t=ya(e);if(!t.isValid&&(g(t.errors),0===t.validFiles.length))return;const n=t.validFiles;r((e=>[...e,...n.map((e=>({name:e.name,size:e.size,type:e.type,formattedSize:ba(e.size),status:"pending"})))])),o(!0),u(0);try{const e=await Aa.uploadFile(n[0],(e=>u(e)));x(e.file_id),r((t=>t.map(((r,a)=>a>=t.length-n.length?c(c({},r),{},{status:"uploaded",id:e.file_id}):r)))),o(!1),u(100)}catch(a){console.error("Error uploading files:",a),m(a.message||"Failed to upload files. Please try again."),o(!1),r((e=>e.map(((t,r)=>r>=e.length-n.length?c(c({},t),{},{status:"failed"}):t))))}};return(0,ga.jsx)("div",{className:"tool-platform",children:(0,ga.jsxs)("div",{className:"analytics-platform",children:[!y.isOnline&&(0,ga.jsxs)("div",{className:"api-status-warning",children:[(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,ga.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,ga.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,ga.jsx)("span",{children:y.message})]}),(0,ga.jsxs)("div",{className:"platform-modules",children:[(0,ga.jsxs)("section",{className:"data-module",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Data Input  --- Output (file format  * excel) "}),(0,ga.jsx)("p",{className:"module-description",children:"Upload Excel file containing separation data"})]}),(0,ga.jsx)("div",{className:"file-input-section",children:(0,ga.jsxs)("div",{className:"file-dropzone",onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over"),e.dataTransfer.files&&e.dataTransfer.files.length>0&&E(e.dataTransfer.files)},onClick:()=>{S.current&&S.current.click()},children:[(0,ga.jsx)("div",{className:"dropzone-icon",children:(0,ga.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ga.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M12 16V8",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M9 11L12 8L15 11",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ga.jsx)("p",{className:"dropzone-text",children:"Drag & drop or click to select Excel file"}),(0,ga.jsx)("p",{className:"dropzone-subtext",children:"Excel format (.xlsx) required"}),(0,ga.jsx)("input",{type:"file",className:"file-input",onChange:e=>{e.target.files&&E(e.target.files)},accept:".xlsx",disabled:s||!y.isOnline,ref:S})]})}),f.length>0&&(0,ga.jsxs)("div",{className:"validation-alert",children:[(0,ga.jsx)("div",{className:"alert-header",children:"File Validation Errors:"}),(0,ga.jsx)("ul",{className:"alert-list",children:f.map(((e,t)=>(0,ga.jsx)("li",{children:e},t)))})]}),p&&(0,ga.jsx)("div",{className:"system-alert",children:p}),n.length>0&&(0,ga.jsxs)("div",{className:"selected-files-panel",children:[(0,ga.jsx)("div",{className:"panel-header",children:"Selected Files"}),s&&(0,ga.jsxs)("div",{className:"upload-progress-indicator",children:[(0,ga.jsx)("div",{className:"progress-bar",children:(0,ga.jsx)("div",{className:"progress-completed",style:{width:"".concat(l,"%")}})}),(0,ga.jsxs)("div",{className:"progress-percentage",children:[l,"% Complete"]})]}),(0,ga.jsxs)("table",{className:"files-table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Filename"}),(0,ga.jsx)("th",{children:"Size"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Action"})]})}),(0,ga.jsx)("tbody",{children:n.map(((e,t)=>(0,ga.jsxs)("tr",{className:e.status,children:[(0,ga.jsx)("td",{className:"file-name",children:e.name}),(0,ga.jsx)("td",{className:"file-size",children:e.formattedSize}),(0,ga.jsxs)("td",{className:"file-status",children:["uploaded"===e.status&&(0,ga.jsx)("span",{className:"status-success",children:"Uploaded"}),"failed"===e.status&&(0,ga.jsx)("span",{className:"status-error",children:"Failed"}),"pending"===e.status&&(0,ga.jsx)("span",{className:"status-pending",children:"Pending"})]}),(0,ga.jsx)("td",{className:"file-action",children:(0,ga.jsx)("button",{className:"remove-file-btn",onClick:()=>(e=>{const t=n[e];r((t=>t.filter(((t,n)=>n!==e)))),t.id===v&&x(null)})(t),disabled:s,children:"Remove"})})]},t)))})]})]})]}),(0,ga.jsxs)("section",{className:"analysis-module",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Analysis Controls"}),(0,ga.jsx)("p",{className:"module-description",children:"Generate and download reports"})]}),(0,ga.jsxs)("div",{className:"control-panel",children:[(0,ga.jsxs)("div",{className:"control-actions",children:[(0,ga.jsx)("button",{className:"control-btn analyze-btn ".concat(a?"processing":""," ").concat(v&&y.isOnline?"":"disabled"),onClick:async()=>{if(0!==n.length&&v){i(!0),m(null);try{const e=await Aa.generateReport(v);i(!1),h({id:v,name:e.report_file||"Attrition_Report.xlsx",size:"Unknown",date:(new Date).toLocaleDateString(),url:Aa.getDownloadUrl(v,e.report_file)})}catch(e){console.error("Error generating report:",e),m(e.message||"Failed to generate report. Please try again."),i(!1)}}else m("Please upload files before generating a report")},disabled:a||0===n.length||!v||!y.isOnline,children:a?"Processing Data...":"Generate Report"}),(0,ga.jsx)("button",{className:"control-btn retrieve-btn ".concat(d?"":"disabled"),onClick:async()=>{if(d){m(null);try{d.url&&Aa.downloadReport(d.id,d.name)}catch(e){console.error("Error downloading report:",e),m(e.message||"Failed to download report. Please try again.")}}else m("No report available to download. Please generate a report first.")},disabled:!d,children:"Download Report"})]}),d&&(0,ga.jsxs)("div",{className:"analysis-complete",children:[(0,ga.jsx)("div",{className:"complete-header",children:"Analysis Summary"}),(0,ga.jsxs)("div",{className:"report-metadata",children:[(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Document:"}),(0,ga.jsx)("span",{className:"metadata-value",children:d.name})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Generated:"}),(0,ga.jsx)("span",{className:"metadata-value",children:d.date})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Status:"}),(0,ga.jsx)("span",{className:"metadata-value status-complete",children:"Complete"})]})]}),(0,ga.jsxs)("div",{className:"report-description",children:[(0,ga.jsx)("p",{children:"The analysis document has been generated successfully. Click the Download Report button to download it."}),(0,ga.jsx)("p",{children:"This comprehensive report includes:"}),(0,ga.jsxs)("ul",{children:[(0,ga.jsx)("li",{children:"Overall attrition statistics"}),(0,ga.jsx)("li",{children:"Gender, location, and function analysis"}),(0,ga.jsx)("li",{children:"Tenure and grade breakdowns"}),(0,ga.jsx)("li",{children:"Quarterly and monthly trend analysis"})]})]})]})]})]})]}),_&&(0,ga.jsxs)("section",{className:"specifications-module",children:[(0,ga.jsx)("div",{className:"module-header",children:(0,ga.jsx)("h3",{children:"System Specifications"})}),(0,ga.jsxs)("div",{className:"specifications-grid",children:[(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"File Requirements"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"XLSX format with standard data fields"}),(0,ga.jsx)("p",{children:"Employee demographic and employment information"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Analysis Parameters"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Multi-dimensional attrition metrics"}),(0,ga.jsx)("p",{children:"Demographic, department, and tenure segmentation"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Output Format"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Microsoft Word (.docx) document"}),(0,ga.jsx)("p",{children:"Embedded visualizations and data tables"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Data Security"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Secure processing without persistent storage"}),(0,ga.jsx)("p",{children:"Compliance with data protection regulations"})]})]})]})]})]})})};const Ra=new class{constructor(){this.baseURL="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1",this.api=Xr.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}}),console.log("HtmlReportService initialized in ".concat("production"," mode with URL: ").concat(this.baseURL))}async uploadFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=new FormData;n.append("file",e);return(await this.api.post("/html/upload/",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(t){const n=Math.round(100*e.loaded/e.total);t(n)}}})).data}catch(n){throw console.error("Error uploading file:",n),this._handleError(n)}}async generateReport(e){try{return(await this.api.post("/html/generate-report/",null,{params:{file_id:e},timeout:6e4})).data}catch(t){throw console.error("Error generating report:",t),this._handleError(t)}}getDownloadUrl(e,t){return"".concat(this.baseURL,"/html/download/").concat(e,"/").concat(t)}getViewUrl(e,t){return"".concat(this.baseURL,"/html/view/").concat(e,"/").concat(t)}downloadReport(e,t){const n=this.getDownloadUrl(e,t);window.open(n,"_blank")}viewReport(e,t){const n=this.getViewUrl(e,t);window.open(n,"_blank")}async getRecentReports(){try{return(await this.api.get("/recent")).data}catch(e){throw console.error("Error fetching recent reports:",e),this._handleError(e)}}_handleError(e){let t="An unknown error occurred";if(e.response){t=e.response.data.detail||e.response.data.message||"Server error: ".concat(e.response.status)}else t=e.request?"No response from server. Please check your connection.":e.message;return new Error(t)}},Pa=()=>{const e=ue(),[n,r]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),[s,o]=(0,t.useState)(!1),[l,u]=(0,t.useState)(0),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),[f,g]=(0,t.useState)([]),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)({isOnline:!0,message:"API connection established"}),[_,w]=(0,t.useState)(!1),S=(0,t.useRef)(null);(0,t.useEffect)((()=>{(async()=>{const e=await Ma();b({isOnline:e.success,message:e.message})})()}),[]),(0,t.useEffect)((()=>{e.pathname.startsWith("/tool")?w(!0):w(!1)}),[e]);const E=async e=>{if(!y.isOnline)return void m("Cannot upload files while API is offline. Please try again later.");m(null),g([]);const t=ya(e);if(!t.isValid&&(g(t.errors),0===t.validFiles.length))return;const n=t.validFiles;r((e=>[...e,...n.map((e=>({name:e.name,size:e.size,type:e.type,formattedSize:ba(e.size),status:"pending"})))])),o(!0),u(0);try{const e=await Ra.uploadFile(n[0],(e=>u(e)));x(e.file_id),r((t=>t.map(((r,a)=>a>=t.length-n.length?c(c({},r),{},{status:"uploaded",id:e.file_id}):r)))),o(!1),u(100)}catch(a){console.error("Error uploading files:",a),m(a.message||"Failed to upload files. Please try again."),o(!1),r((e=>e.map(((t,r)=>r>=e.length-n.length?c(c({},t),{},{status:"failed"}):t))))}};return(0,ga.jsx)("div",{className:"tool-platform",children:(0,ga.jsxs)("div",{className:"analytics-platform",children:[!y.isOnline&&(0,ga.jsxs)("div",{className:"api-status-warning",children:[(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,ga.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,ga.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,ga.jsx)("span",{children:y.message})]}),(0,ga.jsxs)("div",{className:"platform-modules",children:[(0,ga.jsxs)("section",{className:"data-module",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Data Input --- Output (file format  * html)"}),(0,ga.jsx)("p",{className:"module-description",children:"Upload Excel file containing separation data"})]}),(0,ga.jsx)("div",{className:"file-input-section",children:(0,ga.jsxs)("div",{className:"file-dropzone",onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over"),e.dataTransfer.files&&e.dataTransfer.files.length>0&&E(e.dataTransfer.files)},onClick:()=>{S.current&&S.current.click()},children:[(0,ga.jsx)("div",{className:"dropzone-icon",children:(0,ga.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ga.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M12 16V8",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M9 11L12 8L15 11",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ga.jsx)("p",{className:"dropzone-text",children:"Drag & drop or click to select Excel file"}),(0,ga.jsx)("p",{className:"dropzone-subtext",children:"Excel format (.xlsx) required"}),(0,ga.jsx)("input",{type:"file",className:"file-input",onChange:e=>{e.target.files&&E(e.target.files)},accept:".xlsx",disabled:s||!y.isOnline,ref:S})]})}),f.length>0&&(0,ga.jsxs)("div",{className:"validation-alert",children:[(0,ga.jsx)("div",{className:"alert-header",children:"File Validation Errors:"}),(0,ga.jsx)("ul",{className:"alert-list",children:f.map(((e,t)=>(0,ga.jsx)("li",{children:e},t)))})]}),p&&(0,ga.jsx)("div",{className:"system-alert",children:p}),n.length>0&&(0,ga.jsxs)("div",{className:"selected-files-panel",children:[(0,ga.jsx)("div",{className:"panel-header",children:"Selected Files"}),s&&(0,ga.jsxs)("div",{className:"upload-progress-indicator",children:[(0,ga.jsx)("div",{className:"progress-bar",children:(0,ga.jsx)("div",{className:"progress-completed",style:{width:"".concat(l,"%")}})}),(0,ga.jsxs)("div",{className:"progress-percentage",children:[l,"% Complete"]})]}),(0,ga.jsxs)("table",{className:"files-table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Filename"}),(0,ga.jsx)("th",{children:"Size"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Action"})]})}),(0,ga.jsx)("tbody",{children:n.map(((e,t)=>(0,ga.jsxs)("tr",{className:e.status,children:[(0,ga.jsx)("td",{className:"file-name",children:e.name}),(0,ga.jsx)("td",{className:"file-size",children:e.formattedSize}),(0,ga.jsxs)("td",{className:"file-status",children:["uploaded"===e.status&&(0,ga.jsx)("span",{className:"status-success",children:"Uploaded"}),"failed"===e.status&&(0,ga.jsx)("span",{className:"status-error",children:"Failed"}),"pending"===e.status&&(0,ga.jsx)("span",{className:"status-pending",children:"Pending"})]}),(0,ga.jsx)("td",{className:"file-action",children:(0,ga.jsx)("button",{className:"remove-file-btn",onClick:()=>(e=>{const t=n[e];r((t=>t.filter(((t,n)=>n!==e)))),t.id===v&&x(null)})(t),disabled:s,children:"Remove"})})]},t)))})]})]})]}),(0,ga.jsxs)("section",{className:"analysis-module",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Analysis Controls"}),(0,ga.jsx)("p",{className:"module-description",children:"Generate and download reports"})]}),(0,ga.jsxs)("div",{className:"control-panel",children:[(0,ga.jsxs)("div",{className:"control-actions",children:[(0,ga.jsx)("button",{className:"control-btn analyze-btn ".concat(a?"processing":""," ").concat(v&&y.isOnline?"":"disabled"),onClick:async()=>{if(0!==n.length&&v){i(!0),m(null);try{const e=await Ra.generateReport(v);i(!1),h({id:v,name:e.report_file||"Attrition_Report.xlsx",size:"Unknown",date:(new Date).toLocaleDateString(),url:Ra.getDownloadUrl(v,e.report_file)})}catch(e){console.error("Error generating report:",e),m(e.message||"Failed to generate report. Please try again."),i(!1)}}else m("Please upload files before generating a report")},disabled:a||0===n.length||!v||!y.isOnline,children:a?"Processing Data...":"Generate Report"}),(0,ga.jsx)("button",{className:"control-btn retrieve-btn ".concat(d?"":"disabled"),onClick:async()=>{if(d){m(null);try{d.url&&Ra.downloadReport(d.id,d.name)}catch(e){console.error("Error downloading report:",e),m(e.message||"Failed to download report. Please try again.")}}else m("No report available to download. Please generate a report first.")},disabled:!d,children:"Download Report"})]}),d&&(0,ga.jsxs)("div",{className:"analysis-complete",children:[(0,ga.jsx)("div",{className:"complete-header",children:"Analysis Summary"}),(0,ga.jsxs)("div",{className:"report-metadata",children:[(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Document:"}),(0,ga.jsx)("span",{className:"metadata-value",children:d.name})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Generated:"}),(0,ga.jsx)("span",{className:"metadata-value",children:d.date})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Status:"}),(0,ga.jsx)("span",{className:"metadata-value status-complete",children:"Complete"})]})]}),(0,ga.jsxs)("div",{className:"report-description",children:[(0,ga.jsx)("p",{children:"The analysis document has been generated successfully. Click the Download Report button to download it."}),(0,ga.jsx)("p",{children:"This comprehensive report includes:"}),(0,ga.jsxs)("ul",{children:[(0,ga.jsx)("li",{children:"Overall attrition statistics"}),(0,ga.jsx)("li",{children:"Gender, location, and function analysis"}),(0,ga.jsx)("li",{children:"Tenure and grade breakdowns"}),(0,ga.jsx)("li",{children:"Quarterly and monthly trend analysis"})]})]})]})]})]})]}),_&&(0,ga.jsxs)("section",{className:"specifications-module",children:[(0,ga.jsx)("div",{className:"module-header",children:(0,ga.jsx)("h3",{children:"System Specifications"})}),(0,ga.jsxs)("div",{className:"specifications-grid",children:[(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"File Requirements"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"XLSX format with standard data fields"}),(0,ga.jsx)("p",{children:"Employee demographic and employment information"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Analysis Parameters"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Multi-dimensional attrition metrics"}),(0,ga.jsx)("p",{children:"Demographic, department, and tenure segmentation"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Output Format"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Microsoft Word (.docx) document"}),(0,ga.jsx)("p",{children:"Embedded visualizations and data tables"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Data Security"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Secure processing without persistent storage"}),(0,ga.jsx)("p",{children:"Compliance with data protection regulations"})]})]})]})]})]})})},ka=()=>(0,ga.jsx)("div",{className:"documentation-page",children:(0,ga.jsxs)("div",{className:"container",children:[(0,ga.jsx)("h1",{children:"Attrition Analysis Tool Guide"}),(0,ga.jsxs)("div",{className:"documentation-content",children:[(0,ga.jsxs)("div",{className:"doc-section",children:[(0,ga.jsx)("h2",{children:"How to Use"}),(0,ga.jsxs)("ol",{children:[(0,ga.jsx)("li",{children:"Upload Excel file (.xlsx, max 10MB)"}),(0,ga.jsx)("li",{children:"Generate report"}),(0,ga.jsx)("li",{children:"Download results"})]})]}),(0,ga.jsxs)("div",{className:"doc-section",children:[(0,ga.jsx)("h2",{children:"Required Data"}),(0,ga.jsxs)("ul",{children:[(0,ga.jsx)("li",{children:"Gender"}),(0,ga.jsx)("li",{children:"Job Location"}),(0,ga.jsx)("li",{children:"Function"}),(0,ga.jsx)("li",{children:"Grade"}),(0,ga.jsx)("li",{children:"Date of Joining"}),(0,ga.jsx)("li",{children:"Action Type"}),(0,ga.jsx)("li",{children:"Action Date"})]})]}),(0,ga.jsxs)("div",{className:"doc-section",children:[(0,ga.jsx)("h2",{children:"Help"}),(0,ga.jsx)("p",{children:"Contact: "})]})]})]})});const La=new class{constructor(){this.baseURL="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1",this.api=Xr.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}}),console.log("SlicerReportService initialized in ".concat("production"," mode with URL: ").concat(this.baseURL))}async uploadFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=new FormData;n.append("file",e);return(await this.api.post("/slicer/upload/",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(t){const n=Math.round(100*e.loaded/e.total);t(n)}}})).data}catch(n){throw console.error("Error uploading file:",n),this._handleError(n)}}async generateReport(e){try{const t=new FormData;t.append("file_id",e);return(await this.api.post("/slicer/generate-report/",t,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})).data}catch(t){throw console.error("Error generating report:",t),this._handleError(t)}}getDownloadUrl(e,t){return"".concat(this.baseURL,"/slicer/download/").concat(e,"/").concat(t)}getViewUrl(e,t){return"".concat(this.baseURL,"/slicer/view/").concat(e,"/").concat(t)}getUploadFormUrl(){return"".concat(this.baseURL,"/slicer/upload-form/")}downloadReport(e,t){const n=this.getDownloadUrl(e,t),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}viewReport(e,t){const n=this.getViewUrl(e,t);window.open(n,"_blank")}openUploadForm(){const e=this.getUploadFormUrl();window.open(e,"_blank")}_handleError(e){let t="An unknown error occurred";if(e.response){t=e.response.data.detail||e.response.data.message||"Server error: ".concat(e.response.status)}else t=e.request?"No response from server. Please check your connection.":e.message;return new Error(t)}},ja=()=>{const e=ue(),n=pe(),[r,a]=(0,t.useState)([]),[i,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[u,d]=(0,t.useState)(0),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(null),[g,v]=(0,t.useState)([]),[x,y]=(0,t.useState)(null),[b,_]=(0,t.useState)({isOnline:!0,message:"API connection established"}),[w,S]=(0,t.useState)(!1),E=(0,t.useRef)(null);(0,t.useEffect)((()=>{(async()=>{try{await fetch("https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1"),_({isOnline:!0,message:"API connection established"})}catch(e){console.error("API connection error:",e),_({isOnline:!1,message:"Could not connect to analysis API. The report generation service may be offline."})}})()}),[]),(0,t.useEffect)((()=>{}),[b.isOnline]),(0,t.useEffect)((()=>{e.pathname.startsWith("/tool")?S(!0):S(!1)}),[e]);const M=async e=>{if(!b.isOnline)return void f("Cannot upload files while API is offline. Please try again later.");f(null),v([]);const t=ya(e);if(!t.isValid&&(v(t.errors),0===t.validFiles.length))return;const n=t.validFiles;a((e=>[...e,...n.map((e=>({name:e.name,size:e.size,type:e.type,formattedSize:ba(e.size),status:"pending"})))])),l(!0),d(0);try{const e=await La.uploadFile(n[0],(e=>d(e)));y(e.file_id),a((t=>t.map(((r,a)=>a>=t.length-n.length?c(c({},r),{},{status:"uploaded",id:e.file_id}):r)))),l(!1),d(100)}catch(r){console.error("Error uploading files:",r),f(r.message||"Failed to upload files. Please try again."),l(!1),a((e=>e.map(((t,r)=>r>=e.length-n.length?c(c({},t),{},{status:"failed"}):t))))}};return(0,ga.jsx)("div",{className:"slicer-tool-platform",children:(0,ga.jsxs)("div",{className:"slicer-analytics-platform",children:[!b.isOnline&&(0,ga.jsxs)("div",{className:"slicer-api-status-warning",children:[(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,ga.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,ga.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,ga.jsx)("span",{children:b.message})]}),(0,ga.jsxs)("div",{className:"slicer-platform-modules",children:[(0,ga.jsxs)("section",{className:"slicer-data-module",children:[(0,ga.jsxs)("div",{className:"slicer-module-header",children:[(0,ga.jsx)("h3",{children:"Data Input \u2014 Interactive Dashboard Output"}),(0,ga.jsx)("p",{className:"slicer-module-description",children:"Upload Excel file to generate an interactive attrition analysis dashboard with filters and visualizations"})]}),(0,ga.jsx)("div",{className:"slicer-file-input-section",children:(0,ga.jsxs)("div",{className:"slicer-file-dropzone",onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over"),e.dataTransfer.files&&e.dataTransfer.files.length>0&&M(e.dataTransfer.files)},onClick:()=>{E.current&&E.current.click()},children:[(0,ga.jsx)("div",{className:"slicer-dropzone-icon",children:(0,ga.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ga.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#3366CC",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M12 16V8",stroke:"#3366CC",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M9 11L12 8L15 11",stroke:"#3366CC",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ga.jsx)("p",{className:"slicer-dropzone-text",children:"Drag & drop or click to select Excel file"}),(0,ga.jsx)("p",{className:"slicer-dropzone-subtext",children:"Generate interactive dashboard with slicers and filters"}),(0,ga.jsx)("input",{type:"file",className:"slicer-file-input",onChange:e=>{e.target.files&&M(e.target.files)},accept:".xlsx",disabled:o||!b.isOnline,ref:E})]})}),g.length>0&&(0,ga.jsxs)("div",{className:"slicer-validation-alert",children:[(0,ga.jsx)("div",{className:"slicer-alert-header",children:"File Validation Errors:"}),(0,ga.jsx)("ul",{className:"slicer-alert-list",children:g.map(((e,t)=>(0,ga.jsx)("li",{children:e},t)))})]}),m&&(0,ga.jsx)("div",{className:"slicer-system-alert",children:m}),r.length>0&&(0,ga.jsxs)("div",{className:"slicer-selected-files-panel",children:[(0,ga.jsx)("div",{className:"slicer-panel-header",children:"Selected Files"}),o&&(0,ga.jsxs)("div",{className:"slicer-upload-progress-indicator",children:[(0,ga.jsx)("div",{className:"slicer-progress-bar",children:(0,ga.jsx)("div",{className:"slicer-progress-completed",style:{width:"".concat(u,"%")}})}),(0,ga.jsxs)("div",{className:"slicer-progress-percentage",children:[u,"% Complete"]})]}),(0,ga.jsxs)("table",{className:"slicer-files-table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Filename"}),(0,ga.jsx)("th",{children:"Size"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Action"})]})}),(0,ga.jsx)("tbody",{children:r.map(((e,t)=>(0,ga.jsxs)("tr",{className:e.status,children:[(0,ga.jsx)("td",{className:"file-name",children:e.name}),(0,ga.jsx)("td",{className:"file-size",children:e.formattedSize}),(0,ga.jsxs)("td",{className:"file-status",children:["uploaded"===e.status&&(0,ga.jsx)("span",{className:"status-success",children:"Uploaded"}),"failed"===e.status&&(0,ga.jsx)("span",{className:"status-error",children:"Failed"}),"pending"===e.status&&(0,ga.jsx)("span",{className:"status-pending",children:"Pending"})]}),(0,ga.jsx)("td",{className:"file-action",children:(0,ga.jsx)("button",{className:"slicer-remove-file-btn",onClick:()=>(e=>{const t=r[e];a((t=>t.filter(((t,n)=>n!==e)))),t.id===x&&y(null)})(t),disabled:o,children:"Remove"})})]},t)))})]})]})]}),(0,ga.jsxs)("section",{className:"slicer-analysis-module",children:[(0,ga.jsxs)("div",{className:"slicer-module-header",children:[(0,ga.jsx)("h3",{children:"Interactive Dashboard Controls"}),(0,ga.jsx)("p",{className:"slicer-module-description",children:"Generate and access your interactive attrition analysis dashboard"})]}),(0,ga.jsxs)("div",{className:"slicer-control-panel",children:[(0,ga.jsxs)("div",{className:"slicer-control-actions",children:[(0,ga.jsx)("button",{className:"slicer-control-btn slicer-analyze-btn ".concat(i?"processing":""," ").concat(x&&b.isOnline?"":"disabled"),onClick:async()=>{if(0!==r.length&&x){s(!0),f(null);try{const e=await La.generateReport(x);s(!1),p({id:x,name:e.report_file||"Interactive_Attrition_Dashboard.html",size:"Unknown",date:(new Date).toLocaleDateString(),url:La.getDownloadUrl(x,e.report_file),viewUrl:La.getViewUrl(x,e.report_file)})}catch(e){console.error("Error generating report:",e),f(e.message||"Failed to generate report. Please try again."),s(!1)}}else f("Please upload files before generating a report")},disabled:i||0===r.length||!x||!b.isOnline,children:i?"Creating Dashboard...":"Generate Interactive Dashboard"}),(0,ga.jsx)("button",{className:"slicer-control-btn slicer-view-btn ".concat(h?"":"disabled"),onClick:()=>{h&&h.viewUrl&&n("/dashboard/view/".concat(h.id,"/").concat(h.name),{state:{dashboardUrl:h.viewUrl,reportInfo:h}})},disabled:!h,children:"Open Dashboard"}),(0,ga.jsx)("button",{className:"slicer-control-btn slicer-retrieve-btn ".concat(h?"":"disabled"),onClick:async()=>{if(h){f(null);try{h.url&&La.downloadReport(h.id,h.name)}catch(e){console.error("Error downloading report:",e),f(e.message||"Failed to download report. Please try again.")}}else f("No report available to download. Please generate a report first.")},disabled:!h,children:"Download Dashboard"})]}),h&&(0,ga.jsxs)("div",{className:"slicer-analysis-complete",children:[(0,ga.jsx)("div",{className:"slicer-complete-header",children:"Interactive Dashboard Ready"}),(0,ga.jsxs)("div",{className:"slicer-report-metadata",children:[(0,ga.jsxs)("div",{className:"slicer-metadata-item",children:[(0,ga.jsx)("span",{className:"slicer-metadata-label",children:"Dashboard:"}),(0,ga.jsx)("span",{className:"slicer-metadata-value",children:h.name})]}),(0,ga.jsxs)("div",{className:"slicer-metadata-item",children:[(0,ga.jsx)("span",{className:"slicer-metadata-label",children:"Generated:"}),(0,ga.jsx)("span",{className:"slicer-metadata-value",children:h.date})]}),(0,ga.jsxs)("div",{className:"slicer-metadata-item",children:[(0,ga.jsx)("span",{className:"slicer-metadata-label",children:"Status:"}),(0,ga.jsx)("span",{className:"slicer-metadata-value slicer-status-complete",children:"Ready"})]})]}),(0,ga.jsxs)("div",{className:"slicer-report-description",children:[(0,ga.jsx)("p",{children:"Your interactive attrition analysis dashboard is ready! This comprehensive dashboard includes:"}),(0,ga.jsx)("p",{children:'Click "Open Dashboard" to explore your data interactively, or "Download Dashboard" to save the HTML file.'})]})]})]})]})]})]})})},Da=()=>{const e=document.querySelectorAll(".stat-number"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&!e.target.classList.contains("counted")&&(e.target.classList.add("counted"),(e=>{const t=parseInt(e.getAttribute("data-target")),n=t/125;let r=0;const a=()=>{r+=n,r<t?(e.textContent=Math.floor(r),requestAnimationFrame(a)):e.textContent=t};a()})(e.target))}))}),{threshold:.5,rootMargin:"0px"});e.forEach((e=>t.observe(e)))},Ua="176",Ia=0,Oa=1,Fa=2,za=100,Ba=101,Ha=102,Va=200,Ga=201,Wa=202,qa=203,Xa=204,Ya=205,Ka=206,Ja=207,Za=208,$a=209,Qa=210,ei=211,ti=212,ni=213,ri=214,ai=0,ii=1,si=2,oi=3,li=4,ci=5,ui=6,di=7,hi=301,pi=302,mi=303,fi=304,gi=306,vi=1e3,xi=1001,yi=1002,bi=1003,_i=1004,wi=1005,Si=1006,Ei=1007,Mi=1008,Ti=1009,Ni=1010,Ai=1011,Ci=1012,Ri=1013,Pi=1014,ki=1015,Li=1016,ji=1017,Di=1018,Ui=1020,Ii=35902,Oi=1023,Fi=1026,zi=1027,Bi=1028,Hi=1029,Vi=1031,Gi=1033,Wi=33776,qi=33777,Xi=33778,Yi=33779,Ki=35840,Ji=35841,Zi=35842,$i=35843,Qi=36196,es=37492,ts=37496,ns=37808,rs=37809,as=37810,is=37811,ss=37812,os=37813,ls=37814,cs=37815,us=37816,ds=37817,hs=37818,ps=37819,ms=37820,fs=37821,gs=36492,vs=36494,xs=36495,ys=36284,bs=36285,_s=36286,ws=2300,Ss=2301,Es=2302,Ms=2400,Ts=2401,Ns=2402,As="",Cs="srgb",Rs="srgb-linear",Ps="linear",ks="srgb",Ls=7680,js=512,Ds=513,Us=514,Is=515,Os=516,Fs=517,zs=518,Bs=519,Hs=35044,Vs="300 es",Gs=2e3,Ws=2001;class qs{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const Xs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Ys=Math.PI/180,Ks=180/Math.PI;function Js(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Xs[255&e]+Xs[e>>8&255]+Xs[e>>16&255]+Xs[e>>24&255]+"-"+Xs[255&t]+Xs[t>>8&255]+"-"+Xs[t>>16&15|64]+Xs[t>>24&255]+"-"+Xs[63&n|128]+Xs[n>>8&255]+"-"+Xs[n>>16&255]+Xs[n>>24&255]+Xs[255&r]+Xs[r>>8&255]+Xs[r>>16&255]+Xs[r>>24&255]).toLowerCase()}function Zs(e,t,n){return Math.max(t,Math.min(n,e))}function $s(e,t){return(e%t+t)%t}function Qs(e,t,n){return(1-n)*e+n*t}function eo(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function to(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class no{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;no.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Zs(this.x,e.x,t.x),this.y=Zs(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Zs(this.x,e,t),this.y=Zs(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Zs(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Zs(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,i=this.y-e.y;return this.x=a*n-i*r+e.x,this.y=a*r+i*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ro{constructor(e,t,n,r,a,i,s,o,l){ro.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,a,i,s,o,l)}set(e,t,n,r,a,i,s,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=a,c[5]=o,c[6]=n,c[7]=i,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,a=this.elements,i=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],m=r[0],f=r[3],g=r[6],v=r[1],x=r[4],y=r[7],b=r[2],_=r[5],w=r[8];return a[0]=i*m+s*v+o*b,a[3]=i*f+s*x+o*_,a[6]=i*g+s*y+o*w,a[1]=l*m+c*v+u*b,a[4]=l*f+c*x+u*_,a[7]=l*g+c*y+u*w,a[2]=d*m+h*v+p*b,a[5]=d*f+h*x+p*_,a[8]=d*g+h*y+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*i*c-t*s*l-n*a*c+n*s*o+r*a*l-r*i*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*i-s*l,d=s*o-c*a,h=l*a-i*o,p=t*u+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(r*l-c*n)*m,e[2]=(s*n-r*i)*m,e[3]=d*m,e[4]=(c*t-r*o)*m,e[5]=(r*a-s*t)*m,e[6]=h*m,e[7]=(n*o-l*t)*m,e[8]=(i*t-n*a)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,a,i,s){const o=Math.cos(a),l=Math.sin(a);return this.set(n*o,n*l,-n*(o*i+l*s)+i+e,-r*l,r*o,-r*(-l*i+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(ao.makeScale(e,t)),this}rotate(e){return this.premultiply(ao.makeRotation(-e)),this}translate(e,t){return this.premultiply(ao.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const ao=new ro;function io(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function so(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function oo(){const e=so("canvas");return e.style.display="block",e}const lo={};function co(e){e in lo||(lo[e]=!0,console.warn(e))}const uo=(new ro).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ho=(new ro).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function po(){const e={enabled:!0,workingColorSpace:Rs,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===ks&&(e.r=fo(e.r),e.g=fo(e.g),e.b=fo(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===ks&&(e.r=go(e.r),e.g=go(e.g),e.b=go(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===As?Ps:this.spaces[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[Rs]:{primaries:t,whitePoint:r,transfer:Ps,toXYZ:uo,fromXYZ:ho,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Cs},outputColorSpaceConfig:{drawingBufferColorSpace:Cs}},[Cs]:{primaries:t,whitePoint:r,transfer:ks,toXYZ:uo,fromXYZ:ho,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Cs}}}),e}const mo=po();function fo(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function go(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let vo;class xo{static getDataURL(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===vo&&(vo=so("canvas")),vo.width=e.width,vo.height=e.height;const n=vo.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=vo}return t.toDataURL(n)}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=so("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),a=r.data;for(let e=0;e<a.length;e++)a[e]=255*fo(a[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*fo(t[e]/255)):t[e]=fo(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let yo=0;class bo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:yo++}),this.uuid=Js(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(_o(r[t].image)):e.push(_o(r[t]))}else e=_o(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function _o(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?xo.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let wo=0;class So extends qs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:So.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:So.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xi,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Si,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Mi,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Oi,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ti,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:So.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:As;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:wo++}),this.uuid=Js(),this.name="",this.source=new bo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=a,this.minFilter=i,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new no(0,0),this.repeat=new no(1,1),this.center=new no(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ro,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vi:e.x=e.x-Math.floor(e.x);break;case xi:e.x=e.x<0?0:1;break;case yi:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case vi:e.y=e.y-Math.floor(e.y);break;case xi:e.y=e.y<0?0:1;break;case yi:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}So.DEFAULT_IMAGE=null,So.DEFAULT_MAPPING=300,So.DEFAULT_ANISOTROPY=1;class Eo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Eo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,a=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*a,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*a,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*a,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,a;const i=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(c-d)<i&&Math.abs(u-m)<i&&Math.abs(p-f)<i){if(Math.abs(c+d)<s&&Math.abs(u+m)<s&&Math.abs(p+f)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,x=(c+d)/4,y=(u+m)/4,b=(p+f)/4;return e>o&&e>v?e<i?(n=0,r=.707106781,a=.707106781):(n=Math.sqrt(e),r=x/n,a=y/n):o>v?o<i?(n=.707106781,r=0,a=.707106781):(r=Math.sqrt(o),n=x/r,a=b/r):v<i?(n=.707106781,r=.707106781,a=0):(a=Math.sqrt(v),n=y/a,r=b/a),this.set(n,r,a,t),this}let v=Math.sqrt((f-p)*(f-p)+(u-m)*(u-m)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(u-m)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Zs(this.x,e.x,t.x),this.y=Zs(this.y,e.y,t.y),this.z=Zs(this.z,e.z,t.z),this.w=Zs(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Zs(this.x,e,t),this.y=Zs(this.y,e,t),this.z=Zs(this.z,e,t),this.w=Zs(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Zs(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Mo extends qs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth?n.depth:1,this.scissor=new Eo(0,0,e,t),this.scissorTest=!1,this.viewport=new Eo(0,0,e,t);const r={width:e,height:t,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Si,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const a=new So(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);a.flipY=!1,a.generateMipmaps=n.generateMipmaps,a.internalFormat=n.internalFormat,this.textures=[];const i=n.count;for(let s=0;s<i;s++)this.textures[s]=a.clone(),this.textures[s].isRenderTargetTexture=!0,this.textures[s].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new bo(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class To extends Mo{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class No extends So{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=bi,this.minFilter=bi,this.wrapR=xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ao extends So{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=bi,this.minFilter=bi,this.wrapR=xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Co{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,a,i,s){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=a[i+0],h=a[i+1],p=a[i+2],m=a[i+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(u!==m||o!==d||l!==h||c!==p){let e=1-s;const t=o*d+l*h+c*p+u*m,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const a=Math.sqrt(r),i=Math.atan2(a,t*n);e=Math.sin(e*i)/a,s=Math.sin(s*i)/a}const a=s*n;if(o=o*e+d*a,l=l*e+h*a,c=c*e+p*a,u=u*e+m*a,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,a,i){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=a[i],d=a[i+1],h=a[i+2],p=a[i+3];return e[t]=s*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-s*h,e[t+2]=l*p+c*h+s*d-o*u,e[t+3]=c*p-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,a=e._z,i=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),u=s(a/2),d=o(n/2),h=o(r/2),p=o(a/2);switch(i){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(a-l)*e,this._z=(i-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(r+i)/e,this._z=(a+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(a-l)/e,this._x=(r+i)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(i-r)/e,this._x=(a+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zs(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,a=e._z,i=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+i*s+r*l-a*o,this._y=r*c+i*o+a*s-n*l,this._z=a*c+i*l+n*o-r*s,this._w=i*c-n*s-r*o-a*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,a=this._z,i=this._w;let s=i*e._w+n*e._x+r*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=i,this._x=n,this._y=r,this._z=a,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*i+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*a+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=i*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=a*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ro{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Ro.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ko.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ko.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,a=e.elements,i=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*i,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*i,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*i,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,s=e.z,o=e.w,l=2*(i*r-s*n),c=2*(s*t-a*r),u=2*(a*n-i*t);return this.x=t+o*l+i*u-s*c,this.y=n+o*c+s*l-a*u,this.z=r+o*u+a*c-i*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Zs(this.x,e.x,t.x),this.y=Zs(this.y,e.y,t.y),this.z=Zs(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Zs(this.x,e,t),this.y=Zs(this.y,e,t),this.z=Zs(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Zs(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,a=e.z,i=t.x,s=t.y,o=t.z;return this.x=r*o-a*s,this.y=a*i-n*o,this.z=n*s-r*i,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Po.copy(this).projectOnVector(e),this.sub(Po)}reflect(e){return this.sub(Po.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Zs(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Po=new Ro,ko=new Co;class Lo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ro(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ro(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Do.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Do.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Do.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Do):Do.fromBufferAttribute(r,t),Do.applyMatrix4(e.matrixWorld),this.expandByPoint(Do);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Uo.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Uo.copy(n.boundingBox)),Uo.applyMatrix4(e.matrixWorld),this.union(Uo)}const r=e.children;for(let a=0,i=r.length;a<i;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Do),Do.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vo),Go.subVectors(this.max,Vo),Io.subVectors(e.a,Vo),Oo.subVectors(e.b,Vo),Fo.subVectors(e.c,Vo),zo.subVectors(Oo,Io),Bo.subVectors(Fo,Oo),Ho.subVectors(Io,Fo);let t=[0,-zo.z,zo.y,0,-Bo.z,Bo.y,0,-Ho.z,Ho.y,zo.z,0,-zo.x,Bo.z,0,-Bo.x,Ho.z,0,-Ho.x,-zo.y,zo.x,0,-Bo.y,Bo.x,0,-Ho.y,Ho.x,0];return!!Xo(t,Io,Oo,Fo,Go)&&(t=[1,0,0,0,1,0,0,0,1],!!Xo(t,Io,Oo,Fo,Go)&&(Wo.crossVectors(zo,Bo),t=[Wo.x,Wo.y,Wo.z],Xo(t,Io,Oo,Fo,Go)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Do).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Do).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(jo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jo=[new Ro,new Ro,new Ro,new Ro,new Ro,new Ro,new Ro,new Ro],Do=new Ro,Uo=new Lo,Io=new Ro,Oo=new Ro,Fo=new Ro,zo=new Ro,Bo=new Ro,Ho=new Ro,Vo=new Ro,Go=new Ro,Wo=new Ro,qo=new Ro;function Xo(e,t,n,r,a){for(let i=0,s=e.length-3;i<=s;i+=3){qo.fromArray(e,i);const s=a.x*Math.abs(qo.x)+a.y*Math.abs(qo.y)+a.z*Math.abs(qo.z),o=t.dot(qo),l=n.dot(qo),c=r.dot(qo);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Yo=new Lo,Ko=new Ro,Jo=new Ro;class Zo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ro,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Yo.setFromPoints(e).getCenter(n);let r=0;for(let a=0,i=e.length;a<i;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ko.subVectors(e,this.center);const t=Ko.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Ko,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Jo.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ko.copy(e.center).add(Jo)),this.expandByPoint(Ko.copy(e.center).sub(Jo))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const $o=new Ro,Qo=new Ro,el=new Ro,tl=new Ro,nl=new Ro,rl=new Ro,al=new Ro;class il{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ro,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ro(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$o)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$o.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($o.copy(this.origin).addScaledVector(this.direction,t),$o.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Qo.copy(e).add(t).multiplyScalar(.5),el.copy(t).sub(e).normalize(),tl.copy(this.origin).sub(Qo);const a=.5*e.distanceTo(t),i=-this.direction.dot(el),s=tl.dot(this.direction),o=-tl.dot(el),l=tl.lengthSq(),c=Math.abs(1-i*i);let u,d,h,p;if(c>0)if(u=i*o-s,d=i*s-o,p=a*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+i*d+2*s)+d*(i*u+d+2*o)+l}else d=a,u=Math.max(0,-(i*d+s)),h=-u*u+d*(d+2*o)+l;else d=-a,u=Math.max(0,-(i*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-i*a+s)),d=u>0?-a:Math.min(Math.max(-a,-o),a),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-a,-o),a),h=d*(d+2*o)+l):(u=Math.max(0,-(i*a+s)),d=u>0?a:Math.min(Math.max(-a,-o),a),h=-u*u+d*(d+2*o)+l);else d=i>0?-a:a,u=Math.max(0,-(i*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Qo).addScaledVector(el,d),h}intersectSphere(e,t){$o.subVectors(e.center,this.origin);const n=$o.dot(this.direction),r=$o.dot($o)-n*n,a=e.radius*e.radius;if(r>a)return null;const i=Math.sqrt(a-r),s=n-i,o=n+i;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,a,i,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(a=(e.min.y-d.y)*c,i=(e.max.y-d.y)*c):(a=(e.max.y-d.y)*c,i=(e.min.y-d.y)*c),n>i||a>r?null:((a>n||isNaN(n))&&(n=a),(i<r||isNaN(r))&&(r=i),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>r?null:((s>n||n!==n)&&(n=s),(o<r||r!==r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,$o)}intersectTriangle(e,t,n,r,a){nl.subVectors(t,e),rl.subVectors(n,e),al.crossVectors(nl,rl);let i,s=this.direction.dot(al);if(s>0){if(r)return null;i=1}else{if(!(s<0))return null;i=-1,s=-s}tl.subVectors(this.origin,e);const o=i*this.direction.dot(rl.crossVectors(tl,rl));if(o<0)return null;const l=i*this.direction.dot(nl.cross(tl));if(l<0)return null;if(o+l>s)return null;const c=-i*tl.dot(al);return c<0?null:this.at(c/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class sl{constructor(e,t,n,r,a,i,s,o,l,c,u,d,h,p,m,f){sl.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,a,i,s,o,l,c,u,d,h,p,m,f)}set(e,t,n,r,a,i,s,o,l,c,u,d,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=a,g[5]=i,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new sl).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ol.setFromMatrixColumn(e,0).length(),a=1/ol.setFromMatrixColumn(e,1).length(),i=1/ol.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,a=e.z,i=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(a),u=Math.sin(a);if("XYZ"===e.order){const e=i*c,n=i*u,r=s*c,a=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+r*l,t[5]=e-a*l,t[9]=-s*o,t[2]=a-e*l,t[6]=r+n*l,t[10]=i*o}else if("YXZ"===e.order){const e=o*c,n=o*u,r=l*c,a=l*u;t[0]=e+a*s,t[4]=r*s-n,t[8]=i*l,t[1]=i*u,t[5]=i*c,t[9]=-s,t[2]=n*s-r,t[6]=a+e*s,t[10]=i*o}else if("ZXY"===e.order){const e=o*c,n=o*u,r=l*c,a=l*u;t[0]=e-a*s,t[4]=-i*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=i*c,t[9]=a-e*s,t[2]=-i*l,t[6]=s,t[10]=i*o}else if("ZYX"===e.order){const e=i*c,n=i*u,r=s*c,a=s*u;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+a,t[1]=o*u,t[5]=a*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=i*o}else if("YZX"===e.order){const e=i*o,n=i*l,r=s*o,a=s*l;t[0]=o*c,t[4]=a-e*u,t[8]=r*u+n,t[1]=u,t[5]=i*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-a*u}else if("XZY"===e.order){const e=i*o,n=i*l,r=s*o,a=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+a,t[5]=i*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=a*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(cl,e,ul)}lookAt(e,t,n){const r=this.elements;return pl.subVectors(e,t),0===pl.lengthSq()&&(pl.z=1),pl.normalize(),dl.crossVectors(n,pl),0===dl.lengthSq()&&(1===Math.abs(n.z)?pl.x+=1e-4:pl.z+=1e-4,pl.normalize(),dl.crossVectors(n,pl)),dl.normalize(),hl.crossVectors(pl,dl),r[0]=dl.x,r[4]=hl.x,r[8]=pl.x,r[1]=dl.y,r[5]=hl.y,r[9]=pl.y,r[2]=dl.z,r[6]=hl.z,r[10]=pl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,a=this.elements,i=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],x=n[7],y=n[11],b=n[15],_=r[0],w=r[4],S=r[8],E=r[12],M=r[1],T=r[5],N=r[9],A=r[13],C=r[2],R=r[6],P=r[10],k=r[14],L=r[3],j=r[7],D=r[11],U=r[15];return a[0]=i*_+s*M+o*C+l*L,a[4]=i*w+s*T+o*R+l*j,a[8]=i*S+s*N+o*P+l*D,a[12]=i*E+s*A+o*k+l*U,a[1]=c*_+u*M+d*C+h*L,a[5]=c*w+u*T+d*R+h*j,a[9]=c*S+u*N+d*P+h*D,a[13]=c*E+u*A+d*k+h*U,a[2]=p*_+m*M+f*C+g*L,a[6]=p*w+m*T+f*R+g*j,a[10]=p*S+m*N+f*P+g*D,a[14]=p*E+m*A+f*k+g*U,a[3]=v*_+x*M+y*C+b*L,a[7]=v*w+x*T+y*R+b*j,a[11]=v*S+x*N+y*P+b*D,a[15]=v*E+x*A+y*k+b*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],i=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+a*o*u-r*l*u-a*s*d+n*l*d+r*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+a*i*d-r*i*h+r*l*c-a*o*c)+e[11]*(+t*l*u-t*s*h-a*i*u+n*i*h+a*s*c-n*l*c)+e[15]*(-r*s*c-t*o*u+t*s*d+r*i*u-n*i*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=u*f*l-m*d*l+m*o*h-s*f*h-u*o*g+s*d*g,x=p*d*l-c*f*l-p*o*h+i*f*h+c*o*g-i*d*g,y=c*m*l-p*u*l+p*s*h-i*m*h-c*s*g+i*u*g,b=p*u*o-c*m*o-p*s*d+i*m*d+c*s*f-i*u*f,_=t*v+n*x+r*y+a*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(m*d*a-u*f*a-m*r*h+n*f*h+u*r*g-n*d*g)*w,e[2]=(s*f*a-m*o*a+m*r*l-n*f*l-s*r*g+n*o*g)*w,e[3]=(u*o*a-s*d*a-u*r*l+n*d*l+s*r*h-n*o*h)*w,e[4]=x*w,e[5]=(c*f*a-p*d*a+p*r*h-t*f*h-c*r*g+t*d*g)*w,e[6]=(p*o*a-i*f*a-p*r*l+t*f*l+i*r*g-t*o*g)*w,e[7]=(i*d*a-c*o*a+c*r*l-t*d*l-i*r*h+t*o*h)*w,e[8]=y*w,e[9]=(p*u*a-c*m*a-p*n*h+t*m*h+c*n*g-t*u*g)*w,e[10]=(i*m*a-p*s*a+p*n*l-t*m*l-i*n*g+t*s*g)*w,e[11]=(c*s*a-i*u*a-c*n*l+t*u*l+i*n*h-t*s*h)*w,e[12]=b*w,e[13]=(c*m*r-p*u*r+p*n*d-t*m*d-c*n*f+t*u*f)*w,e[14]=(p*s*r-i*m*r-p*n*o+t*m*o+i*n*f-t*s*f)*w,e[15]=(i*u*r-c*s*r+c*n*o-t*u*o-i*n*d+t*s*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),a=1-n,i=e.x,s=e.y,o=e.z,l=a*i,c=a*s;return this.set(l*i+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*i,0,l*o-r*s,c*o+r*i,a*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,a,i){return this.set(1,n,a,0,e,1,i,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,a=t._x,i=t._y,s=t._z,o=t._w,l=a+a,c=i+i,u=s+s,d=a*l,h=a*c,p=a*u,m=i*c,f=i*u,g=s*u,v=o*l,x=o*c,y=o*u,b=n.x,_=n.y,w=n.z;return r[0]=(1-(m+g))*b,r[1]=(h+y)*b,r[2]=(p-x)*b,r[3]=0,r[4]=(h-y)*_,r[5]=(1-(d+g))*_,r[6]=(f+v)*_,r[7]=0,r[8]=(p+x)*w,r[9]=(f-v)*w,r[10]=(1-(d+m))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let a=ol.set(r[0],r[1],r[2]).length();const i=ol.set(r[4],r[5],r[6]).length(),s=ol.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],ll.copy(this);const o=1/a,l=1/i,c=1/s;return ll.elements[0]*=o,ll.elements[1]*=o,ll.elements[2]*=o,ll.elements[4]*=l,ll.elements[5]*=l,ll.elements[6]*=l,ll.elements[8]*=c,ll.elements[9]*=c,ll.elements[10]*=c,t.setFromRotationMatrix(ll),n.x=a,n.y=i,n.z=s,this}makePerspective(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gs;const o=this.elements,l=2*a/(t-e),c=2*a/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let h,p;if(s===Gs)h=-(i+a)/(i-a),p=-2*i*a/(i-a);else{if(s!==Ws)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-i/(i-a),p=-i*a/(i-a)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gs;const o=this.elements,l=1/(t-e),c=1/(n-r),u=1/(i-a),d=(t+e)*l,h=(n+r)*c;let p,m;if(s===Gs)p=(i+a)*u,m=-2*u;else{if(s!==Ws)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=a*u,m=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=m,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ol=new Ro,ll=new sl,cl=new Ro(0,0,0),ul=new Ro(1,1,1),dl=new Ro,hl=new Ro,pl=new Ro,ml=new sl,fl=new Co;class gl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gl.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,a=r[0],i=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Zs(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-i,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Zs(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,a),this._z=0);break;case"ZXY":this._x=Math.asin(Zs(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-i,l)):(this._y=0,this._z=Math.atan2(o,a));break;case"ZYX":this._y=Math.asin(-Zs(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,a)):(this._x=0,this._z=Math.atan2(-i,l));break;case"YZX":this._z=Math.asin(Zs(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Zs(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ml.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ml,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return fl.setFromEuler(this),this.setFromQuaternion(fl,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gl.DEFAULT_ORDER="XYZ";class vl{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let xl=0;const yl=new Ro,bl=new Co,_l=new sl,wl=new Ro,Sl=new Ro,El=new Ro,Ml=new Co,Tl=new Ro(1,0,0),Nl=new Ro(0,1,0),Al=new Ro(0,0,1),Cl={type:"added"},Rl={type:"removed"},Pl={type:"childadded",child:null},kl={type:"childremoved",child:null};class Ll extends qs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xl++}),this.uuid=Js(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ll.DEFAULT_UP.clone();const e=new Ro,t=new gl,n=new Co,r=new Ro(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new sl},normalMatrix:{value:new ro}}),this.matrix=new sl,this.matrixWorld=new sl,this.matrixAutoUpdate=Ll.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ll.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new vl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bl.setFromAxisAngle(e,t),this.quaternion.multiply(bl),this}rotateOnWorldAxis(e,t){return bl.setFromAxisAngle(e,t),this.quaternion.premultiply(bl),this}rotateX(e){return this.rotateOnAxis(Tl,e)}rotateY(e){return this.rotateOnAxis(Nl,e)}rotateZ(e){return this.rotateOnAxis(Al,e)}translateOnAxis(e,t){return yl.copy(e).applyQuaternion(this.quaternion),this.position.add(yl.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Tl,e)}translateY(e){return this.translateOnAxis(Nl,e)}translateZ(e){return this.translateOnAxis(Al,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_l.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?wl.copy(e):wl.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Sl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_l.lookAt(Sl,wl,this.up):_l.lookAt(wl,Sl,this.up),this.quaternion.setFromRotationMatrix(_l),r&&(_l.extractRotation(r.matrixWorld),bl.setFromRotationMatrix(_l),this.quaternion.premultiply(bl.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Cl),Pl.child=e,this.dispatchEvent(Pl),Pl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Rl),kl.child=e,this.dispatchEvent(kl),kl.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_l.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),_l.multiply(e.parent.matrixWorld)),e.applyMatrix4(_l),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Cl),Pl.child=e,this.dispatchEvent(Pl),Pl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let a=0,i=r.length;a<i;a++)r[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sl,e,El),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sl,Ml,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map((e=>c(c({},e),{},{boundingBox:e.boundingBox?{min:e.boundingBox.min.toArray(),max:e.boundingBox.max.toArray()}:void 0,boundingSphere:e.boundingSphere?{radius:e.boundingSphere.radius,center:e.boundingSphere.center.toArray()}:void 0}))),r.instanceInfo=this._instanceInfo.map((e=>c({},e))),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];a(e.shapes,r)}else a(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(a(e.materials,this.material[n]));r.material=t}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(a(e.animations,n))}}if(t){const t=i(e.geometries),r=i(e.materials),a=i(e.textures),s=i(e.images),o=i(e.shapes),l=i(e.skeletons),c=i(e.animations),u=i(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),a.length>0&&(n.textures=a),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function i(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Ll.DEFAULT_UP=new Ro(0,1,0),Ll.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ll.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const jl=new Ro,Dl=new Ro,Ul=new Ro,Il=new Ro,Ol=new Ro,Fl=new Ro,zl=new Ro,Bl=new Ro,Hl=new Ro,Vl=new Ro,Gl=new Eo,Wl=new Eo,ql=new Eo;class Xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ro,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ro,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ro;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),jl.subVectors(e,t),r.cross(jl);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,n,r,a){jl.subVectors(r,t),Dl.subVectors(n,t),Ul.subVectors(e,t);const i=jl.dot(jl),s=jl.dot(Dl),o=jl.dot(Ul),l=Dl.dot(Dl),c=Dl.dot(Ul),u=i*l-s*s;if(0===u)return a.set(0,0,0),null;const d=1/u,h=(l*o-s*c)*d,p=(i*c-s*o)*d;return a.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Il)&&(Il.x>=0&&Il.y>=0&&Il.x+Il.y<=1)}static getInterpolation(e,t,n,r,a,i,s,o){return null===this.getBarycoord(e,t,n,r,Il)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(a,Il.x),o.addScaledVector(i,Il.y),o.addScaledVector(s,Il.z),o)}static getInterpolatedAttribute(e,t,n,r,a,i){return Gl.setScalar(0),Wl.setScalar(0),ql.setScalar(0),Gl.fromBufferAttribute(e,t),Wl.fromBufferAttribute(e,n),ql.fromBufferAttribute(e,r),i.setScalar(0),i.addScaledVector(Gl,a.x),i.addScaledVector(Wl,a.y),i.addScaledVector(ql,a.z),i}static isFrontFacing(e,t,n,r){return jl.subVectors(n,t),Dl.subVectors(e,t),jl.cross(Dl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jl.subVectors(this.c,this.b),Dl.subVectors(this.a,this.b),.5*jl.cross(Dl).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xl.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,a){return Xl.getInterpolation(e,this.a,this.b,this.c,t,n,r,a)}containsPoint(e){return Xl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,a=this.c;let i,s;Ol.subVectors(r,n),Fl.subVectors(a,n),Bl.subVectors(e,n);const o=Ol.dot(Bl),l=Fl.dot(Bl);if(o<=0&&l<=0)return t.copy(n);Hl.subVectors(e,r);const c=Ol.dot(Hl),u=Fl.dot(Hl);if(c>=0&&u<=c)return t.copy(r);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return i=o/(o-c),t.copy(n).addScaledVector(Ol,i);Vl.subVectors(e,a);const h=Ol.dot(Vl),p=Fl.dot(Vl);if(p>=0&&h<=p)return t.copy(a);const m=h*l-o*p;if(m<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(Fl,s);const f=c*p-h*u;if(f<=0&&u-c>=0&&h-p>=0)return zl.subVectors(a,r),s=(u-c)/(u-c+(h-p)),t.copy(r).addScaledVector(zl,s);const g=1/(f+m+d);return i=m*g,s=d*g,t.copy(n).addScaledVector(Ol,i).addScaledVector(Fl,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Yl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kl={h:0,s:0,l:0},Jl={h:0,s:0,l:0};function Zl(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class $l{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,mo.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mo.workingColorSpace;return this.r=e,this.g=t,this.b=n,mo.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mo.workingColorSpace;if(e=$s(e,1),t=Zs(t,0,1),n=Zs(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=Zl(a,r,e+1/3),this.g=Zl(a,r,e),this.b=Zl(a,r,e-1/3)}return mo.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const i=t[1],s=t[2];switch(i){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],a=r.length;if(3===a)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===a)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs;const n=Yl[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=fo(e.r),this.g=fo(e.g),this.b=fo(e.b),this}copyLinearToSRGB(e){return this.r=go(e.r),this.g=go(e.g),this.b=go(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return mo.fromWorkingColorSpace(Ql.copy(this),e),65536*Math.round(Zs(255*Ql.r,0,255))+256*Math.round(Zs(255*Ql.g,0,255))+Math.round(Zs(255*Ql.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo.workingColorSpace;mo.fromWorkingColorSpace(Ql.copy(this),t);const n=Ql.r,r=Ql.g,a=Ql.b,i=Math.max(n,r,a),s=Math.min(n,r,a);let o,l;const c=(s+i)/2;if(s===i)o=0,l=0;else{const e=i-s;switch(l=c<=.5?e/(i+s):e/(2-i-s),i){case n:o=(r-a)/e+(r<a?6:0);break;case r:o=(a-n)/e+2;break;case a:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo.workingColorSpace;return mo.fromWorkingColorSpace(Ql.copy(this),t),e.r=Ql.r,e.g=Ql.g,e.b=Ql.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;mo.fromWorkingColorSpace(Ql.copy(this),e);const t=Ql.r,n=Ql.g,r=Ql.b;return e!==Cs?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(e,t,n){return this.getHSL(Kl),this.setHSL(Kl.h+e,Kl.s+t,Kl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Kl),e.getHSL(Jl);const n=Qs(Kl.h,Jl.h,t),r=Qs(Kl.s,Jl.s,t),a=Qs(Kl.l,Jl.l,t);return this.setHSL(n,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*r,this.g=a[1]*t+a[4]*n+a[7]*r,this.b=a[2]*t+a[5]*n+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ql=new $l;$l.NAMES=Yl;let ec=0;class tc extends qs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ec++}),this.uuid=Js(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=za,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $l(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ls,this.stencilZFail=Ls,this.stencilZPass=Ls,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==za&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ls&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ls&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ls&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),a=r(e.images);t.length>0&&(n.textures=t),a.length>0&&(n.images=a)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class nc extends tc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $l(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gl,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rc=new Ro,ac=new no;let ic=0;class sc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:ic++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Hs,this.updateRanges=[],this.gpuType=ki,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ac.fromBufferAttribute(this,t),ac.applyMatrix3(e),this.setXY(t,ac.x,ac.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)rc.fromBufferAttribute(this,t),rc.applyMatrix3(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)rc.fromBufferAttribute(this,t),rc.applyMatrix4(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rc.fromBufferAttribute(this,t),rc.applyNormalMatrix(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rc.fromBufferAttribute(this,t),rc.transformDirection(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=eo(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=to(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=eo(t,this.array)),t}setX(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=eo(t,this.array)),t}setY(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=eo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=eo(t,this.array)),t}setW(e,t){return this.normalized&&(t=to(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=to(t,this.array),n=to(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=to(t,this.array),n=to(n,this.array),r=to(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,a){return e*=this.itemSize,this.normalized&&(t=to(t,this.array),n=to(n,this.array),r=to(r,this.array),a=to(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Hs&&(e.usage=this.usage),e}}class oc extends sc{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class lc extends sc{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class cc extends sc{constructor(e,t,n){super(new Float32Array(e),t,n)}}let uc=0;const dc=new sl,hc=new Ll,pc=new Ro,mc=new Lo,fc=new Lo,gc=new Ro;class vc extends qs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uc++}),this.uuid=Js(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(io(e)?lc:oc)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new ro).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return dc.makeRotationFromQuaternion(e),this.applyMatrix4(dc),this}rotateX(e){return dc.makeRotationX(e),this.applyMatrix4(dc),this}rotateY(e){return dc.makeRotationY(e),this.applyMatrix4(dc),this}rotateZ(e){return dc.makeRotationZ(e),this.applyMatrix4(dc),this}translate(e,t,n){return dc.makeTranslation(e,t,n),this.applyMatrix4(dc),this}scale(e,t,n){return dc.makeScale(e,t,n),this.applyMatrix4(dc),this}lookAt(e){return hc.lookAt(e),hc.updateMatrix(),this.applyMatrix4(hc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pc).negate(),this.translate(pc.x,pc.y,pc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new cc(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Lo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Ro(-1/0,-1/0,-1/0),new Ro(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];mc.setFromBufferAttribute(e),this.morphTargetsRelative?(gc.addVectors(this.boundingBox.min,mc.min),this.boundingBox.expandByPoint(gc),gc.addVectors(this.boundingBox.max,mc.max),this.boundingBox.expandByPoint(gc)):(this.boundingBox.expandByPoint(mc.min),this.boundingBox.expandByPoint(mc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Zo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Ro,1/0);if(e){const n=this.boundingSphere.center;if(mc.setFromBufferAttribute(e),t)for(let e=0,a=t.length;e<a;e++){const n=t[e];fc.setFromBufferAttribute(n),this.morphTargetsRelative?(gc.addVectors(mc.min,fc.min),mc.expandByPoint(gc),gc.addVectors(mc.max,fc.max),mc.expandByPoint(gc)):(mc.expandByPoint(fc.min),mc.expandByPoint(fc.max))}mc.getCenter(n);let r=0;for(let t=0,a=e.count;t<a;t++)gc.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(gc));if(t)for(let a=0,i=t.length;a<i;a++){const i=t[a],s=this.morphTargetsRelative;for(let t=0,a=i.count;t<a;t++)gc.fromBufferAttribute(i,t),s&&(pc.fromBufferAttribute(e,t),gc.add(pc)),r=Math.max(r,n.distanceToSquared(gc))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,a=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new sc(new Float32Array(4*n.count),4));const i=this.getAttribute("tangent"),s=[],o=[];for(let S=0;S<n.count;S++)s[S]=new Ro,o[S]=new Ro;const l=new Ro,c=new Ro,u=new Ro,d=new no,h=new no,p=new no,m=new Ro,f=new Ro;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),d.fromBufferAttribute(a,e),h.fromBufferAttribute(a,t),p.fromBufferAttribute(a,r),c.sub(l),u.sub(l),h.sub(d),p.sub(d);const i=1/(h.x*p.y-p.x*h.y);isFinite(i)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(u,-h.y).multiplyScalar(i),f.copy(u).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(i),s[e].add(m),s[t].add(m),s[r].add(m),o[e].add(f),o[t].add(f),o[r].add(f))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let S=0,E=v.length;S<E;++S){const t=v[S],n=t.start;for(let r=n,a=n+t.count;r<a;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const x=new Ro,y=new Ro,b=new Ro,_=new Ro;function w(e){b.fromBufferAttribute(r,e),_.copy(b);const t=s[e];x.copy(t),x.sub(b.multiplyScalar(b.dot(t))).normalize(),y.crossVectors(_,t);const n=y.dot(o[e])<0?-1:1;i.setXYZW(e,x.x,x.y,x.z,n)}for(let S=0,E=v.length;S<E;++S){const t=v[S],n=t.start;for(let r=n,a=n+t.count;r<a;r+=3)w(e.getX(r+0)),w(e.getX(r+1)),w(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new sc(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Ro,a=new Ro,i=new Ro,s=new Ro,o=new Ro,l=new Ro,c=new Ro,u=new Ro;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),m=e.getX(d+2);r.fromBufferAttribute(t,h),a.fromBufferAttribute(t,p),i.fromBufferAttribute(t,m),c.subVectors(i,a),u.subVectors(r,a),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),a.fromBufferAttribute(t,e+1),i.fromBufferAttribute(t,e+2),c.subVectors(i,a),u.subVectors(r,a),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)gc.fromBufferAttribute(e,t),gc.normalize(),e.setXYZ(t,gc.x,gc.y,gc.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,a=e.normalized,i=new n.constructor(t.length*r);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)i[o++]=n[s++]}return new sc(i,r,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vc,n=this.index.array,r=this.attributes;for(const s in r){const a=e(r[s],n);t.setAttribute(s,a)}const a=this.morphAttributes;for(const s in a){const r=[],i=a[s];for(let t=0,a=i.length;t<a;t++){const a=e(i[t],n);r.push(a)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let s=0,o=i.length;s<o;s++){const e=i[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let a=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,a=t.length;r<a;r++){const a=t[r];n.push(a.toJSON(e.data))}n.length>0&&(r[o]=n,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(e.data.groups=JSON.parse(JSON.stringify(i)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const a=e.morphAttributes;for(const l in a){const e=[],n=a[l];for(let r=0,a=n.length;r<a;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const i=e.groups;for(let l=0,c=i.length;l<c;l++){const e=i[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xc=new sl,yc=new il,bc=new Zo,_c=new Ro,wc=new Ro,Sc=new Ro,Ec=new Ro,Mc=new Ro,Tc=new Ro,Nc=new Ro,Ac=new Ro;class Cc extends Ll{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nc;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,a=n.morphAttributes.position,i=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(a&&s){Tc.set(0,0,0);for(let n=0,r=a.length;n<r;n++){const r=s[n],o=a[n];0!==r&&(Mc.fromBufferAttribute(o,e),i?Tc.addScaledVector(Mc,r):Tc.addScaledVector(Mc.sub(t),r))}t.add(Tc)}return t}raycast(e,t){const n=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),bc.copy(n.boundingSphere),bc.applyMatrix4(a),yc.copy(e.ray).recast(e.near),!1===bc.containsPoint(yc.origin)){if(null===yc.intersectSphere(bc,_c))return;if(yc.origin.distanceToSquared(_c)>(e.far-e.near)**2)return}xc.copy(a).invert(),yc.copy(e.ray).applyMatrix4(xc),null!==n.boundingBox&&!1===yc.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,yc)}}_computeIntersections(e,t,n){let r;const a=this.geometry,i=this.material,s=a.index,o=a.attributes.position,l=a.attributes.uv,c=a.attributes.uv1,u=a.attributes.normal,d=a.groups,h=a.drawRange;if(null!==s)if(Array.isArray(i))for(let p=0,m=d.length;p<m;p++){const a=d[p],o=i[a.materialIndex];for(let i=Math.max(a.start,h.start),d=Math.min(s.count,Math.min(a.start+a.count,h.start+h.count));i<d;i+=3){r=Rc(this,o,e,n,l,c,u,s.getX(i),s.getX(i+1),s.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,t.push(r))}}else{for(let a=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);a<o;a+=3){r=Rc(this,i,e,n,l,c,u,s.getX(a),s.getX(a+1),s.getX(a+2)),r&&(r.faceIndex=Math.floor(a/3),t.push(r))}}else if(void 0!==o)if(Array.isArray(i))for(let p=0,m=d.length;p<m;p++){const a=d[p],s=i[a.materialIndex];for(let i=Math.max(a.start,h.start),d=Math.min(o.count,Math.min(a.start+a.count,h.start+h.count));i<d;i+=3){r=Rc(this,s,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,t.push(r))}}else{for(let a=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);a<s;a+=3){r=Rc(this,i,e,n,l,c,u,a,a+1,a+2),r&&(r.faceIndex=Math.floor(a/3),t.push(r))}}}}function Rc(e,t,n,r,a,i,s,o,l,c){e.getVertexPosition(o,wc),e.getVertexPosition(l,Sc),e.getVertexPosition(c,Ec);const u=function(e,t,n,r,a,i,s,o){let l;if(l=1===t.side?r.intersectTriangle(s,i,a,!0,o):r.intersectTriangle(a,i,s,0===t.side,o),null===l)return null;Ac.copy(o),Ac.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ac);return c<n.near||c>n.far?null:{distance:c,point:Ac.clone(),object:e}}(e,t,n,r,wc,Sc,Ec,Nc);if(u){const e=new Ro;Xl.getBarycoord(Nc,wc,Sc,Ec,e),a&&(u.uv=Xl.getInterpolatedAttribute(a,o,l,c,e,new no)),i&&(u.uv1=Xl.getInterpolatedAttribute(i,o,l,c,e,new no)),s&&(u.normal=Xl.getInterpolatedAttribute(s,o,l,c,e,new Ro),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new Ro,materialIndex:0};Xl.getNormal(wc,Sc,Ec,t.normal),u.face=t,u.barycoord=e}return u}class Pc extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:i};const s=this;r=Math.floor(r),a=Math.floor(a),i=Math.floor(i);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,r,a,i,p,m,f,g,v){const x=i/f,y=p/g,b=i/2,_=p/2,w=m/2,S=f+1,E=g+1;let M=0,T=0;const N=new Ro;for(let s=0;s<E;s++){const i=s*y-_;for(let o=0;o<S;o++){const d=o*x-b;N[e]=d*r,N[t]=i*a,N[n]=w,l.push(N.x,N.y,N.z),N[e]=0,N[t]=0,N[n]=m>0?1:-1,c.push(N.x,N.y,N.z),u.push(o/f),u.push(1-s/g),M+=1}}for(let s=0;s<g;s++)for(let e=0;e<f;e++){const t=d+e+S*s,n=d+e+S*(s+1),r=d+(e+1)+S*(s+1),a=d+(e+1)+S*s;o.push(t,n,a),o.push(n,r,a),T+=6}s.addGroup(h,T,v),h+=T,d+=M}p("z","y","x",-1,-1,n,t,e,i,a,0),p("z","y","x",1,-1,n,t,-e,i,a,1),p("x","z","y",1,1,e,n,t,r,i,2),p("x","z","y",1,-1,e,n,-t,r,i,3),p("x","y","z",1,-1,e,t,n,r,a,4),p("x","y","z",-1,-1,e,t,-n,r,a,5),this.setIndex(o),this.setAttribute("position",new cc(l,3)),this.setAttribute("normal",new cc(c,3)),this.setAttribute("uv",new cc(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kc(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const a=e[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=a.clone():Array.isArray(a)?t[n][r]=a.slice():t[n][r]=a}}return t}function Lc(e){const t={};for(let n=0;n<e.length;n++){const r=kc(e[n]);for(const e in r)t[e]=r[e]}return t}function jc(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:mo.workingColorSpace}const Dc={clone:kc,merge:Lc};class Uc extends tc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kc(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ic extends Ll{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sl,this.projectionMatrix=new sl,this.projectionMatrixInverse=new sl,this.coordinateSystem=Gs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Oc=new Ro,Fc=new no,zc=new no;class Bc extends Ic{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ks*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ys*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ks*Math.atan(Math.tan(.5*Ys*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Oc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Oc.x,Oc.y).multiplyScalar(-e/Oc.z),Oc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Oc.x,Oc.y).multiplyScalar(-e/Oc.z)}getViewSize(e,t){return this.getViewBounds(e,Fc,zc),t.subVectors(zc,Fc)}setViewOffset(e,t,n,r,a,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ys*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r;const i=this.view;if(null!==this.view&&this.view.enabled){const e=i.fullWidth,s=i.fullHeight;a+=i.offsetX*r/e,t-=i.offsetY*n/s,r*=i.width/e,n*=i.height/s}const s=this.filmOffset;0!==s&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Hc=-90;class Vc extends Ll{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Bc(Hc,1,e,t);r.layers=this.layers,this.add(r);const a=new Bc(Hc,1,e,t);a.layers=this.layers,this.add(a);const i=new Bc(Hc,1,e,t);i.layers=this.layers,this.add(i);const s=new Bc(Hc,1,e,t);s.layers=this.layers,this.add(s);const o=new Bc(Hc,1,e,t);o.layers=this.layers,this.add(o);const l=new Bc(Hc,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,a,i,s,o]=t;for(const l of t)this.remove(l);if(e===Gs)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),i.up.set(0,0,1),i.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Ws)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),i.up.set(0,0,-1),i.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,i,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,a),e.setRenderTarget(n,1,r),e.render(t,i),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Gc extends So{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:hi,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0,arguments.length>9?arguments[9]:void 0),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Wc extends To{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Gc(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Si}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Pc(5,5,5),s=new Uc({name:"CubemapFromEquirect",uniforms:kc(n),vertexShader:r,fragmentShader:a,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Cc(i,s),l=t.minFilter;t.minFilter===Mi&&(t.minFilter=Si);return new Vc(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(a)}}class qc extends Ll{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xc={type:"move"};class Yc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ro,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ro),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ro,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ro),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,a=null,i=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){i=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],a=l.joints["thumb-tip"],s=r.position.distanceTo(a.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),null!==a&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==a&&(r=a),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Xc)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==a),null!==l&&(l.visible=null!==i),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new qc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Kc extends Ll{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gl,this.environmentIntensity=1,this.environmentRotation=new gl,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const Jc=new Ro,Zc=new Ro,$c=new ro;class Qc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ro(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Jc.subVectors(n,t).cross(Zc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Jc),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||$c.getNormalMatrix(e),r=this.coplanarPoint(Jc).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const eu=new Zo,tu=new Ro;class nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Qc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Qc,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Qc,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Qc,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Qc;this.planes=[e,t,n,r,a,i]}set(e,t,n,r,a,i){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(a),s[5].copy(i),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gs;const n=this.planes,r=e.elements,a=r[0],i=r[1],s=r[2],o=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],p=r[9],m=r[10],f=r[11],g=r[12],v=r[13],x=r[14],y=r[15];if(n[0].setComponents(o-a,d-l,f-h,y-g).normalize(),n[1].setComponents(o+a,d+l,f+h,y+g).normalize(),n[2].setComponents(o+i,d+c,f+p,y+v).normalize(),n[3].setComponents(o-i,d-c,f-p,y-v).normalize(),n[4].setComponents(o-s,d-u,f-m,y-x).normalize(),t===Gs)n[5].setComponents(o+s,d+u,f+m,y+x).normalize();else{if(t!==Ws)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,m,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),eu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),eu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(eu)}intersectsSprite(e){return eu.center.set(0,0,0),eu.radius=.7071067811865476,eu.applyMatrix4(e.matrixWorld),this.intersectsSphere(eu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let a=0;a<6;a++){if(t[a].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(tu.x=r.normal.x>0?e.max.x:e.min.x,tu.y=r.normal.y>0?e.max.y:e.min.y,tu.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(tu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class ru extends tc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $l(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const au=new Ro,iu=new Ro,su=new sl,ou=new il,lu=new Zo,cu=new Ro,uu=new Ro;class du extends Ll{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ru;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)au.fromBufferAttribute(t,e-1),iu.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=au.distanceTo(iu);e.setAttribute("lineDistance",new cc(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),lu.copy(n.boundingSphere),lu.applyMatrix4(r),lu.radius+=a,!1===e.ray.intersectsSphere(lu))return;su.copy(r).invert(),ou.copy(e.ray).applyMatrix4(su);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,i.start),r=Math.min(c.count,i.start+i.count);for(let a=n,i=r-1;a<i;a+=l){const n=c.getX(a),r=c.getX(a+1),i=hu(this,e,ou,o,n,r,a);i&&t.push(i)}if(this.isLineLoop){const a=c.getX(r-1),i=c.getX(n),s=hu(this,e,ou,o,a,i,r-1);s&&t.push(s)}}else{const n=Math.max(0,i.start),r=Math.min(u.count,i.start+i.count);for(let a=n,i=r-1;a<i;a+=l){const n=hu(this,e,ou,o,a,a+1,a);n&&t.push(n)}if(this.isLineLoop){const a=hu(this,e,ou,o,r-1,n,r-1);a&&t.push(a)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function hu(e,t,n,r,a,i,s){const o=e.geometry.attributes.position;au.fromBufferAttribute(o,a),iu.fromBufferAttribute(o,i);if(n.distanceSqToSegment(au,iu,cu,uu)>r)return;cu.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(cu);return l<t.near||l>t.far?void 0:{distance:l,point:uu.clone().applyMatrix4(e.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:e}}const pu=new Ro,mu=new Ro;class fu extends du{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)pu.fromBufferAttribute(t,e),mu.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+pu.distanceTo(mu);e.setAttribute("lineDistance",new cc(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gu extends tc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $l(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const vu=new sl,xu=new il,yu=new Zo,bu=new Ro;class _u extends Ll{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gu;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),yu.copy(n.boundingSphere),yu.applyMatrix4(r),yu.radius+=a,!1===e.ray.intersectsSphere(yu))return;vu.copy(r).invert(),xu.copy(e.ray).applyMatrix4(vu);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,i.start),a=Math.min(l.count,i.start+i.count);n<a;n++){const a=l.getX(n);bu.fromBufferAttribute(c,a),wu(bu,a,o,r,e,t,this)}}else{for(let n=Math.max(0,i.start),a=Math.min(c.count,i.start+i.count);n<a;n++)bu.fromBufferAttribute(c,n),wu(bu,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function wu(e,t,n,r,a,i,s){const o=xu.distanceSqToPoint(e);if(o<n){const n=new Ro;xu.closestPointToPoint(e,n),n.applyMatrix4(r);const l=a.ray.origin.distanceTo(n);if(l<a.near||l>a.far)return;i.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class Su extends So{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pi,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bi,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:bi,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Fi;if(c!==Fi&&c!==zi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,a,i,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new bo(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Eu extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const a=e/2,i=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,u=e/s,d=t/o,h=[],p=[],m=[],f=[];for(let g=0;g<c;g++){const e=g*d-i;for(let t=0;t<l;t++){const n=t*u-a;p.push(n,-e,0),m.push(0,0,1),f.push(t/s),f.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),a=e+1+l*g;h.push(t,n,a),h.push(n,r,a)}this.setIndex(h),this.setAttribute("position",new cc(p,3)),this.setAttribute("normal",new cc(m,3)),this.setAttribute("uv",new cc(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eu(e.width,e.height,e.widthSegments,e.heightSegments)}}class Mu extends vc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:a,thetaStart:i,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(i+s,Math.PI);let l=0;const c=[],u=new Ro,d=new Ro,h=[],p=[],m=[],f=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let x=0;0===g&&0===i?x=.5/t:g===n&&o===Math.PI&&(x=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(r+o*a)*Math.sin(i+v*s),u.y=e*Math.cos(i+v*s),u.z=e*Math.sin(r+o*a)*Math.sin(i+v*s),p.push(u.x,u.y,u.z),d.copy(u).normalize(),m.push(d.x,d.y,d.z),f.push(o+x,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],a=c[g+1][e],s=c[g+1][e+1];(0!==g||i>0)&&h.push(t,r,s),(g!==n-1||o<Math.PI)&&h.push(r,a,s)}this.setIndex(h),this.setAttribute("position",new cc(p,3)),this.setAttribute("normal",new cc(m,3)),this.setAttribute("uv",new cc(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Tu extends tc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Nu extends tc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Au(e,t){return e&&e.constructor!==t?"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Cu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class Ru{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{let i;n:{r:if(!(e<r)){for(let i=n+2;;){if(void 0===r){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===i)break;if(a=r,r=t[++n],e<r)break t}i=t.length;break n}if(e>=a)break e;{const s=t[1];e<s&&(n=2,a=s);for(let i=n-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(n===i)break;if(r=a,a=t[--n-1],e>=a)break t}i=n,n=0}}for(;n<i;){const r=n+i>>>1;e<t[r]?i=r:n=r+1}if(r=t[n],a=t[n-1],void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r;for(let i=0;i!==r;++i)t[i]=n[a+i];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Pu extends Ru{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ms,endingEnd:Ms}}intervalChanged_(e,t,n){const r=this.parameterPositions;let a=e-2,i=e+1,s=r[a],o=r[i];if(void 0===s)switch(this.getSettings_().endingStart){case Ts:a=e,s=2*t-n;break;case Ns:a=r.length-2,s=t+r[a]-r[a+1];break;default:a=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Ts:i=e,o=2*n-t;break;case Ns:i=1,o=n+r[1]-r[0];break;default:i=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=a*c,this._offsetNext=i*c}interpolate_(e,t,n,r){const a=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),m=p*p,f=m*p,g=-d*f+2*d*m-d*p,v=(1+d)*f+(-1.5-2*d)*m+(-.5+d)*p+1,x=(-1-h)*f+(1.5+h)*m+.5*p,y=h*f-h*m;for(let b=0;b!==s;++b)a[b]=g*i[c+b]+v*i[l+b]+x*i[o+b]+y*i[u+b];return a}}class ku extends Ru{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const a=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==s;++d)a[d]=i[l+d]*u+i[o+d]*c;return a}}class Lu extends Ru{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ju{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Au(t,this.TimeBufferType),this.values=Au(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Au(e.times,Array),values:Au(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Lu(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ku(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Pu(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ws:t=this.InterpolantFactoryMethodDiscrete;break;case Ss:t=this.InterpolantFactoryMethodLinear;break;case Es:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ws;case this.InterpolantFactoryMethodLinear:return Ss;case this.InterpolantFactoryMethodSmooth:return Es}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let a=0,i=r-1;for(;a!==r&&n[a]<e;)++a;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==a||i!==r){a>=i&&(i=Math.max(i,1),a=i-1);const e=this.getValueSize();this.times=n.slice(a,i),this.values=this.values.slice(a*e,i*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let i=null;for(let s=0;s!==a;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==i&&i>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,i),e=!1;break}i=t}if(void 0!==r&&Cu(r))for(let s=0,o=r.length;s!==o;++s){const t=r[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Es,a=e.length-1;let i=1;for(let s=1;s<a;++s){let a=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(r)a=!0;else{const e=s*n,r=e-n,i=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[i+s]){a=!0;break}}}if(a){if(s!==i){e[i]=e[s];const r=s*n,a=i*n;for(let e=0;e!==n;++e)t[a+e]=t[r+e]}++i}}if(a>0){e[i]=e[a];for(let e=a*n,r=i*n,s=0;s!==n;++s)t[r+s]=t[e+s];++i}return i!==e.length?(this.times=e.slice(0,i),this.values=t.slice(0,i*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ju.prototype.ValueTypeName="",ju.prototype.TimeBufferType=Float32Array,ju.prototype.ValueBufferType=Float32Array,ju.prototype.DefaultInterpolation=Ss;class Du extends ju{constructor(e,t,n){super(e,t,n)}}Du.prototype.ValueTypeName="bool",Du.prototype.ValueBufferType=Array,Du.prototype.DefaultInterpolation=ws,Du.prototype.InterpolantFactoryMethodLinear=void 0,Du.prototype.InterpolantFactoryMethodSmooth=void 0;class Uu extends ju{constructor(e,t,n,r){super(e,t,n,r)}}Uu.prototype.ValueTypeName="color";class Iu extends ju{constructor(e,t,n,r){super(e,t,n,r)}}Iu.prototype.ValueTypeName="number";class Ou extends Ru{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const a=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)Co.slerpFlat(a,0,i,l-s,i,l,o);return a}}class Fu extends ju{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new Ou(this.times,this.values,this.getValueSize(),e)}}Fu.prototype.ValueTypeName="quaternion",Fu.prototype.InterpolantFactoryMethodSmooth=void 0;class zu extends ju{constructor(e,t,n){super(e,t,n)}}zu.prototype.ValueTypeName="string",zu.prototype.ValueBufferType=Array,zu.prototype.DefaultInterpolation=ws,zu.prototype.InterpolantFactoryMethodLinear=void 0,zu.prototype.InterpolantFactoryMethodSmooth=void 0;class Bu extends ju{constructor(e,t,n,r){super(e,t,n,r)}}Bu.prototype.ValueTypeName="vector";class Hu{constructor(e,t,n){const r=this;let a,i=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,s,o),i=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Vu=new Hu;class Gu{constructor(e){this.manager=void 0!==e?e:Vu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,a){n.load(e,r,t,a)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Gu.DEFAULT_MATERIAL_NAME="__DEFAULT";Error;class Wu extends Ll{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new $l(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const qu=new sl,Xu=new Ro,Yu=new Ro;class Ku{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new no(512,512),this.mapType=Ti,this.map=null,this.mapPass=null,this.matrix=new sl,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new nu,this._frameExtents=new no(1,1),this._viewportCount=1,this._viewports=[new Eo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Xu.setFromMatrixPosition(e.matrixWorld),t.position.copy(Xu),Yu.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Yu),t.updateMatrixWorld(),qu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qu),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qu)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const Ju=new sl,Zu=new Ro,$u=new Ro;class Qu extends Ku{constructor(){super(new Bc(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new no(4,2),this._viewportCount=6,this._viewports=[new Eo(2,1,1,1),new Eo(0,1,1,1),new Eo(3,1,1,1),new Eo(1,1,1,1),new Eo(3,0,1,1),new Eo(1,0,1,1)],this._cubeDirections=[new Ro(1,0,0),new Ro(-1,0,0),new Ro(0,0,1),new Ro(0,0,-1),new Ro(0,1,0),new Ro(0,-1,0)],this._cubeUps=[new Ro(0,1,0),new Ro(0,1,0),new Ro(0,1,0),new Ro(0,1,0),new Ro(0,0,1),new Ro(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Zu.setFromMatrixPosition(e.matrixWorld),n.position.copy(Zu),$u.copy(n.position),$u.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt($u),n.updateMatrixWorld(),r.makeTranslation(-Zu.x,-Zu.y,-Zu.z),Ju.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ju)}}class ed extends Wu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Qu}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class td extends Ic{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=a,this.far=i,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,a,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=n-e,i=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=e*this.view.offsetX,i=a+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(a,i,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class nd extends Wu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class rd extends Bc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}const ad="\\[\\]\\.:\\/",id=new RegExp("["+ad+"]","g"),sd="[^"+ad+"]",od="[^"+ad.replace("\\.","")+"]",ld=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",sd)+/(WCOD+)?/.source.replace("WCOD",od)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sd)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sd)+"$"),cd=["material","materials","bones","map"];class ud{constructor(e,t,n){this.path=t,this.parsedPath=n||ud.parseTrackName(t),this.node=ud.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ud.Composite(e,t,n):new ud(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(id,"")}static parseTrackName(e){const t=ld.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==cd.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const a=e[r];if(a.name===t||a.uuid===t)return a;const i=n(a.children);if(i)return i}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=ud.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const i=e[r];if(void 0===i){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[a]&&(a=e.morphTargetDictionary[a])}o=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=a}else void 0!==i.fromArray&&void 0!==i.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(o=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ud.Composite=class{constructor(e,t,n){const r=n||ud.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},ud.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ud.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ud.prototype.GetterByBindingType=[ud.prototype._getValue_direct,ud.prototype._getValue_array,ud.prototype._getValue_arrayElement,ud.prototype._getValue_toArray],ud.prototype.SetterByBindingTypeAndVersioning=[[ud.prototype._setValue_direct,ud.prototype._setValue_direct_setNeedsUpdate,ud.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ud.prototype._setValue_array,ud.prototype._setValue_array_setNeedsUpdate,ud.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ud.prototype._setValue_arrayElement,ud.prototype._setValue_arrayElement_setNeedsUpdate,ud.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ud.prototype._setValue_fromArray,ud.prototype._setValue_fromArray_setNeedsUpdate,ud.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);function dd(e,t,n,r){const a=function(e){switch(e){case Ti:case Ni:return{byteLength:1,components:1};case Ci:case Ai:case Li:return{byteLength:2,components:1};case ji:case Di:return{byteLength:2,components:4};case Pi:case Ri:case ki:return{byteLength:4,components:1};case Ii:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(r);switch(n){case 1021:return e*t;case Bi:case Hi:return e*t/a.components*a.byteLength;case 1030:case Vi:return e*t*2/a.components*a.byteLength;case 1022:return e*t*3/a.components*a.byteLength;case Oi:case Gi:return e*t*4/a.components*a.byteLength;case Wi:case qi:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Xi:case Yi:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Ji:case $i:return Math.max(e,16)*Math.max(t,8)/4;case Ki:case Zi:return Math.max(e,8)*Math.max(t,8)/2;case Qi:case es:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case ts:case ns:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case rs:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case as:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case is:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case ss:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case os:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case ls:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case cs:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case us:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case ds:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case hs:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case ps:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case ms:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case fs:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case gs:case vs:case xs:return Math.ceil(e/4)*Math.ceil(t/4)*16;case 36283:case ys:return Math.ceil(e/4)*Math.ceil(t/4)*8;case bs:case _s:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}function hd(){let e=null,t=!1,n=null,r=null;function a(t,i){n(t,i),r=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function pd(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const a=t.get(n);if(void 0===a)t.set(n,function(t,n){const r=t.array,a=t.usage,i=r.byteLength,s=e.createBuffer();let o;if(e.bindBuffer(n,s),e.bufferData(n,r,a),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:i}}(n,r));else if(a.version<n.version){if(a.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const a=n.array,i=n.updateRanges;if(e.bindBuffer(r,t),0===i.length)e.bufferSubData(r,0,a);else{i.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<i.length;e++){const n=i[t],r=i[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,i[t]=r)}i.length=t+1;for(let n=0,s=i.length;n<s;n++){const t=i[n];e.bufferSubData(r,t.start*a.BYTES_PER_ELEMENT,a,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(a.buffer,n,r),a.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ua}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ua);const md={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},fd={common:{diffuse:{value:new $l(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ro},alphaMap:{value:null},alphaMapTransform:{value:new ro},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ro}},envmap:{envMap:{value:null},envMapRotation:{value:new ro},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ro}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ro}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ro},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ro},normalScale:{value:new no(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ro},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ro}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ro}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ro}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $l(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $l(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ro},alphaTest:{value:0},uvTransform:{value:new ro}},sprite:{diffuse:{value:new $l(16777215)},opacity:{value:1},center:{value:new no(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ro},alphaMap:{value:null},alphaMapTransform:{value:new ro},alphaTest:{value:0}}},gd={basic:{uniforms:Lc([fd.common,fd.specularmap,fd.envmap,fd.aomap,fd.lightmap,fd.fog]),vertexShader:md.meshbasic_vert,fragmentShader:md.meshbasic_frag},lambert:{uniforms:Lc([fd.common,fd.specularmap,fd.envmap,fd.aomap,fd.lightmap,fd.emissivemap,fd.bumpmap,fd.normalmap,fd.displacementmap,fd.fog,fd.lights,{emissive:{value:new $l(0)}}]),vertexShader:md.meshlambert_vert,fragmentShader:md.meshlambert_frag},phong:{uniforms:Lc([fd.common,fd.specularmap,fd.envmap,fd.aomap,fd.lightmap,fd.emissivemap,fd.bumpmap,fd.normalmap,fd.displacementmap,fd.fog,fd.lights,{emissive:{value:new $l(0)},specular:{value:new $l(1118481)},shininess:{value:30}}]),vertexShader:md.meshphong_vert,fragmentShader:md.meshphong_frag},standard:{uniforms:Lc([fd.common,fd.envmap,fd.aomap,fd.lightmap,fd.emissivemap,fd.bumpmap,fd.normalmap,fd.displacementmap,fd.roughnessmap,fd.metalnessmap,fd.fog,fd.lights,{emissive:{value:new $l(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:md.meshphysical_vert,fragmentShader:md.meshphysical_frag},toon:{uniforms:Lc([fd.common,fd.aomap,fd.lightmap,fd.emissivemap,fd.bumpmap,fd.normalmap,fd.displacementmap,fd.gradientmap,fd.fog,fd.lights,{emissive:{value:new $l(0)}}]),vertexShader:md.meshtoon_vert,fragmentShader:md.meshtoon_frag},matcap:{uniforms:Lc([fd.common,fd.bumpmap,fd.normalmap,fd.displacementmap,fd.fog,{matcap:{value:null}}]),vertexShader:md.meshmatcap_vert,fragmentShader:md.meshmatcap_frag},points:{uniforms:Lc([fd.points,fd.fog]),vertexShader:md.points_vert,fragmentShader:md.points_frag},dashed:{uniforms:Lc([fd.common,fd.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:md.linedashed_vert,fragmentShader:md.linedashed_frag},depth:{uniforms:Lc([fd.common,fd.displacementmap]),vertexShader:md.depth_vert,fragmentShader:md.depth_frag},normal:{uniforms:Lc([fd.common,fd.bumpmap,fd.normalmap,fd.displacementmap,{opacity:{value:1}}]),vertexShader:md.meshnormal_vert,fragmentShader:md.meshnormal_frag},sprite:{uniforms:Lc([fd.sprite,fd.fog]),vertexShader:md.sprite_vert,fragmentShader:md.sprite_frag},background:{uniforms:{uvTransform:{value:new ro},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:md.background_vert,fragmentShader:md.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ro}},vertexShader:md.backgroundCube_vert,fragmentShader:md.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:md.cube_vert,fragmentShader:md.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:md.equirect_vert,fragmentShader:md.equirect_frag},distanceRGBA:{uniforms:Lc([fd.common,fd.displacementmap,{referencePosition:{value:new Ro},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:md.distanceRGBA_vert,fragmentShader:md.distanceRGBA_frag},shadow:{uniforms:Lc([fd.lights,fd.fog,{color:{value:new $l(0)},opacity:{value:1}}]),vertexShader:md.shadow_vert,fragmentShader:md.shadow_frag}};gd.physical={uniforms:Lc([gd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ro},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ro},clearcoatNormalScale:{value:new no(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ro},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ro},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ro},sheen:{value:0},sheenColor:{value:new $l(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ro},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ro},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ro},transmissionSamplerSize:{value:new no},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ro},attenuationDistance:{value:0},attenuationColor:{value:new $l(0)},specularColor:{value:new $l(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ro},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ro},anisotropyVector:{value:new no},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ro}}]),vertexShader:md.meshphysical_vert,fragmentShader:md.meshphysical_frag};const vd={r:0,b:0,g:0},xd=new gl,yd=new sl;function bd(e,t,n,r,a,i,s){const o=new $l(0);let l,c,u=!0===i?0:1,d=null,h=0,p=null;function m(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function f(t,n){t.getRGB(vd,jc(e)),r.buffers.color.setClear(vd.r,vd.g,vd.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(t){let n=!1;const a=m(t);null===a?f(o,u):a&&a.isColor&&(f(a,1),n=!0);const i=e.xr.getEnvironmentBlendMode();"additive"===i?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===i&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=m(n);r&&(r.isCubeTexture||r.mapping===gi)?(void 0===c&&(c=new Cc(new Pc(1,1,1),new Uc({name:"BackgroundCubeMaterial",uniforms:kc(gd.backgroundCube.uniforms),vertexShader:gd.backgroundCube.vertexShader,fragmentShader:gd.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(c)),xd.copy(n.backgroundRotation),xd.x*=-1,xd.y*=-1,xd.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(xd.y*=-1,xd.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(yd.makeRotationFromEuler(xd)),c.material.toneMapped=mo.getTransfer(r.colorSpace)!==ks,d===r&&h===r.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=r,h=r.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new Cc(new Eu(2,2),new Uc({name:"BackgroundMaterial",uniforms:kc(gd.background.uniforms),vertexShader:gd.background.vertexShader,fragmentShader:gd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=mo.getTransfer(r.colorSpace)!==ks,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),d===r&&h===r.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=r,h=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function _d(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},a=c(null);let i=a,s=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],a=[];for(let i=0;i<n;i++)t[i]=0,r[i]=0,a[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:a,object:e,attributes:{},index:null}}function u(){const e=i.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function d(e){h(e,0)}function h(t,n){const r=i.newAttributes,a=i.enabledAttributes,s=i.attributeDivisors;r[t]=1,0===a[t]&&(e.enableVertexAttribArray(t),a[t]=1),s[t]!==n&&(e.vertexAttribDivisor(t,n),s[t]=n)}function p(){const t=i.newAttributes,n=i.enabledAttributes;for(let r=0,a=n.length;r<a;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function m(t,n,r,a,i,s,o){!0===o?e.vertexAttribIPointer(t,n,r,i,s):e.vertexAttribPointer(t,n,r,a,i,s)}function f(){g(),s=!0,i!==a&&(i=a,o(i.object))}function g(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function(n,a,l,f,g){let v=!1;const x=function(t,n,a){const i=!0===a.wireframe;let s=r[t.id];void 0===s&&(s={},r[t.id]=s);let o=s[n.id];void 0===o&&(o={},s[n.id]=o);let l=o[i];void 0===l&&(l=c(e.createVertexArray()),o[i]=l);return l}(f,l,a);i!==x&&(i=x,o(i.object)),v=function(e,t,n,r){const a=i.attributes,s=t.attributes;let o=0;const l=n.getAttributes();for(const i in l){if(l[i].location>=0){const t=a[i];let n=s[i];if(void 0===n&&("instanceMatrix"===i&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}}return i.attributesNum!==o||i.index!==r}(n,f,l,g),v&&function(e,t,n,r){const a={},s=t.attributes;let o=0;const l=n.getAttributes();for(const i in l){if(l[i].location>=0){let t=s[i];void 0===t&&("instanceMatrix"===i&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),a[i]=n,o++}}i.attributes=a,i.attributesNum=o,i.index=r}(n,f,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||s)&&(s=!1,function(n,r,a,i){u();const s=i.attributes,o=a.getAttributes(),l=r.defaultAttributeValues;for(const c in o){const r=o[c];if(r.location>=0){let a=s[c];if(void 0===a&&("instanceMatrix"===c&&n.instanceMatrix&&(a=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(a=n.instanceColor)),void 0!==a){const s=a.normalized,o=a.itemSize,l=t.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,f=u===e.INT||u===e.UNSIGNED_INT||a.gpuType===Ri;if(a.isInterleavedBufferAttribute){const t=a.data,l=t.stride,g=a.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)h(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===i._maxInstanceCount&&(i._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)d(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,o/r.locationSize,u,s,l*p,(g+o/r.locationSize*e)*p,f)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)h(r.location+e,a.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===i._maxInstanceCount&&(i._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<r.locationSize;e++)d(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,o/r.locationSize,u,s,o*p,o/r.locationSize*e*p,f)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(n,a,l,f),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:f,resetDefaultState:g,dispose:function(){f();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const a=n[e.id];for(const e in a)l(a[e].object),delete a[e];delete n[e.id]}},initAttributes:u,enableAttribute:d,disableUnusedAttributes:p}}function wd(e,t,n){let r;function a(t,a,i){0!==i&&(e.drawArraysInstanced(r,t,a,i),n.update(a,r,i))}this.setMode=function(e){r=e},this.render=function(t,a){e.drawArrays(r,t,a),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(e,a,i){if(0===i)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,a,0,i);let s=0;for(let t=0;t<i;t++)s+=a[t];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,i,s,o){if(0===s)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)a(e[t],i[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,i,0,o,0,s);let t=0;for(let e=0;e<s;e++)t+=i[e]*o[e];n.update(t,r,1)}}}function Sd(e,t,n,r){let a;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp";const o=i(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==a)return a;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");a=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:i,textureFormatReadable:function(t){return t===Oi||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const a=n===Li&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Ti&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==ki&&!a)},precision:s,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Ed(e){const t=this;let n=null,r=0,a=!1,i=!1;const s=new Qc,o=new ro,l={value:null,needsUpdate:!1};function c(e,n,r,a){const i=null!==e?e.length:0;let c=null;if(0!==i){if(c=l.value,!0!==a||null===c){const t=r+4*i,a=n.matrixWorldInverse;o.getNormalMatrix(a),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==i;++n,l+=4)s.copy(e[n]).applyMatrix4(a,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||a;return a=t,r=e.length,n},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,u){const d=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,m=e.get(s);if(!a||null===d||0===d.length||i&&!p)i?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=i?0:r,t=4*e;let a=m.clippingState||null;l.value=a,a=c(d,o,t,u);for(let r=0;r!==t;++r)a[r]=n[r];m.clippingState=a,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Md(e){let t=new WeakMap;function n(e,t){return t===mi?e.mapping=hi:t===fi&&(e.mapping=pi),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture){const i=a.mapping;if(i===mi||i===fi){if(t.has(a)){return n(t.get(a).texture,a.mapping)}{const i=a.image;if(i&&i.height>0){const s=new Wc(i.height);return s.fromEquirectangularTexture(e,a),t.set(a,s),a.addEventListener("dispose",r),n(s.texture,a.mapping)}return null}}}return a},dispose:function(){t=new WeakMap}}}const Td=[.125,.215,.35,.446,.526,.582],Nd=20,Ad=new td,Cd=new $l;let Rd=null,Pd=0,kd=0,Ld=!1;const jd=(1+Math.sqrt(5))/2,Dd=1/jd,Ud=[new Ro(-jd,Dd,0),new Ro(jd,Dd,0),new Ro(-Dd,0,jd),new Ro(Dd,0,jd),new Ro(0,jd,-Dd),new Ro(0,jd,Dd),new Ro(-1,1,-1),new Ro(1,1,-1),new Ro(-1,1,1),new Ro(1,1,1)],Id=new Ro;class Od{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{size:i=256,position:s=Id}=a;Rd=this._renderer.getRenderTarget(),Pd=this._renderer.getActiveCubeFace(),kd=this._renderer.getActiveMipmapLevel(),Ld=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(i);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o,s),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Hd(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Bd(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rd,Pd,kd),this._renderer.xr.enabled=Ld,e.scissorTest=!1,zd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===hi||e.mapping===pi?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Rd=this._renderer.getRenderTarget(),Pd=this._renderer.getActiveCubeFace(),kd=this._renderer.getActiveMipmapLevel(),Ld=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Si,minFilter:Si,generateMipmaps:!1,type:Li,format:Oi,colorSpace:Rs,depthBuffer:!1},r=Fd(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Fd(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let a=e;const i=e-4+1+Td.length;for(let s=0;s<i;s++){const i=Math.pow(2,a);n.push(i);let o=1/i;s>e-4?o=Td[s-e+4-1]:0===s&&(o=0),r.push(o);const l=1/(i-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,m=3,f=2,g=1,v=new Float32Array(m*p*h),x=new Float32Array(f*p*h),y=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,m*p*e),x.set(d,f*p*e);const a=[e,e,e,e,e,e];y.set(a,g*p*e)}const b=new vc;b.setAttribute("position",new sc(v,m)),b.setAttribute("uv",new sc(x,f)),b.setAttribute("faceIndex",new sc(y,g)),t.push(b),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Nd),a=new Ro(0,1,0),i=new Uc({name:"SphericalGaussianBlur",defines:{n:Nd,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return i}(r,e,t)}return r}_compileMaterial(e){const t=new Cc(this._lodPlanes[0],e);this._renderer.compile(t,Ad)}_sceneToCubeUV(e,t,n,r,a){const i=new Bc(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(Cd),l.toneMapping=0,l.autoClear=!1;const d=new nc({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Cc(new Pc,d);let p=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,p=!0):(d.color.copy(Cd),p=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,s[f],0),i.position.set(a.x,a.y,a.z),i.lookAt(a.x+o[f],a.y,a.z)):1===t?(i.up.set(0,0,s[f]),i.position.set(a.x,a.y,a.z),i.lookAt(a.x,a.y+o[f],a.z)):(i.up.set(0,s[f],0),i.position.set(a.x,a.y,a.z),i.lookAt(a.x,a.y,a.z+o[f]));const n=this._cubeSize;zd(r,t*n,f>2?n:0,n,n),l.setRenderTarget(r),p&&l.render(h,i),l.render(e,i)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=m}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===hi||e.mapping===pi;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Hd()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Bd());const a=r?this._cubemapMaterial:this._equirectMaterial,i=new Cc(this._lodPlanes[0],a);a.uniforms.envMap.value=e;const s=this._cubeSize;zd(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(i,Ad)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const t=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),n=Ud[(r-a-1)%Ud.length];this._blur(e,a-1,a,t,n)}t.autoClear=n}_blur(e,t,n,r,a){const i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",a),this._halfBlur(i,e,n,n,r,"longitudinal",a)}_halfBlur(e,t,n,r,a,i,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Cc(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(a)?Math.PI/(2*d):2*Math.PI/39,p=a/h,m=isFinite(a)?1+Math.floor(3*p):Nd;m>Nd&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(m," samples when the maximum is set to ").concat(Nd));const f=[];let g=0;for(let y=0;y<Nd;++y){const e=y/p,t=Math.exp(-e*e/2);f.push(t),0===y?g+=t:y<m&&(g+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/g;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=f,u.latitudinal.value="latitudinal"===i,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const x=this._sizeLods[r];zd(t,3*x*(r>v-4?r-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(t),o.render(c,Ad)}}function Fd(e,t,n){const r=new To(e,t,n);return r.texture.mapping=gi,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function zd(e,t,n,r,a){e.viewport.set(t,n,r,a),e.scissor.set(t,n,r,a)}function Bd(){return new Uc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Hd(){return new Uc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vd(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture){const i=a.mapping,s=i===mi||i===fi,o=i===hi||i===pi;if(s||o){let i=t.get(a);const l=void 0!==i?i.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==l)return null===n&&(n=new Od(e)),i=s?n.fromEquirectangular(a,i):n.fromCubemap(a,i),i.texture.pmremVersion=a.pmremVersion,t.set(a,i),i.texture;if(void 0!==i)return i.texture;{const l=a.image;return s&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new Od(e)),i=s?n.fromEquirectangular(a):n.fromCubemap(a),i.texture.pmremVersion=a.pmremVersion,t.set(a,i),a.addEventListener("dispose",r),i.texture):null}}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Gd(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&co("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Wd(e,t,n,r){const a={},i=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",s),delete a[o.id];const l=i.get(o);l&&(t.remove(l),i.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,a=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],a=e[t+1],i=e[t+2];n.push(r,a,a,i,i,r)}}else{if(void 0===a)return;{const e=a.array;s=a.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,a=t+2;n.push(e,r,r,a,a,e)}}}const o=new(io(n)?lc:oc)(n,1);o.version=s;const l=i.get(e);l&&t.remove(l),i.set(e,o)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",s),a[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const a in r)t.update(r[a],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=i.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return i.get(e)}}}function qd(e,t,n){let r,a,i;function s(t,s,o){0!==o&&(e.drawElementsInstanced(r,s,a,t*i,o),n.update(s,r,o))}this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,i=e.bytesPerElement},this.render=function(t,s){e.drawElements(r,s,a,t*i),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(e,i,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,i,0,a,e,0,s);let o=0;for(let t=0;t<s;t++)o+=i[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,o,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)s(e[t]/i,o[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(r,o,0,a,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*c[e];n.update(t,r,1)}}}function Xd(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,a){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=a*(n/3);break;case e.LINES:t.lines+=a*(n/2);break;case e.LINE_STRIP:t.lines+=a*(n-1);break;case e.LINE_LOOP:t.lines+=a*n;break;case e.POINTS:t.points+=a*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Yd(e,t,n){const r=new WeakMap,a=new Eo;return{update:function(i,s,o){const l=i.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,u=void 0!==c?c.length:0;let d=r.get(s);if(void 0===d||d.count!==u){void 0!==d&&d.texture.dispose();const h=void 0!==s.morphAttributes.position,p=void 0!==s.morphAttributes.normal,m=void 0!==s.morphAttributes.color,f=s.morphAttributes.position||[],g=s.morphAttributes.normal||[],v=s.morphAttributes.color||[];let x=0;!0===h&&(x=1),!0===p&&(x=2),!0===m&&(x=3);let y=s.attributes.position.count*x,b=1;y>t.maxTextureSize&&(b=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const _=new Float32Array(y*b*4*u),w=new No(_,y,b,u);w.type=ki,w.needsUpdate=!0;const S=4*x;for(let M=0;M<u;M++){const T=f[M],N=g[M],A=v[M],C=y*b*4*M;for(let R=0;R<T.count;R++){const P=R*S;!0===h&&(a.fromBufferAttribute(T,R),_[C+P+0]=a.x,_[C+P+1]=a.y,_[C+P+2]=a.z,_[C+P+3]=0),!0===p&&(a.fromBufferAttribute(N,R),_[C+P+4]=a.x,_[C+P+5]=a.y,_[C+P+6]=a.z,_[C+P+7]=0),!0===m&&(a.fromBufferAttribute(A,R),_[C+P+8]=a.x,_[C+P+9]=a.y,_[C+P+10]=a.z,_[C+P+11]=4===A.itemSize?a.w:1)}}function E(){w.dispose(),r.delete(s),s.removeEventListener("dispose",E)}d={count:u,texture:w,size:new no(y,b)},r.set(s,d),s.addEventListener("dispose",E)}if(!0===i.isInstancedMesh&&null!==i.morphTexture)o.getUniforms().setValue(e,"morphTexture",i.morphTexture,n);else{let k=0;for(let j=0;j<l.length;j++)k+=l[j];const L=s.morphTargetsRelative?1:1-k;o.getUniforms().setValue(e,"morphTargetBaseInfluence",L),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",d.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}}}function Kd(e,t,n,r){let a=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=r.render.frame,l=s.geometry,c=t.get(s,l);if(a.get(c)!==o&&(t.update(c),a.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",i)&&s.addEventListener("dispose",i),a.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),a.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;a.get(e)!==o&&(e.update(),a.set(e,o))}return c},dispose:function(){a=new WeakMap}}}const Jd=new So,Zd=new Su(1,1),$d=new No,Qd=new Ao,eh=new Gc,th=[],nh=[],rh=new Float32Array(16),ah=new Float32Array(9),ih=new Float32Array(4);function sh(e,t,n){const r=e[0];if(r<=0||r>0)return e;const a=t*n;let i=th[a];if(void 0===i&&(i=new Float32Array(a),th[a]=i),0!==t){r.toArray(i,0);for(let r=1,a=0;r!==t;++r)a+=n,e[r].toArray(i,a)}return i}function oh(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function lh(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ch(e,t){let n=nh[t];void 0===n&&(n=new Int32Array(t),nh[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function uh(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function dh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(oh(n,t))return;e.uniform2fv(this.addr,t),lh(n,t)}}function hh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(oh(n,t))return;e.uniform3fv(this.addr,t),lh(n,t)}}function ph(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(oh(n,t))return;e.uniform4fv(this.addr,t),lh(n,t)}}function mh(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(oh(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),lh(n,t)}else{if(oh(n,r))return;ih.set(r),e.uniformMatrix2fv(this.addr,!1,ih),lh(n,r)}}function fh(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(oh(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),lh(n,t)}else{if(oh(n,r))return;ah.set(r),e.uniformMatrix3fv(this.addr,!1,ah),lh(n,r)}}function gh(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(oh(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),lh(n,t)}else{if(oh(n,r))return;rh.set(r),e.uniformMatrix4fv(this.addr,!1,rh),lh(n,r)}}function vh(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function xh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(oh(n,t))return;e.uniform2iv(this.addr,t),lh(n,t)}}function yh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(oh(n,t))return;e.uniform3iv(this.addr,t),lh(n,t)}}function bh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(oh(n,t))return;e.uniform4iv(this.addr,t),lh(n,t)}}function _h(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function wh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(oh(n,t))return;e.uniform2uiv(this.addr,t),lh(n,t)}}function Sh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(oh(n,t))return;e.uniform3uiv(this.addr,t),lh(n,t)}}function Eh(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(oh(n,t))return;e.uniform4uiv(this.addr,t),lh(n,t)}}function Mh(e,t,n){const r=this.cache,a=n.allocateTextureUnit();let i;r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),this.type===e.SAMPLER_2D_SHADOW?(Zd.compareFunction=515,i=Zd):i=Jd,n.setTexture2D(t||i,a)}function Th(e,t,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(t||Qd,a)}function Nh(e,t,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTextureCube(t||eh,a)}function Ah(e,t,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(t||$d,a)}function Ch(e,t){e.uniform1fv(this.addr,t)}function Rh(e,t){const n=sh(t,this.size,2);e.uniform2fv(this.addr,n)}function Ph(e,t){const n=sh(t,this.size,3);e.uniform3fv(this.addr,n)}function kh(e,t){const n=sh(t,this.size,4);e.uniform4fv(this.addr,n)}function Lh(e,t){const n=sh(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function jh(e,t){const n=sh(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Dh(e,t){const n=sh(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Uh(e,t){e.uniform1iv(this.addr,t)}function Ih(e,t){e.uniform2iv(this.addr,t)}function Oh(e,t){e.uniform3iv(this.addr,t)}function Fh(e,t){e.uniform4iv(this.addr,t)}function zh(e,t){e.uniform1uiv(this.addr,t)}function Bh(e,t){e.uniform2uiv(this.addr,t)}function Hh(e,t){e.uniform3uiv(this.addr,t)}function Vh(e,t){e.uniform4uiv(this.addr,t)}function Gh(e,t,n){const r=this.cache,a=t.length,i=ch(n,a);oh(r,i)||(e.uniform1iv(this.addr,i),lh(r,i));for(let s=0;s!==a;++s)n.setTexture2D(t[s]||Jd,i[s])}function Wh(e,t,n){const r=this.cache,a=t.length,i=ch(n,a);oh(r,i)||(e.uniform1iv(this.addr,i),lh(r,i));for(let s=0;s!==a;++s)n.setTexture3D(t[s]||Qd,i[s])}function qh(e,t,n){const r=this.cache,a=t.length,i=ch(n,a);oh(r,i)||(e.uniform1iv(this.addr,i),lh(r,i));for(let s=0;s!==a;++s)n.setTextureCube(t[s]||eh,i[s])}function Xh(e,t,n){const r=this.cache,a=t.length,i=ch(n,a);oh(r,i)||(e.uniform1iv(this.addr,i),lh(r,i));for(let s=0;s!==a;++s)n.setTexture2DArray(t[s]||$d,i[s])}class Yh{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return uh;case 35664:return dh;case 35665:return hh;case 35666:return ph;case 35674:return mh;case 35675:return fh;case 35676:return gh;case 5124:case 35670:return vh;case 35667:case 35671:return xh;case 35668:case 35672:return yh;case 35669:case 35673:return bh;case 5125:return _h;case 36294:return wh;case 36295:return Sh;case 36296:return Eh;case 35678:case 36198:case 36298:case 36306:case 35682:return Mh;case 35679:case 36299:case 36307:return Th;case 35680:case 36300:case 36308:case 36293:return Nh;case 36289:case 36303:case 36311:case 36292:return Ah}}(t.type)}}class Kh{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ch;case 35664:return Rh;case 35665:return Ph;case 35666:return kh;case 35674:return Lh;case 35675:return jh;case 35676:return Dh;case 5124:case 35670:return Uh;case 35667:case 35671:return Ih;case 35668:case 35672:return Oh;case 35669:case 35673:return Fh;case 5125:return zh;case 36294:return Bh;case 36295:return Hh;case 36296:return Vh;case 35678:case 36198:case 36298:case 36306:case 35682:return Gh;case 35679:case 36299:case 36307:return Wh;case 35680:case 36300:case 36308:case 36293:return qh;case 36289:case 36303:case 36311:case 36292:return Xh}}(t.type)}}class Jh{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let a=0,i=r.length;a!==i;++a){const i=r[a];i.setValue(e,t[i.id],n)}}}const Zh=/(\w+)(\])?(\[|\.)?/g;function $h(e,t){e.seq.push(t),e.map[t.id]=t}function Qh(e,t,n){const r=e.name,a=r.length;for(Zh.lastIndex=0;;){const i=Zh.exec(r),s=Zh.lastIndex;let o=i[1];const l="]"===i[2],c=i[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===a){$h(n,void 0===c?new Yh(o,e,t):new Kh(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Jh(o),$h(n,e)),n=e}}}class ep{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Qh(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const a=this.map[t];void 0!==a&&a.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let a=0,i=t.length;a!==i;++a){const i=t[a],s=n[i.id];!1!==s.needsUpdate&&i.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,a=e.length;r!==a;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function tp(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let np=0;const rp=new ro;function ap(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),a=e.getShaderInfoLog(t).trim();if(r&&""===a)return"";const i=/ERROR: 0:(\d+)/.exec(a);if(i){const r=parseInt(i[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function(e,t){const n=e.split("\n"),r=[],a=Math.max(t-6,0),i=Math.min(t+6,n.length);for(let s=a;s<i;s++){const e=s+1;r.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return r.join("\n")}(e.getShaderSource(t),r)}return a}function ip(e,t){const n=function(e){mo._getMatrix(rp,mo.workingColorSpace,e);const t="mat3( ".concat(rp.elements.map((e=>e.toFixed(4)))," )");switch(mo.getTransfer(e)){case Ps:return[t,"LinearTransferOETF"];case ks:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function sp(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const op=new Ro;function lp(){mo.getLuminanceCoefficients(op);const e=op.x.toFixed(4),t=op.y.toFixed(4),n=op.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function cp(e){return""!==e}function up(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function dp(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const hp=/^[ \t]*#include +<([\w\d./]+)>/gm;function pp(e){return e.replace(hp,fp)}const mp=new Map;function fp(e,t){let n=md[t];if(void 0===n){const e=mp.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=md[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return pp(n)}const gp=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vp(e){return e.replace(gp,xp)}function xp(e,t,n,r){let a="";for(let i=parseInt(t);i<parseInt(n);i++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return a}function yp(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function bp(e,t,n,r){const a=e.getContext(),i=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case hi:case pi:t="ENVMAP_TYPE_CUBE";break;case gi:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===pi&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cp).join("\n")}(n),m=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(i),f=a.createProgram();let g,v,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(cp).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(cp).join("\n"),v.length>0&&(v+="\n")):(g=[yp(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(cp).join("\n"),v=[yp(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?md.tonemapping_pars_fragment:"",0!==n.toneMapping?sp("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",md.colorspace_pars_fragment,ip("linearToOutputTexel",n.outputColorSpace),lp(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(cp).join("\n")),s=pp(s),s=up(s,n),s=dp(s,n),o=pp(o),o=up(o,n),o=dp(o,n),s=vp(s),o=vp(o),!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Vs?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Vs?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=x+g+s,b=x+v+o,_=tp(a,a.VERTEX_SHADER,y),w=tp(a,a.FRAGMENT_SHADER,b);function S(t){if(e.debug.checkShaderErrors){const n=a.getProgramInfoLog(f).trim(),r=a.getShaderInfoLog(_).trim(),i=a.getShaderInfoLog(w).trim();let s=!0,o=!0;if(!1===a.getProgramParameter(f,a.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(a,f,_,w);else{const e=ap(a,_,"vertex"),r=ap(a,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(f,a.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==i||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:i,prefix:v}})}a.deleteShader(_),a.deleteShader(w),E=new ep(a,f),M=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){const r=e.getActiveAttrib(t,a),i=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:s}}return n}(a,f)}let E,M;a.attachShader(f,_),a.attachShader(f,w),void 0!==n.index0AttributeName?a.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(f,0,"position"),a.linkProgram(f),this.getUniforms=function(){return void 0===E&&S(this),E},this.getAttributes=function(){return void 0===M&&S(this),M};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=a.getProgramParameter(f,37297)),T},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(f),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=np++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=_,this.fragmentShader=w,this}let _p=0;class wp{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(n),i=this._getShaderCacheForMaterial(e);return!1===i.has(r)&&(i.add(r),r.usedTimes++),!1===i.has(a)&&(i.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Sp(e),t.set(e,n)),n}}class Sp{constructor(e){this.id=_p++,this.code=e,this.usedTimes=0}}function Ep(e,t,n,r,a,i,s){const o=new vl,l=new wp,c=new Set,u=[],d=a.logarithmicDepthBuffer,h=a.vertexTextures;let p=a.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(i,o,u,g,v){const x=g.fog,y=v.geometry,b=i.isMeshStandardMaterial?g.environment:null,_=(i.isMeshStandardMaterial?n:t).get(i.envMap||b),w=_&&_.mapping===gi?_.image.height:null,S=m[i.type];null!==i.precision&&(p=a.getMaxPrecision(i.precision),p!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",p,"instead."));const E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==E?E.length:0;let T,N,A,C,R=0;if(void 0!==y.morphAttributes.position&&(R=1),void 0!==y.morphAttributes.normal&&(R=2),void 0!==y.morphAttributes.color&&(R=3),S){const e=gd[S];T=e.vertexShader,N=e.fragmentShader}else T=i.vertexShader,N=i.fragmentShader,l.update(i),A=l.getVertexShaderID(i),C=l.getFragmentShaderID(i);const P=e.getRenderTarget(),k=e.state.buffers.depth.getReversed(),L=!0===v.isInstancedMesh,j=!0===v.isBatchedMesh,D=!!i.map,U=!!i.matcap,I=!!_,O=!!i.aoMap,F=!!i.lightMap,z=!!i.bumpMap,B=!!i.normalMap,H=!!i.displacementMap,V=!!i.emissiveMap,G=!!i.metalnessMap,W=!!i.roughnessMap,q=i.anisotropy>0,X=i.clearcoat>0,Y=i.dispersion>0,K=i.iridescence>0,J=i.sheen>0,Z=i.transmission>0,$=q&&!!i.anisotropyMap,Q=X&&!!i.clearcoatMap,ee=X&&!!i.clearcoatNormalMap,te=X&&!!i.clearcoatRoughnessMap,ne=K&&!!i.iridescenceMap,re=K&&!!i.iridescenceThicknessMap,ae=J&&!!i.sheenColorMap,ie=J&&!!i.sheenRoughnessMap,se=!!i.specularMap,oe=!!i.specularColorMap,le=!!i.specularIntensityMap,ce=Z&&!!i.transmissionMap,ue=Z&&!!i.thicknessMap,de=!!i.gradientMap,he=!!i.alphaMap,pe=i.alphaTest>0,me=!!i.alphaHash,fe=!!i.extensions;let ge=0;i.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:S,shaderType:i.type,shaderName:i.name,vertexShader:T,fragmentShader:N,defines:i.defines,customVertexShaderID:A,customFragmentShaderID:C,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:p,batching:j,batchingColor:j&&null!==v._colorsTexture,instancing:L,instancingColor:L&&null!==v.instanceColor,instancingMorph:L&&null!==v.morphTexture,supportsVertexTextures:h,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:Rs,alphaToCoverage:!!i.alphaToCoverage,map:D,matcap:U,envMap:I,envMapMode:I&&_.mapping,envMapCubeUVHeight:w,aoMap:O,lightMap:F,bumpMap:z,normalMap:B,displacementMap:h&&H,emissiveMap:V,normalMapObjectSpace:B&&1===i.normalMapType,normalMapTangentSpace:B&&0===i.normalMapType,metalnessMap:G,roughnessMap:W,anisotropy:q,anisotropyMap:$,clearcoat:X,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:Y,iridescence:K,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:J,sheenColorMap:ae,sheenRoughnessMap:ie,specularMap:se,specularColorMap:oe,specularIntensityMap:le,transmission:Z,transmissionMap:ce,thicknessMap:ue,gradientMap:de,opaque:!1===i.transparent&&1===i.blending&&!1===i.alphaToCoverage,alphaMap:he,alphaTest:pe,alphaHash:me,combine:i.combine,mapUv:D&&f(i.map.channel),aoMapUv:O&&f(i.aoMap.channel),lightMapUv:F&&f(i.lightMap.channel),bumpMapUv:z&&f(i.bumpMap.channel),normalMapUv:B&&f(i.normalMap.channel),displacementMapUv:H&&f(i.displacementMap.channel),emissiveMapUv:V&&f(i.emissiveMap.channel),metalnessMapUv:G&&f(i.metalnessMap.channel),roughnessMapUv:W&&f(i.roughnessMap.channel),anisotropyMapUv:$&&f(i.anisotropyMap.channel),clearcoatMapUv:Q&&f(i.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(i.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&f(i.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&f(i.iridescenceMap.channel),iridescenceThicknessMapUv:re&&f(i.iridescenceThicknessMap.channel),sheenColorMapUv:ae&&f(i.sheenColorMap.channel),sheenRoughnessMapUv:ie&&f(i.sheenRoughnessMap.channel),specularMapUv:se&&f(i.specularMap.channel),specularColorMapUv:oe&&f(i.specularColorMap.channel),specularIntensityMapUv:le&&f(i.specularIntensityMap.channel),transmissionMapUv:ce&&f(i.transmissionMap.channel),thicknessMapUv:ue&&f(i.thicknessMap.channel),alphaMapUv:he&&f(i.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(B||q),vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!y.attributes.uv&&(D||he),fog:!!x,useFog:!0===i.fog,fogExp2:!!x&&x.isFogExp2,flatShading:!0===i.flatShading,sizeAttenuation:!0===i.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:k,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:R,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:D&&!0===i.map.isVideoTexture&&mo.getTransfer(i.map.colorSpace)===ks,decodeVideoTextureEmissive:V&&!0===i.emissiveMap.isVideoTexture&&mo.getTransfer(i.emissiveMap.colorSpace)===ks,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,useDepthPacking:i.depthPacking>=0,depthPacking:i.depthPacking||0,index0AttributeName:i.index0AttributeName,extensionClipCullDistance:fe&&!0===i.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(fe&&!0===i.extensions.multiDraw||j)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:i.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0);t.instancing&&o.enable(1);t.instancingColor&&o.enable(2);t.instancingMorph&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);t.dispersion&&o.enable(20);t.batchingColor&&o.enable(21);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.reverseDepthBuffer&&o.enable(4);t.skinning&&o.enable(5);t.morphTargets&&o.enable(6);t.morphNormals&&o.enable(7);t.morphColors&&o.enable(8);t.premultipliedAlpha&&o.enable(9);t.shadowMapEnabled&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);t.decodeVideoTextureEmissive&&o.enable(20);t.alphaToCoverage&&o.enable(21);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=gd[t];n=Dc.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,a=u.length;e<a;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new bp(e,n,t,i),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Mp(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Tp(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Np(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ap(){const e=[];let t=0;const n=[],r=[],a=[];function i(n,r,a,i,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:a,groupOrder:i,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=a,l.groupOrder=i,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:a,init:function(){t=0,n.length=0,r.length=0,a.length=0},push:function(e,t,s,o,l,c){const u=i(e,t,s,o,l,c);s.transmission>0?r.push(u):!0===s.transparent?a.push(u):n.push(u)},unshift:function(e,t,s,o,l,c){const u=i(e,t,s,o,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?a.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Tp),r.length>1&&r.sort(t||Np),a.length>1&&a.sort(t||Np)}}}function Cp(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let a;return void 0===r?(a=new Ap,e.set(t,[a])):n>=r.length?(a=new Ap,r.push(a)):a=r[n],a},dispose:function(){e=new WeakMap}}}function Rp(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ro,color:new $l};break;case"SpotLight":n={position:new Ro,direction:new Ro,color:new $l,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ro,color:new $l,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ro,skyColor:new $l,groundColor:new $l};break;case"RectAreaLight":n={color:new $l,position:new Ro,halfWidth:new Ro,halfHeight:new Ro}}return e[t.id]=n,n}}}let Pp=0;function kp(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Lp(e){const t=new Rp,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new no};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new no,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)r.probe.push(new Ro);const a=new Ro,i=new sl,s=new sl;return{setup:function(a){let i=0,s=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,u=0,d=0,h=0,p=0,m=0,f=0,g=0,v=0,x=0;a.sort(kp);for(let e=0,b=a.length;e<b;e++){const y=a[e],b=y.color,_=y.intensity,w=y.distance,S=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)i+=b.r*_,s+=b.g*_,o+=b.b*_;else if(y.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(y.sh.coefficients[e],_);x++}else if(y.isDirectionalLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=S,r.directionalShadowMatrix[l]=y.shadow.matrix,p++}r.directional[l]=e,l++}else if(y.isSpotLight){const e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(b).multiplyScalar(_),e.distance=w,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,r.spot[u]=e;const a=y.shadow;if(y.map&&(r.spotLightMap[g]=y.map,g++,a.updateMatrices(y),y.castShadow&&v++),r.spotLightMatrix[u]=a.matrix,y.castShadow){const e=n.get(y);e.shadowIntensity=a.intensity,e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=S,f++}u++}else if(y.isRectAreaLight){const e=t.get(y);e.color.copy(b).multiplyScalar(_),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),r.rectArea[d]=e,d++}else if(y.isPointLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=S,r.pointShadowMatrix[c]=y.shadow.matrix,m++}r.point[c]=e,c++}else if(y.isHemisphereLight){const e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(_),e.groundColor.copy(y.groundColor).multiplyScalar(_),r.hemi[h]=e,h++}}d>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=fd.LTC_FLOAT_1,r.rectAreaLTC2=fd.LTC_FLOAT_2):(r.rectAreaLTC1=fd.LTC_HALF_1,r.rectAreaLTC2=fd.LTC_HALF_2)),r.ambient[0]=i,r.ambient[1]=s,r.ambient[2]=o;const y=r.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===u&&y.rectAreaLength===d&&y.hemiLength===h&&y.numDirectionalShadows===p&&y.numPointShadows===m&&y.numSpotShadows===f&&y.numSpotMaps===g&&y.numLightProbes===x||(r.directional.length=l,r.spot.length=u,r.rectArea.length=d,r.point.length=c,r.hemi.length=h,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=f,r.spotShadowMap.length=f,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=f+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=x,y.directionalLength=l,y.pointLength=c,y.spotLength=u,y.rectAreaLength=d,y.hemiLength=h,y.numDirectionalShadows=p,y.numPointShadows=m,y.numSpotShadows=f,y.numSpotMaps=g,y.numLightProbes=x,r.version=Pp++)},setupView:function(e,t){let n=0,o=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),s.identity(),i.copy(t.matrixWorld),i.premultiply(d),s.extractRotation(i),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=r.point[o];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function jp(e){const t=new Lp(e),n=[],r=[];const a={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){a.camera=e,n.length=0,r.length=0},state:a,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Dp(e){let t=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=t.get(n);let i;return void 0===a?(i=new jp(e),t.set(n,[i])):r>=a.length?(i=new jp(e),a.push(i)):i=a[r],i},dispose:function(){t=new WeakMap}}}function Up(e,t,n){let r=new nu;const a=new no,i=new no,s=new Eo,o=new Tu({depthPacking:3201}),l=new Nu,c={},u=n.maxTextureSize,d={[Ia]:1,[Oa]:0,[Fa]:2},h=new Uc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new no},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new vc;m.setAttribute("position",new sc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Cc(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function x(n,r){const i=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new To(a.x,a.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,f,null)}function y(t,n,r,a){let i=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)i=s;else if(i=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=i.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let a=r[t];void 0===a&&(a=i.clone(),r[t]=a,n.addEventListener("dispose",_)),i=a}if(i.visible=n.visible,i.wireframe=n.wireframe,i.side=3===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],i.alphaMap=n.alphaMap,i.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,i.map=n.map,i.clipShadows=n.clipShadows,i.clippingPlanes=n.clippingPlanes,i.clipIntersection=n.clipIntersection,i.displacementMap=n.displacementMap,i.displacementScale=n.displacementScale,i.displacementBias=n.displacementBias,i.wireframeLinewidth=n.wireframeLinewidth,i.linewidth=n.linewidth,!0===r.isPointLight&&!0===i.isMeshDistanceMaterial){e.properties.get(i).light=r}return i}function b(n,a,i,s,o){if(!1===n.visible)return;if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=y(n,d,s,o);n.onBeforeShadow(e,n,a,i,r,t,u),e.renderBufferDirect(i,null,r,t,n,u),n.onAfterShadow(e,n,a,i,r,t,u)}}}else if(l.visible){const t=y(n,l,s,o);n.onBeforeShadow(e,n,a,i,r,t,null),e.renderBufferDirect(i,null,r,t,n,null),n.onAfterShadow(e,n,a,i,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],a,i,s,o)}function _(e){e.target.removeEventListener("dispose",_);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=3!==v&&3===this.type,m=3===v&&3!==this.type;for(let f=0,g=t.length;f<g;f++){const l=t[f],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;a.copy(c.mapSize);const d=c.getFrameExtents();if(a.multiply(d),i.copy(c.mapSize),(a.x>u||a.y>u)&&(a.x>u&&(i.x=Math.floor(u/d.x),a.x=i.x*d.x,c.mapSize.x=i.x),a.y>u&&(i.y=Math.floor(u/d.y),a.y=i.y*d.y,c.mapSize.y=i.y)),null===c.map||!0===p||!0===m){const e=3!==this.type?{minFilter:bi,magFilter:bi}:{};null!==c.map&&c.map.dispose(),c.map=new To(a.x,a.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(i.x*t.x,i.y*t.y,i.x*t.z,i.y*t.w),h.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),b(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&x(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}const Ip={[ai]:1,[si]:6,[li]:7,[oi]:5,[ii]:0,[ui]:2,[di]:4,[ci]:3};function Op(e,t){const n=new function(){let t=!1;const n=new Eo;let r=null;const a=new Eo(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,s,o){!0===o&&(t*=s,r*=s,i*=s),n.set(t,r,i,s),!1===a.equals(n)&&(e.clearColor(t,r,i,s),a.copy(n))},reset:function(){t=!1,r=null,a.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,a=null,i=null,s=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const a=s;s=null,this.setClear(a)}},getReversed:function(){return r},setTest:function(t){t?z(e.DEPTH_TEST):B(e.DEPTH_TEST)},setMask:function(t){a===t||n||(e.depthMask(t),a=t)},setFunc:function(t){if(r&&(t=Ip[t]),i!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}i=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(r&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,a=null,i=null,s=null,r=!1}}},a=new function(){let t=!1,n=null,r=null,a=null,i=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):B(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&a===n&&i===s||(e.stencilFunc(t,n,s),r=t,a=n,i=s)},setOp:function(t,n,r){s===t&&o===n&&l===r||(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,a=null,i=null,s=null,o=null,l=null,c=null}}},i=new WeakMap,s=new WeakMap;let o={},l={},c=new WeakMap,u=[],d=null,h=!1,p=null,m=null,f=null,g=null,v=null,x=null,y=null,b=new $l(0,0,0),_=0,w=!1,S=null,E=null,M=null,T=null,N=null;const A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let C=!1,R=0;const P=e.getParameter(e.VERSION);-1!==P.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(P)[1]),C=R>=1):-1!==P.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),C=R>=2);let k=null,L={};const j=e.getParameter(e.SCISSOR_BOX),D=e.getParameter(e.VIEWPORT),U=(new Eo).fromArray(j),I=(new Eo).fromArray(D);function O(t,n,r,a){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return s}const F={};function z(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function B(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}F[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F[e.TEXTURE_2D_ARRAY]=O(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=O(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),a.setClear(0),z(e.DEPTH_TEST),r.setFunc(3),W(!1),q(1),z(e.CULL_FACE),G(0);const H={[za]:e.FUNC_ADD,[Ba]:e.FUNC_SUBTRACT,[Ha]:e.FUNC_REVERSE_SUBTRACT};H[103]=e.MIN,H[104]=e.MAX;const V={[Va]:e.ZERO,[Ga]:e.ONE,[Wa]:e.SRC_COLOR,[Xa]:e.SRC_ALPHA,[Qa]:e.SRC_ALPHA_SATURATE,[Za]:e.DST_COLOR,[Ka]:e.DST_ALPHA,[qa]:e.ONE_MINUS_SRC_COLOR,[Ya]:e.ONE_MINUS_SRC_ALPHA,[$a]:e.ONE_MINUS_DST_COLOR,[Ja]:e.ONE_MINUS_DST_ALPHA,[ei]:e.CONSTANT_COLOR,[ti]:e.ONE_MINUS_CONSTANT_COLOR,[ni]:e.CONSTANT_ALPHA,[ri]:e.ONE_MINUS_CONSTANT_ALPHA};function G(t,n,r,a,i,s,o,l,c,u){if(0!==t){if(!1===h&&(z(e.BLEND),h=!0),5===t)i=i||n,s=s||r,o=o||a,n===m&&i===v||(e.blendEquationSeparate(H[n],H[i]),m=n,v=i),r===f&&a===g&&s===x&&o===y||(e.blendFuncSeparate(V[r],V[a],V[s],V[o]),f=r,g=a,x=s,y=o),!1!==l.equals(b)&&c===_||(e.blendColor(l.r,l.g,l.b,c),b.copy(l),_=c),p=t,w=!1;else if(t!==p||u!==w){if(m===za&&v===za||(e.blendEquation(e.FUNC_ADD),m=za,v=za),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,g=null,x=null,y=null,b.set(0,0,0),_=0,p=t,w=u}}else!0===h&&(B(e.BLEND),h=!1)}function W(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function q(t){0!==t?(z(e.CULL_FACE),t!==E&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):B(e.CULL_FACE),E=t}function X(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),T===n&&N===r||(e.polygonOffset(n,r),T=n,N=r)):B(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:a},enable:z,disable:B,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=u,a=!1;if(t){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const i=t.textures;if(r.length!==i.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=i.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=i.length,a=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,a=!0);a&&e.drawBuffers(r)},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:G,setMaterial:function(t,i){2===t.side?B(e.CULL_FACE):z(e.CULL_FACE);let s=1===t.side;i&&(s=!s),W(s),1===t.blending&&!1===t.transparent?G(0):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;a.setTest(o),o&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):B(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:q,setLineWidth:function(t){t!==M&&(C&&e.lineWidth(t),M=t)},setPolygonOffset:X,setScissorTest:function(t){t?z(e.SCISSOR_TEST):B(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+A-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===k?e.TEXTURE0+A-1:k);let a=L[r];void 0===a&&(a={type:void 0,texture:void 0},L[r]=a),a.type===t&&a.texture===n||(k!==r&&(e.activeTexture(r),k=r),e.bindTexture(t,n||F[t]),a.type=t,a.texture=n)},unbindTexture:function(){const t=L[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let a=r.get(t);void 0===a&&(a=e.getUniformBlockIndex(n,t.name),r.set(t,a))},uniformBlockBinding:function(t,n){const r=s.get(n).get(t);i.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===I.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),I.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},k=null,L={},l={},c=new WeakMap,u=[],d=null,h=!1,p=null,m=null,f=null,g=null,v=null,x=null,y=null,b=new $l(0,0,0),_=0,w=!1,S=null,E=null,M=null,T=null,N=null,U.set(0,0,e.canvas.width,e.canvas.height),I.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),a.reset()}}}function Fp(e,t,n,r,a,i,s){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new no,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function m(e,t){return p?new OffscreenCanvas(e,t):so("canvas")}function f(e,t,n){let r=1;const a=H(e);if((a.width>n||a.height>n)&&(r=n/Math.max(a.width,a.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*a.width),i=Math.floor(r*a.height);void 0===d&&(d=m(n,i));const s=t?m(n,i):d;s.width=n,s.height=i;return s.getContext("2d").drawImage(e,0,0,n,i),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+a.width+"x"+a.height+") to ("+n+"x"+i+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+a.width+"x"+a.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function x(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function y(n,r,a,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;if(r===e.RED&&(a===e.FLOAT&&(o=e.R32F),a===e.HALF_FLOAT&&(o=e.R16F),a===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(a===e.UNSIGNED_BYTE&&(o=e.R8UI),a===e.UNSIGNED_SHORT&&(o=e.R16UI),a===e.UNSIGNED_INT&&(o=e.R32UI),a===e.BYTE&&(o=e.R8I),a===e.SHORT&&(o=e.R16I),a===e.INT&&(o=e.R32I)),r===e.RG&&(a===e.FLOAT&&(o=e.RG32F),a===e.HALF_FLOAT&&(o=e.RG16F),a===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RG_INTEGER&&(a===e.UNSIGNED_BYTE&&(o=e.RG8UI),a===e.UNSIGNED_SHORT&&(o=e.RG16UI),a===e.UNSIGNED_INT&&(o=e.RG32UI),a===e.BYTE&&(o=e.RG8I),a===e.SHORT&&(o=e.RG16I),a===e.INT&&(o=e.RG32I)),r===e.RGB_INTEGER&&(a===e.UNSIGNED_BYTE&&(o=e.RGB8UI),a===e.UNSIGNED_SHORT&&(o=e.RGB16UI),a===e.UNSIGNED_INT&&(o=e.RGB32UI),a===e.BYTE&&(o=e.RGB8I),a===e.SHORT&&(o=e.RGB16I),a===e.INT&&(o=e.RGB32I)),r===e.RGBA_INTEGER&&(a===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),a===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),a===e.UNSIGNED_INT&&(o=e.RGBA32UI),a===e.BYTE&&(o=e.RGBA8I),a===e.SHORT&&(o=e.RGBA16I),a===e.INT&&(o=e.RGBA32I)),r===e.RGB&&a===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),r===e.RGBA){const t=s?Ps:mo.getTransfer(i);a===e.FLOAT&&(o=e.RGBA32F),a===e.HALF_FLOAT&&(o=e.RGBA16F),a===e.UNSIGNED_BYTE&&(o=t===ks?e.SRGB8_ALPHA8:e.RGBA8),a===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),a===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function b(t,n){let r;return t?null===n||n===Pi||n===Ui?r=e.DEPTH24_STENCIL8:n===ki?r=e.DEPTH32F_STENCIL8:n===Ci&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Pi||n===Ui?r=e.DEPTH_COMPONENT24:n===ki?r=e.DEPTH_COMPONENT32F:n===Ci&&(r=e.DEPTH_COMPONENT16),r}function _(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==bi&&e.minFilter!==Si?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,a=h.get(n);if(a){const r=a[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(e),0===Object.keys(a).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const a=t.textures;for(let i=0,o=a.length;i<o;i++){const t=r.get(a[i]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(a[i])}r.remove(t)}(n)}function E(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const a=t.source;delete h.get(a)[n.__cacheKey],s.memory.textures--}let M=0;function T(t,a){const i=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void k(i,t,a);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,i.__webglTexture,e.TEXTURE0+a)}const N={[vi]:e.REPEAT,[xi]:e.CLAMP_TO_EDGE,[yi]:e.MIRRORED_REPEAT},A={[bi]:e.NEAREST,[_i]:e.NEAREST_MIPMAP_NEAREST,[wi]:e.NEAREST_MIPMAP_LINEAR,[Si]:e.LINEAR,[Ei]:e.LINEAR_MIPMAP_NEAREST,[Mi]:e.LINEAR_MIPMAP_LINEAR},C={[js]:e.NEVER,[Bs]:e.ALWAYS,[Ds]:e.LESS,[Is]:e.LEQUAL,[Us]:e.EQUAL,[zs]:e.GEQUAL,[Os]:e.GREATER,[Fs]:e.NOTEQUAL};function R(n,i){if(i.type!==ki||!1!==t.has("OES_texture_float_linear")||i.magFilter!==Si&&i.magFilter!==Ei&&i.magFilter!==wi&&i.magFilter!==Mi&&i.minFilter!==Si&&i.minFilter!==Ei&&i.minFilter!==wi&&i.minFilter!==Mi||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,N[i.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,N[i.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,N[i.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A[i.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A[i.minFilter]),i.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,C[i.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(i.magFilter===bi)return;if(i.minFilter!==wi&&i.minFilter!==Mi)return;if(i.type===ki&&!1===t.has("OES_texture_float_linear"))return;if(i.anisotropy>1||r.get(i).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy}}}function P(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const a=n.source;let i=h.get(a);void 0===i&&(i={},h.set(a,i));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===i[o]&&(i[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),i[o].usedTimes++;const a=i[t.__cacheKey];void 0!==a&&(i[t.__cacheKey].usedTimes--,0===a.usedTimes&&E(n)),t.__cacheKey=o,t.__webglTexture=i[o].texture}return r}function k(t,s,o){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const c=P(t,s),u=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const d=r.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=mo.getPrimaries(mo.workingColorSpace),r=s.colorSpace===As?null:mo.getPrimaries(s.colorSpace),h=s.colorSpace===As||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let p=f(s.image,!1,a.maxTextureSize);p=B(s,p);const m=i.convert(s.format,s.colorSpace),x=i.convert(s.type);let w,S=y(s.internalFormat,m,x,s.colorSpace,s.isVideoTexture);R(l,s);const E=s.mipmaps,M=!0!==s.isVideoTexture,T=void 0===d.__version||!0===c,N=u.dataReady,A=_(s,p);if(s.isDepthTexture)S=b(s.format===zi,s.type),T&&(M?n.texStorage2D(e.TEXTURE_2D,1,S,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,m,x,null));else if(s.isDataTexture)if(E.length>0){M&&T&&n.texStorage2D(e.TEXTURE_2D,A,S,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)w=E[t],M?N&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,x,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,m,x,w.data);s.generateMipmaps=!1}else M?(T&&n.texStorage2D(e.TEXTURE_2D,A,S,p.width,p.height),N&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,m,x,p.data)):n.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,m,x,p.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){M&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,S,E[0].width,E[0].height,p.depth);for(let t=0,r=E.length;t<r;t++)if(w=E[t],s.format!==Oi)if(null!==m)if(M){if(N)if(s.layerUpdates.size>0){const r=dd(w.width,w.height,s.format,s.type);for(const a of s.layerUpdates){const i=w.data.subarray(a*r/w.data.BYTES_PER_ELEMENT,(a+1)*r/w.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,a,w.width,w.height,1,m,i)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,m,w.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,p.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else M?N&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,m,x,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,p.depth,0,m,x,w.data)}else{M&&T&&n.texStorage2D(e.TEXTURE_2D,A,S,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)w=E[t],s.format!==Oi?null!==m?M?N&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?N&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,x,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,m,x,w.data)}else if(s.isDataArrayTexture)if(M){if(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,S,p.width,p.height,p.depth),N)if(s.layerUpdates.size>0){const t=dd(p.width,p.height,s.format,s.type);for(const r of s.layerUpdates){const a=p.data.subarray(r*t/p.data.BYTES_PER_ELEMENT,(r+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,p.width,p.height,1,m,x,a)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,m,x,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,m,x,p.data);else if(s.isData3DTexture)M?(T&&n.texStorage3D(e.TEXTURE_3D,A,S,p.width,p.height,p.depth),N&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,m,x,p.data)):n.texImage3D(e.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,m,x,p.data);else if(s.isFramebufferTexture){if(T)if(M)n.texStorage2D(e.TEXTURE_2D,A,S,p.width,p.height);else{let t=p.width,r=p.height;for(let a=0;a<A;a++)n.texImage2D(e.TEXTURE_2D,a,S,t,r,0,m,x,null),t>>=1,r>>=1}}else if(E.length>0){if(M&&T){const t=H(E[0]);n.texStorage2D(e.TEXTURE_2D,A,S,t.width,t.height)}for(let t=0,r=E.length;t<r;t++)w=E[t],M?N&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,m,x,w):n.texImage2D(e.TEXTURE_2D,t,S,m,x,w);s.generateMipmaps=!1}else if(M){if(T){const t=H(p);n.texStorage2D(e.TEXTURE_2D,A,S,t.width,t.height)}N&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m,x,p)}else n.texImage2D(e.TEXTURE_2D,0,S,m,x,p);g(s)&&v(l),d.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function L(t,a,s,l,c,u){const d=i.convert(s.format,s.colorSpace),h=i.convert(s.type),p=y(s.internalFormat,d,h,s.colorSpace),m=r.get(a),f=r.get(s);if(f.__renderTarget=a,!m.__hasExternalTextures){const t=Math.max(1,a.width>>u),r=Math.max(1,a.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,r,a.depth,0,d,h,null):n.texImage2D(c,u,p,t,r,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),z(a)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,f.__webglTexture,0,F(a)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,f.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function j(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const a=n.depthTexture,i=a&&a.isDepthTexture?a.type:null,s=b(n.stencilBuffer,i),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=F(n);z(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,s,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let a=0;a<t.length;a++){const s=t[a],l=i.convert(s.format,s.colorSpace),c=i.convert(s.type),u=y(s.internalFormat,l,c,s.colorSpace),d=F(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):z(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const i=r.get(a.depthTexture);i.__renderTarget=a,i.__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),T(a.depthTexture,0);const s=i.__webglTexture,l=F(a);if(a.depthTexture.format===Fi)z(a)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(a.depthTexture.format!==zi)throw new Error("Unknown depthTexture format");z(a)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function U(t){const a=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(a.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(a.__depthDisposeCallback&&a.__depthDisposeCallback(),e){const t=()=>{delete a.__boundDepthTexture,delete a.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),a.__depthDisposeCallback=t}a.__boundDepthTexture=e}if(t.depthTexture&&!a.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?D(a.__webglFramebuffer[0],t):D(a.__webglFramebuffer,t)}else if(i){a.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer[r]),void 0===a.__webglDepthbuffer[r])a.__webglDepthbuffer[r]=e.createRenderbuffer(),j(a.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=a.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer),void 0===a.__webglDepthbuffer)a.__webglDepthbuffer=e.createRenderbuffer(),j(a.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=a.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const I=[],O=[];function F(e){return Math.min(a.maxSamples,e.samples)}function z(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,t){const n=e.colorSpace,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Rs&&n!==As&&(mo.getTransfer(n)===ks?r===Oi&&a===Ti||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function H(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=M;return e>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+a.maxTextures),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(t,a){const i=r.get(t);t.version>0&&i.__version!==t.version?k(i,t,a):n.bindTexture(e.TEXTURE_2D_ARRAY,i.__webglTexture,e.TEXTURE0+a)},this.setTexture3D=function(t,a){const i=r.get(t);t.version>0&&i.__version!==t.version?k(i,t,a):n.bindTexture(e.TEXTURE_3D,i.__webglTexture,e.TEXTURE0+a)},this.setTextureCube=function(t,s){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,s,o){if(6!==s.image.length)return;const l=P(t,s),c=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const u=r.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=mo.getPrimaries(mo.workingColorSpace),r=s.colorSpace===As?null:mo.getPrimaries(s.colorSpace),d=s.colorSpace===As||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const h=s.isCompressedTexture||s.image[0].isCompressedTexture,p=s.image[0]&&s.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=h||p?p?s.image[e].image:s.image[e]:f(s.image[e],!0,a.maxCubemapSize),m[e]=B(s,m[e]);const x=m[0],b=i.convert(s.format,s.colorSpace),w=i.convert(s.type),S=y(s.internalFormat,b,w,s.colorSpace),E=!0!==s.isVideoTexture,M=void 0===u.__version||!0===l,T=c.dataReady;let N,A=_(s,x);if(R(e.TEXTURE_CUBE_MAP,s),h){E&&M&&n.texStorage2D(e.TEXTURE_CUBE_MAP,A,S,x.width,x.height);for(let t=0;t<6;t++){N=m[t].mipmaps;for(let r=0;r<N.length;r++){const a=N[r];s.format!==Oi?null!==b?E?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,b,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,S,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,b,w,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,S,a.width,a.height,0,b,w,a.data)}}}else{if(N=s.mipmaps,E&&M){N.length>0&&A++;const t=H(m[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,A,S,t.width,t.height)}for(let t=0;t<6;t++)if(p){E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,b,w,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,m[t].width,m[t].height,0,b,w,m[t].data);for(let r=0;r<N.length;r++){const a=N[r].image[t].image;E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,a.width,a.height,b,w,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,S,a.width,a.height,0,b,w,a.data)}}else{E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,w,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,b,w,m[t]);for(let r=0;r<N.length;r++){const a=N[r];E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,b,w,a.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,S,b,w,a.image[t])}}}g(s)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(o,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,a){const i=r.get(t);void 0!==n&&L(i.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==a&&U(t)},this.setupRenderTarget=function(t){const a=t.texture,o=r.get(t),l=r.get(a);t.addEventListener("dispose",S);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,d=c.length>1;if(d||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=a.version,s.memory.textures++),u){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(a.mipmaps&&a.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<a.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(a.mipmaps&&a.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<a.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===z(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const a=i.convert(r.format,r.colorSpace),s=i.convert(r.type),l=y(r.internalFormat,a,s,r.colorSpace,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),j(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),R(e.TEXTURE_CUBE_MAP,a);for(let n=0;n<6;n++)if(a.mipmaps&&a.mipmaps.length>0)for(let r=0;r<a.mipmaps.length;r++)L(o.__webglFramebuffer[n][r],t,a,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else L(o.__webglFramebuffer[n],t,a,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(a)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let a=0,i=c.length;a<i;a++){const i=c[a],s=r.get(i);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),R(e.TEXTURE_2D,i),L(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),g(i)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),R(r,a),a.mipmaps&&a.mipmaps.length>0)for(let n=0;n<a.mipmaps.length;n++)L(o.__webglFramebuffer[n],t,a,e.COLOR_ATTACHMENT0,r,n);else L(o.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0,r,0);g(a)&&v(r),n.unbindTexture()}t.depthBuffer&&U(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let a=0,i=t.length;a<i;a++){const i=t[a];if(g(i)){const t=x(e),a=r.get(i).__webglTexture;n.bindTexture(t,a),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===z(t)){const a=t.textures,i=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),d=a.length>1;if(d)for(let t=0;t<a.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<a.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(a[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,i,s,0,0,i,s,o,e.NEAREST),!0===l&&(I.length=0,O.length=0,I.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(I.push(c),O.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,O)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,I))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<a.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const i=r.get(a[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,i,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=L,this.useMultisampledRTT=z}function zp(e,t){return{convert:function(n){let r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:As;const i=mo.getTransfer(a);if(n===Ti)return e.UNSIGNED_BYTE;if(n===ji)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Di)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ii)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Ni)return e.BYTE;if(n===Ai)return e.SHORT;if(n===Ci)return e.UNSIGNED_SHORT;if(n===Ri)return e.INT;if(n===Pi)return e.UNSIGNED_INT;if(n===ki)return e.FLOAT;if(n===Li)return e.HALF_FLOAT;if(1021===n)return e.ALPHA;if(1022===n)return e.RGB;if(n===Oi)return e.RGBA;if(n===Fi)return e.DEPTH_COMPONENT;if(n===zi)return e.DEPTH_STENCIL;if(n===Bi)return e.RED;if(n===Hi)return e.RED_INTEGER;if(1030===n)return e.RG;if(n===Vi)return e.RG_INTEGER;if(n===Gi)return e.RGBA_INTEGER;if(n===Wi||n===qi||n===Xi||n===Yi)if(i===ks){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Wi)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===qi)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Xi)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Yi)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Wi)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===qi)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Xi)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Yi)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ki||n===Ji||n===Zi||n===$i){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===Ki)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ji)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Zi)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===$i)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Qi||n===es||n===ts){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Qi||n===es)return i===ks?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===ts)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===ns||n===rs||n===as||n===is||n===ss||n===os||n===ls||n===cs||n===us||n===ds||n===hs||n===ps||n===ms||n===fs){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===ns)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===rs)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===as)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===is)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ss)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===os)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ls)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===cs)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===us)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ds)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===hs)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ps)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ms)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===fs)return i===ks?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===gs||n===vs||n===xs){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===gs)return i===ks?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===vs)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===xs)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||n===ys||n===bs||n===_s){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===gs)return r.COMPRESSED_RED_RGTC1_EXT;if(n===ys)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===bs)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===_s)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ui?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class Bp{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new So;e.properties.get(r).__webglTexture=t.texture,t.depthNear===n.depthNear&&t.depthFar===n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Uc({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Cc(new Eu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Hp extends qs{constructor(e,t){super();const n=this;let r=null,a=1,i=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const m=new Bp,f=t.getContextAttributes();let g=null,v=null;const x=[],y=[],b=new no;let _=null;const w=new Bc;w.viewport=new Eo;const S=new Bc;S.viewport=new Eo;const E=[w,S],M=new rd;let T=null,N=null;function A(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||i),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",R);for(let e=0;e<x.length;e++){const t=y[e];null!==t&&(y[e]=null,x[e].disconnect(t))}T=null,N=null,m.reset(),e.setRenderTarget(g),h=null,d=null,u=null,r=null,v=null,D.stop(),n.isPresenting=!1,e.setPixelRatio(_),e.setSize(b.width,b.height,!1),n.dispatchEvent({type:"sessionend"})}function R(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,x[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<x.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const a=x[r];a&&a.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new Yc,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new Yc,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new Yc,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||i},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){g=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",C),r.addEventListener("inputsourceschange",R),!0!==f.xrCompatible&&await t.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(b);if("undefined"!==typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,i=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?zi:Fi,i=f.stencil?Ui:Pi);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:a};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(o),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),v=new To(d.textureWidth,d.textureHeight,{format:Oi,type:Ti,depthTexture:new Su(d.textureWidth,d.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}else{const n={antialias:f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),v=new To(h.framebufferWidth,h.framebufferHeight,{format:Oi,type:Ti,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,i=await r.requestReferenceSpace(s),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const P=new Ro,k=new Ro;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),M.near=S.near=w.near=t,M.far=S.far=w.far=n,T===M.near&&N===M.far||(r.updateRenderState({depthNear:M.near,depthFar:M.far}),T=M.near,N=M.far),w.layers.mask=2|e.layers.mask,S.layers.mask=4|e.layers.mask,M.layers.mask=w.layers.mask|S.layers.mask;const a=e.parent,i=M.cameras;L(M,a);for(let r=0;r<i.length;r++)L(i[r],a);2===i.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const r=P.distanceTo(k),a=t.projectionMatrix.elements,i=n.projectionMatrix.elements,s=a[14]/(a[10]-1),o=a[14]/(a[10]+1),l=(a[9]+1)/a[5],c=(a[9]-1)/a[5],u=(a[8]-1)/a[0],d=(i[8]+1)/i[0],h=s*u,p=s*d,m=r/(-u+d),f=m*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===a[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=s+m,n=o+m,a=h-f,i=p+(r-f),u=l*o/n*t,d=c*o/n*t;e.projectionMatrix.makePerspective(a,i,u,d,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(M,w,S):M.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Ks*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,M,a)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(M)};let j=null;const D=new hd;D.setAnimationLoop((function(t,a){if(c=a.getViewerPose(l||i),p=a,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const a=t[r];let i=null;if(null!==h)i=h.getViewport(a);else{const t=u.getViewSubImage(d,a);i=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(v))}let s=E[r];void 0===s&&(s=new Bc,s.layers.enable(r),s.viewport=new Eo,E[r]=s),s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(a.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(i.x,i.y,i.width,i.height),0===r&&(M.matrix.copy(s.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===n&&M.cameras.push(s)}const a=r.enabledFeatures;if(a&&a.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&u){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&m.init(e,n,r.renderState)}}for(let e=0;e<x.length;e++){const t=y[e],n=x[e];null!==t&&void 0!==n&&n.update(t,a,l||i)}j&&j(t,a),a.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:a}),p=null})),this.setAnimationLoop=function(e){j=e},this.dispose=function(){}}}const Vp=new gl,Gp=new sl;function Wp(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,1===r.side&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),1===r.side&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const a=t.get(r),i=a.envMap,s=a.envMapRotation;i&&(e.envMap.value=i,Vp.copy(s),Vp.x*=-1,Vp.y*=-1,Vp.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Vp.y*=-1,Vp.z*=-1),e.envMapRotation.value.setFromMatrix4(Gp.makeRotationFromEuler(Vp)),e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,jc(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,a,i,s,o){a.isMeshBasicMaterial||a.isMeshLambertMaterial?r(e,a):a.isMeshToonMaterial?(r(e,a),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,a)):a.isMeshPhongMaterial?(r(e,a),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,a)):a.isMeshStandardMaterial?(r(e,a),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,a),a.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,a,o)):a.isMeshMatcapMaterial?(r(e,a),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,a)):a.isMeshDepthMaterial?r(e,a):a.isMeshDistanceMaterial?(r(e,a),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,a)):a.isMeshNormalMaterial?r(e,a):a.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,a),a.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,a)):a.isPointsMaterial?function(e,t,r,a){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*a,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,a,i,s):a.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,a):a.isShadowMaterial?(e.color.value.copy(a.color),e.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}}}function qp(e,t,n,r){let a={},i={},s=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const a=e.value,i=t+"_"+n;if(void 0===r[i])return r[i]="number"===typeof a||"boolean"===typeof a?a:a.clone(),!0;{const e=r[i];if("number"===typeof a||"boolean"===typeof a){if(e!==a)return r[i]=a,!0}else if(!1===e.equals(a))return e.copy(a),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(a[n.id]),delete a[n.id],delete i[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=a[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let i=0,s=t.length;i<s;i++){const e=Array.isArray(t[i])?t[i]:[t[i]];for(let t=0,a=e.length;t<a;t++){const a=e[t],i=Array.isArray(a.value)?a.value:[a.value];for(let e=0,t=i.length;e<t;e++){const t=c(i[e]),s=n%r,o=s%t.boundary,l=s+o;n+=o,0!==l&&r-l<t.storage&&(n+=r-l),a.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),a.__offset=n,n+=t.storage}}}const a=n%r;a>0&&(n+=r-a);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),a=t.__size,i=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,a,i),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),a[n.id]=h,n.addEventListener("dispose",u));const p=d.program;r.updateUBOMapping(n,p);const m=t.render.frame;i[n.id]!==m&&(!function(t){const n=a[t.id],r=t.uniforms,i=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let a=0,s=r.length;a<s;a++){const t=Array.isArray(r[a])?r[a]:[r[a]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,a,n,i)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let a=0;for(let i=0;i<n.length;i++){const s=n[i],o=c(s);"number"===typeof s||"boolean"===typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+a,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,a),a+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),i[n.id]=m)},dispose:function(){for(const t in a)e.deleteBuffer(a[t]);s=[],a={},i={}}}}class Xp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=oo(),context:n=null,depth:r=!0,stencil:a=!1,alpha:i=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:d=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=i;const p=new Uint32Array(4),m=new Int32Array(4);let f=null,g=null;const v=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const y=this;let b=!1;this._outputColorSpace=Cs;let _=0,w=0,S=null,E=-1,M=null;const T=new Eo,N=new Eo;let A=null;const C=new $l(0);let R=0,P=t.width,k=t.height,L=1,j=null,D=null;const U=new Eo(0,0,P,k),I=new Eo(0,0,P,k);let O=!1;const F=new nu;let z=!1,B=!1;const H=new sl,V=new sl,G=new Ro,W=new Eo,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function Y(){return null===S?L:1}let K,J,Z,$,Q,ee,te,ne,re,ae,ie,se,oe,le,ce,ue,de,he,pe,me,fe,ge,ve,xe,ye=n;function be(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Ua)),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===ye){const t="webgl2";if(ye=be(t,e),null===ye)throw be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ve){throw console.error("THREE.WebGLRenderer: "+Ve.message),Ve}function _e(){K=new Gd(ye),K.init(),ge=new zp(ye,K),J=new Sd(ye,K,e,ge),Z=new Op(ye,K),J.reverseDepthBuffer&&d&&Z.buffers.depth.setReversed(!0),$=new Xd(ye),Q=new Mp,ee=new Fp(ye,K,Z,Q,J,ge,$),te=new Md(y),ne=new Vd(y),re=new pd(ye),ve=new _d(ye,re),ae=new Wd(ye,re,$,ve),ie=new Kd(ye,ae,re,$),pe=new Yd(ye,J,ee),ue=new Ed(Q),se=new Ep(y,te,ne,K,J,ve,ue),oe=new Wp(y,Q),le=new Cp,ce=new Dp(K),he=new bd(y,te,ne,Z,ie,h,o),de=new Up(y,ie,J),xe=new qp(ye,$,J,Z),me=new wd(ye,K,$),fe=new qd(ye,K,$),$.programs=se.programs,y.capabilities=J,y.extensions=K,y.properties=Q,y.renderLists=le,y.shadowMap=de,y.state=Z,y.info=$}_e();const we=new Hp(y,ye);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=$.autoReset,t=de.enabled,n=de.autoUpdate,r=de.needsUpdate,a=de.type;_e(),$.autoReset=e,de.enabled=t,de.autoUpdate=n,de.needsUpdate=r,de.type=a}function Me(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Te(e){const t=e.target;t.removeEventListener("dispose",Te),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){se.releaseProgram(e)})),e.isShaderMaterial&&se.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Ne(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Ie(e,t,n),e.side=0,e.needsUpdate=!0,Ie(e,t,n),e.side=2):Ie(e,t,n)}this.xr=we,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=K.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=K.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(e){void 0!==e&&(L=e,this.setSize(P,k,!1))},this.getSize=function(e){return e.set(P,k)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=e,k=n,t.width=Math.floor(e*L),t.height=Math.floor(n*L),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(P*L,k*L).floor()},this.setDrawingBufferSize=function(e,n,r){P=e,k=n,L=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(U)},this.setViewport=function(e,t,n,r){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,n,r),Z.viewport(T.copy(U).multiplyScalar(L).round())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),Z.scissor(N.copy(I).multiplyScalar(L).round())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){Z.setScissorTest(O=e)},this.setOpaqueSort=function(e){j=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor(...arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha(...arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==S){const t=S.texture.format;e=t===Gi||t===Vi||t===Hi}if(e){const e=S.texture.type,t=e===Ti||e===Pi||e===Ci||e===Ui||e===ji||e===Di,n=he.getClearColor(),r=he.getClearAlpha(),a=n.r,i=n.g,s=n.b;t?(p[0]=a,p[1]=i,p[2]=s,p[3]=r,ye.clearBufferuiv(ye.COLOR,0,p)):(m[0]=a,m[1]=i,m[2]=s,m[3]=r,ye.clearBufferiv(ye.COLOR,0,m))}else n|=ye.COLOR_BUFFER_BIT}e&&(n|=ye.DEPTH_BUFFER_BIT),t&&(n|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),he.dispose(),le.dispose(),ce.dispose(),Q.dispose(),te.dispose(),ne.dispose(),ie.dispose(),ve.dispose(),xe.dispose(),se.dispose(),we.dispose(),we.removeEventListener("sessionstart",Ce),we.removeEventListener("sessionend",Re),Pe.stop()},this.renderBufferDirect=function(e,t,n,r,a,i){null===t&&(t=q);const s=a.isMesh&&a.matrixWorld.determinant()<0,o=function(e,t,n,r,a){!0!==t.isScene&&(t=q);ee.resetTextureUnits();const i=t.fog,s=r.isMeshStandardMaterial?t.environment:null,o=null===S?y.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:Rs,l=(r.isMeshStandardMaterial?ne:te).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=0;r.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(m=y.toneMapping));const f=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==f?f.length:0,x=Q.get(r),b=g.state.lights;if(!0===z&&(!0===B||e!==M)){const t=e===M&&r.id===E;ue.setState(r,e,t)}let _=!1;r.version===x.__version?x.needsLights&&x.lightsStateVersion!==b.state.version||x.outputColorSpace!==o||a.isBatchedMesh&&!1===x.batching?_=!0:a.isBatchedMesh||!0!==x.batching?a.isBatchedMesh&&!0===x.batchingColor&&null===a.colorTexture||a.isBatchedMesh&&!1===x.batchingColor&&null!==a.colorTexture||a.isInstancedMesh&&!1===x.instancing?_=!0:a.isInstancedMesh||!0!==x.instancing?a.isSkinnedMesh&&!1===x.skinning?_=!0:a.isSkinnedMesh||!0!==x.skinning?a.isInstancedMesh&&!0===x.instancingColor&&null===a.instanceColor||a.isInstancedMesh&&!1===x.instancingColor&&null!==a.instanceColor||a.isInstancedMesh&&!0===x.instancingMorph&&null===a.morphTexture||a.isInstancedMesh&&!1===x.instancingMorph&&null!==a.morphTexture||x.envMap!==l||!0===r.fog&&x.fog!==i?_=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===ue.numPlanes&&x.numIntersection===ue.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==u||x.morphTargets!==d||x.morphNormals!==h||x.morphColors!==p||x.toneMapping!==m||x.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,x.__version=r.version);let w=x.currentProgram;!0===_&&(w=Ie(r,t,a));let T=!1,N=!1,A=!1;const C=w.getUniforms(),R=x.uniforms;Z.useProgram(w.program)&&(T=!0,N=!0,A=!0);r.id!==E&&(E=r.id,N=!0);if(T||M!==e){Z.buffers.depth.getReversed()?(H.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(H),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(H),C.setValue(ye,"projectionMatrix",H)):C.setValue(ye,"projectionMatrix",e.projectionMatrix),C.setValue(ye,"viewMatrix",e.matrixWorldInverse);const t=C.map.cameraPosition;void 0!==t&&t.setValue(ye,G.setFromMatrixPosition(e.matrixWorld)),J.logarithmicDepthBuffer&&C.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&C.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),M!==e&&(M=e,N=!0,A=!0)}if(a.isSkinnedMesh){C.setOptional(ye,a,"bindMatrix"),C.setOptional(ye,a,"bindMatrixInverse");const e=a.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),C.setValue(ye,"boneTexture",e.boneTexture,ee))}a.isBatchedMesh&&(C.setOptional(ye,a,"batchingTexture"),C.setValue(ye,"batchingTexture",a._matricesTexture,ee),C.setOptional(ye,a,"batchingIdTexture"),C.setValue(ye,"batchingIdTexture",a._indirectTexture,ee),C.setOptional(ye,a,"batchingColorTexture"),null!==a._colorsTexture&&C.setValue(ye,"batchingColorTexture",a._colorsTexture,ee));const P=n.morphAttributes;void 0===P.position&&void 0===P.normal&&void 0===P.color||pe.update(a,n,w);(N||x.receiveShadow!==a.receiveShadow)&&(x.receiveShadow=a.receiveShadow,C.setValue(ye,"receiveShadow",a.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(R.envMapIntensity.value=t.environmentIntensity);N&&(C.setValue(ye,"toneMappingExposure",y.toneMappingExposure),x.needsLights&&(D=A,(j=R).ambientLightColor.needsUpdate=D,j.lightProbe.needsUpdate=D,j.directionalLights.needsUpdate=D,j.directionalLightShadows.needsUpdate=D,j.pointLights.needsUpdate=D,j.pointLightShadows.needsUpdate=D,j.spotLights.needsUpdate=D,j.spotLightShadows.needsUpdate=D,j.rectAreaLights.needsUpdate=D,j.hemisphereLights.needsUpdate=D),i&&!0===r.fog&&oe.refreshFogUniforms(R,i),oe.refreshMaterialUniforms(R,r,L,k,g.state.transmissionRenderTarget[e.id]),ep.upload(ye,Oe(x),R,ee));var j,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ep.upload(ye,Oe(x),R,ee),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&C.setValue(ye,"center",a.center);if(C.setValue(ye,"modelViewMatrix",a.modelViewMatrix),C.setValue(ye,"normalMatrix",a.normalMatrix),C.setValue(ye,"modelMatrix",a.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];xe.update(n,w),xe.bind(n,w)}}return w}(e,t,n,r,a);Z.setMaterial(r,s);let l=n.index,c=1;if(!0===r.wireframe){if(l=ae.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==i&&(h=Math.max(h,i.start*c),p=Math.min(p,(i.start+i.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const m=p-h;if(m<0||m===1/0)return;let f;ve.setup(a,r,o,n,l);let v=me;if(null!==l&&(f=re.get(l),v=fe,v.setIndex(f)),a.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*Y()),v.setMode(ye.LINES)):v.setMode(ye.TRIANGLES);else if(a.isLine){let e=r.linewidth;void 0===e&&(e=1),Z.setLineWidth(e*Y()),a.isLineSegments?v.setMode(ye.LINES):a.isLineLoop?v.setMode(ye.LINE_LOOP):v.setMode(ye.LINE_STRIP)}else a.isPoints?v.setMode(ye.POINTS):a.isSprite&&v.setMode(ye.TRIANGLES);if(a.isBatchedMesh)if(null!==a._multiDrawInstances)co("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),v.renderMultiDrawInstances(a._multiDrawStarts,a._multiDrawCounts,a._multiDrawCount,a._multiDrawInstances);else if(K.get("WEBGL_multi_draw"))v.renderMultiDraw(a._multiDrawStarts,a._multiDrawCounts,a._multiDrawCount);else{const e=a._multiDrawStarts,t=a._multiDrawCounts,n=a._multiDrawCount,i=l?re.get(l).bytesPerElement:1,s=Q.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)s.setValue(ye,"_gl_DrawID",r),v.render(e[r]/i,t[r])}else if(a.isInstancedMesh)v.renderInstances(h,m,a.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,m,t)}else v.render(h,m)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),g=ce.get(n),g.init(t),x.push(g),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights();const r=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let a=0;a<t.length;a++){const i=t[a];Ne(i,n,e),r.add(i)}else Ne(t,n,e),r.add(t)})),g=x.pop(),r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){Q.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==K.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ae=null;function Ce(){Pe.stop()}function Re(){Pe.start()}const Pe=new hd;function ke(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=ie.update(e),a=e.material;a.visible&&f.push(e,t,a,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=ie.update(e),a=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(V)),Array.isArray(a)){const r=t.groups;for(let i=0,s=r.length;i<s;i++){const s=r[i],o=a[s.materialIndex];o&&o.visible&&f.push(e,t,o,n,W.z,s)}}else a.visible&&f.push(e,t,a,n,W.z,null)}const a=e.children;for(let i=0,s=a.length;i<s;i++)ke(a[i],t,n,r)}function Le(e,t,n,r){const a=e.opaque,i=e.transmissive,s=e.transparent;g.setupLightsView(n),!0===z&&ue.setGlobalState(y.clippingPlanes,n),r&&Z.viewport(T.copy(r)),a.length>0&&De(a,t,n),i.length>0&&De(i,t,n),s.length>0&&De(s,t,n),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function je(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[r.id]&&(g.state.transmissionRenderTarget[r.id]=new To(1,1,{generateMipmaps:!0,type:K.has("EXT_color_buffer_half_float")||K.has("EXT_color_buffer_float")?Li:Ti,minFilter:Mi,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mo.workingColorSpace}));const i=g.state.transmissionRenderTarget[r.id],s=r.viewport||T;i.setSize(s.z*y.transmissionResolutionScale,s.w*y.transmissionResolutionScale);const o=y.getRenderTarget();y.setRenderTarget(i),y.getClearColor(C),R=y.getClearAlpha(),R<1&&y.setClearColor(16777215,.5),y.clear(),X&&he.render(n);const l=y.toneMapping;y.toneMapping=0;const c=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),g.setupLightsView(r),!0===z&&ue.setGlobalState(y.clippingPlanes,r),De(e,n,r),ee.updateMultisampleRenderTarget(i),ee.updateRenderTargetMipmap(i),!1===K.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let a=0,i=t.length;a<i;a++){const i=t[a],s=i.object,o=i.geometry,l=i.material,c=i.group;if(2===l.side&&s.layers.test(r.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Ue(s,n,r,o,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(ee.updateMultisampleRenderTarget(i),ee.updateRenderTargetMipmap(i))}y.setRenderTarget(o),y.setClearColor(C,R),void 0!==c&&(r.viewport=c),y.toneMapping=l}function De(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let a=0,i=e.length;a<i;a++){const i=e[a],s=i.object,o=i.geometry,l=i.group;let c=i.material;!0===c.allowOverride&&null!==r&&(c=r),s.layers.test(n.layers)&&Ue(s,t,n,o,c,l)}}function Ue(e,t,n,r,a,i){e.onBeforeRender(y,t,n,r,a,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(y,t,n,r,e,i),!0===a.transparent&&2===a.side&&!1===a.forceSinglePass?(a.side=1,a.needsUpdate=!0,y.renderBufferDirect(n,t,r,a,e,i),a.side=0,a.needsUpdate=!0,y.renderBufferDirect(n,t,r,a,e,i),a.side=2):y.renderBufferDirect(n,t,r,a,e,i),e.onAfterRender(y,t,n,r,a,i)}function Ie(e,t,n){!0!==t.isScene&&(t=q);const r=Q.get(e),a=g.state.lights,i=g.state.shadowsArray,s=a.state.version,o=se.getParameters(e,a.state,i,t,n),l=se.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ne:te).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Te),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Fe(e,o),u}else o.uniforms=se.getUniforms(e),e.onBeforeCompile(o,y),u=se.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const d=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ue.uniform),Fe(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(d.ambientLightColor.value=a.state.ambient,d.lightProbe.value=a.state.probe,d.directionalLights.value=a.state.directional,d.directionalLightShadows.value=a.state.directionalShadow,d.spotLights.value=a.state.spot,d.spotLightShadows.value=a.state.spotShadow,d.rectAreaLights.value=a.state.rectArea,d.ltc_1.value=a.state.rectAreaLTC1,d.ltc_2.value=a.state.rectAreaLTC2,d.pointLights.value=a.state.point,d.pointLightShadows.value=a.state.pointShadow,d.hemisphereLights.value=a.state.hemi,d.directionalShadowMap.value=a.state.directionalShadowMap,d.directionalShadowMatrix.value=a.state.directionalShadowMatrix,d.spotShadowMap.value=a.state.spotShadowMap,d.spotLightMatrix.value=a.state.spotLightMatrix,d.spotLightMap.value=a.state.spotLightMap,d.pointShadowMap.value=a.state.pointShadowMap,d.pointShadowMatrix.value=a.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Oe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=ep.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Pe.setAnimationLoop((function(e){Ae&&Ae(e)})),"undefined"!==typeof self&&Pe.setContext(self),this.setAnimationLoop=function(e){Ae=e,we.setAnimationLoop(e),null===e?Pe.stop():Pe.start()},we.addEventListener("sessionstart",Ce),we.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(t),t=we.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,S),g=ce.get(e,x.length),g.init(t),x.push(g),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(V),B=this.localClippingEnabled,z=ue.init(this.clippingPlanes,B),f=le.get(e,v.length),f.init(),v.push(f),!0===we.enabled&&!0===we.isPresenting){const e=y.xr.getDepthSensingMesh();null!==e&&ke(e,t,-1/0,y.sortObjects)}ke(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(j,D),X=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),X&&he.addToRenderList(f,e),this.info.render.frame++,!0===z&&ue.beginShadows();const n=g.state.shadowsArray;de.render(n,e,t),!0===z&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=f.opaque,a=f.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(a.length>0)for(let t=0,i=n.length;t<i;t++){je(r,a,e,n[t])}X&&he.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Le(f,e,r,r.viewport)}}else a.length>0&&je(r,a,e,t),X&&he.render(e),Le(f,e,t);null!==S&&0===w&&(ee.updateMultisampleRenderTarget(S),ee.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(y,e,t),ve.resetDefaultState(),E=-1,M=null,x.pop(),x.length>0?(g=x[x.length-1],!0===z&&ue.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,v.pop(),f=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){const r=Q.get(e);r.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===r.__autoAllocateDepthBuffer&&(r.__useRenderToTexture=!1),Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=r.__autoAllocateDepthBuffer?void 0:n,r.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const ze=ye.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S=e,_=t,w=n;let r=!0,a=null,i=!1,s=!1;if(e){const o=Q.get(e);if(void 0!==o.__useDefaultFramebuffer)Z.bindFramebuffer(ye.FRAMEBUFFER,null),r=!1;else if(void 0===o.__webglFramebuffer)ee.setupRenderTarget(e);else if(o.__hasExternalTextures)ee.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&Q.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=Array.isArray(c[t])?c[t][n]:c[t],i=!0):a=e.samples>0&&!1===ee.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,T.copy(e.viewport),N.copy(e.scissor),A=e.scissorTest}else T.copy(U).multiplyScalar(L).floor(),N.copy(I).multiplyScalar(L).floor(),A=O;0!==n&&(a=ze);if(Z.bindFramebuffer(ye.FRAMEBUFFER,a)&&r&&Z.drawBuffers(e,a),Z.viewport(T),Z.scissor(N),Z.setScissorTest(A),i){const r=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(s){const r=Q.get(e.texture),a=t;ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,r.__webglTexture,n,a)}else if(null!==e&&0!==n){const t=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,t.__webglTexture,n)}E=-1},this.readRenderTargetPixels=function(e,t,n,r,a,i,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){Z.bindFramebuffer(ye.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(!J.textureFormatReadable(o))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&ye.readPixels(t,n,r,a,ge.convert(o),ge.convert(l),i)}finally{const e=null!==S?Q.get(S).__webglFramebuffer:null;Z.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,a,i,s){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a){Z.bindFramebuffer(ye.FRAMEBUFFER,o);const s=e.texture,l=s.format,c=s.type;if(!J.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const u=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,u),ye.bufferData(ye.PIXEL_PACK_BUFFER,i.byteLength,ye.STREAM_READ),ye.readPixels(t,n,r,a,ge.convert(l),ge.convert(c),0);const d=null!==S?Q.get(S).__webglFramebuffer:null;Z.bindFramebuffer(ye.FRAMEBUFFER,d);const h=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await function(e,t,n){return new Promise((function(r,a){setTimeout((function i(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:a();break;case e.TIMEOUT_EXPIRED:setTimeout(i,n);break;default:r()}}),n)}))}(ye,h,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,u),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,i),ye.deleteBuffer(u),ye.deleteSync(h),i}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),a=Math.floor(e.image.width*r),i=Math.floor(e.image.height*r),s=null!==t?t.x:0,o=null!==t?t.y:0;ee.setTexture2D(e,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,s,o,a,i),Z.unbindTexture()};const Be=ye.createFramebuffer(),He=ye.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,r,a,i,s,o,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===m&&(0!==p?(co("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),m=p,p=0):m=0);const f=e.isCompressedTexture?e.mipmaps[m]:e.image;if(null!==d)n=d.max.x-d.min.x,r=d.max.y-d.min.y,a=d.isBox3?d.max.z-d.min.z:1,i=d.min.x,s=d.min.y,o=d.isBox3?d.min.z:0;else{const t=Math.pow(2,-p);n=Math.floor(f.width*t),r=Math.floor(f.height*t),a=e.isDataArrayTexture?f.depth:e.isData3DTexture?Math.floor(f.depth*t):1,i=0,s=0,o=0}null!==h?(l=h.x,c=h.y,u=h.z):(l=0,c=0,u=0);const g=ge.convert(t.format),v=ge.convert(t.type);let x;t.isData3DTexture?(ee.setTexture3D(t,0),x=ye.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ee.setTexture2DArray(t,0),x=ye.TEXTURE_2D_ARRAY):(ee.setTexture2D(t,0),x=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,t.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,t.unpackAlignment);const y=ye.getParameter(ye.UNPACK_ROW_LENGTH),b=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),_=ye.getParameter(ye.UNPACK_SKIP_PIXELS),w=ye.getParameter(ye.UNPACK_SKIP_ROWS),S=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,f.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,f.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,i),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,s),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,o);const E=e.isDataArrayTexture||e.isData3DTexture,M=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const d=Q.get(e),h=Q.get(t),f=Q.get(d.__renderTarget),g=Q.get(h.__renderTarget);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,f.__webglFramebuffer),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<a;v++)E&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,p,o+v),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,m,u+v)),ye.blitFramebuffer(i,s,n,r,l,c,n,r,ye.DEPTH_BUFFER_BIT,ye.NEAREST);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,null),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(0!==p||e.isRenderTargetTexture||Q.has(e)){const d=Q.get(e),h=Q.get(t);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,Be),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,He);for(let e=0;e<a;e++)E?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,d.__webglTexture,p,o+e):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,d.__webglTexture,p),M?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,h.__webglTexture,m,u+e):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,h.__webglTexture,m),0!==p?ye.blitFramebuffer(i,s,n,r,l,c,n,r,ye.COLOR_BUFFER_BIT,ye.NEAREST):M?ye.copyTexSubImage3D(x,m,l,c,u+e,i,s,n,r):ye.copyTexSubImage2D(x,m,l,c,i,s,n,r);Z.bindFramebuffer(ye.READ_FRAMEBUFFER,null),Z.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else M?e.isDataTexture||e.isData3DTexture?ye.texSubImage3D(x,m,l,c,u,n,r,a,g,v,f.data):t.isCompressedArrayTexture?ye.compressedTexSubImage3D(x,m,l,c,u,n,r,a,g,f.data):ye.texSubImage3D(x,m,l,c,u,n,r,a,g,v,f):e.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,m,l,c,n,r,g,v,f.data):e.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,m,l,c,f.width,f.height,g,f.data):ye.texSubImage2D(ye.TEXTURE_2D,m,l,c,n,r,g,v,f);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,y),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,b),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,_),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,w),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,S),0===m&&t.generateMipmaps&&ye.generateMipmap(x),Z.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return co('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,a)},this.initRenderTarget=function(e){void 0===Q.get(e).__webglFramebuffer&&ee.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),Z.unbindTexture()},this.resetState=function(){_=0,w=0,S=null,Z.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Gs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=mo._getDrawingBufferColorSpace(e),t.unpackColorSpace=mo._getUnpackColorSpace()}}const Yp=()=>{const e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{if(!e.current)return;console.log("NeuralHumanHead: Starting initialization");const t=e.current,r=t.clientWidth||500,a=t.clientHeight||600;console.log("Container dimensions:",r,"x",a);const i=new Kc;i.background=new $l(657941);const s=new Bc(75,r/a,.1,1e3);s.position.set(0,0,3);const o=new Xp({antialias:!0,alpha:!1});o.setSize(r,a),o.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.appendChild(o.domElement),console.log("Canvas added to container");const l={rotation:{y:0}},c=2500,u=new Float32Array(7500),d=new Float32Array(7500);for(let e=0;e<c;e++){const t=Math.acos(2*e/c-1),n=Math.sqrt(c*Math.PI)*t;let r=.7+.5*Math.random();const a=Math.cos(t),i=Math.sin(t)*Math.cos(n),s=Math.sin(t)*Math.sin(n);if(a>.4&&Math.abs(i)<.7&&(r*=1.1),a>.2&&a<.6&&Math.abs(i)>.6&&(r*=.85),a>0&&a<.4&&Math.abs(i)<.5&&s>.3&&(r*=.9),a>-.2&&a<.2&&Math.abs(i)>.4&&Math.abs(i)<.8&&(r*=1.05),a>-.6&&a<-.2&&Math.abs(i)>.3&&(r*=.95),a<-.4){const e=1-1.2*Math.abs(i);r*=Math.max(.6,e),Math.abs(i)<.3&&(r*=1.1)}const o=r*i,l=r*a;let h=r*s;Math.abs(o)<.4&&l>-.5&&l<.4&&h>0&&(Math.abs(o)<.15&&l>-.1&&l<.3?h+=.3+.2*Math.random():h+=.15+.15*Math.random()),Math.abs(o)>.8&&Math.abs(l)<.3&&(h*=.3,r*=.9),h<-.2&&(h*=.8),u[3*e]=o,u[3*e+1]=l,u[3*e+2]=h;const p=Math.random();l>.3?(d[3*e]=.1+.2*p,d[3*e+1]=.6+.4*p,d[3*e+2]=1):Math.abs(o)>.6?(d[3*e]=.3+.3*p,d[3*e+1]=.2+.3*p,d[3*e+2]=1):l<-.2?(d[3*e]=.1,d[3*e+1]=.4+.6*p,d[3*e+2]=.8+.2*p):(d[3*e]=.2+.3*p,d[3*e+1]=.7+.3*p,d[3*e+2]=1)}const h=new vc;h.setAttribute("position",new sc(u,3)),h.setAttribute("color",new sc(d,3));const p=new gu({size:.02,vertexColors:!0,transparent:!0,opacity:.95,blending:2}),m=new _u(h,p);i.add(m);const f=new vc,g=[],v=[];for(let e=0;e<c;e++)for(let t=e+1;t<c;t++){const n=Math.sqrt(Math.pow(u[3*e]-u[3*t],2)+Math.pow(u[3*e+1]-u[3*t+1],2)+Math.pow(u[3*e+2]-u[3*t+2],2));if(n<.3){g.push(u[3*e],u[3*e+1],u[3*e+2],u[3*t],u[3*t+1],u[3*t+2]);const r=1-n/.3;v.push(.2*r,.6*r,1*r,.2*r,.6*r,1*r)}}let x=null;if(g.length>0){f.setAttribute("position",new cc(g,3)),f.setAttribute("color",new cc(v,3));const e=new ru({vertexColors:!0,transparent:!0,opacity:.3,blending:2});x=new fu(f,e),i.add(x)}const y=new nd(4210752,.4);i.add(y);const b=new ed(43775,1,100);b.position.set(2,2,2),i.add(b);const _=[];for(let e=0;e<30;e++){const t=new Mu(.01,6,6),n=new nc({color:(new $l).setHSL(.5+.3*Math.random(),1,.8),transparent:!0,opacity:.8}),r=new Cc(t,n),a=e/30*Math.PI*2+.5*Math.random(),s=1.8*Math.random()-.7,o=1+.4*Math.random();r.position.x=o*Math.cos(a)+.2*(Math.random()-.5),r.position.y=s+.1*(Math.random()-.5),r.position.z=o*Math.sin(a)*.7+.3*(Math.random()-.5),r.userData={originalPos:r.position.clone(),speed:.2+.5*Math.random(),phase:Math.random()*Math.PI*2,orbitRadius:.08+.12*Math.random(),verticalSpeed:.1+.2*Math.random()},_.push(r),i.add(r)}console.log("Scene objects created, starting animation");const w=e=>{try{l&&(l.rotation.y=2e-4*e),m.rotation.y=2e-4*e,x&&(x.rotation.y=2e-4*e);const t=m.geometry.attributes.color.array;for(let n=0;n<c;n++){const r=.3*Math.sin(.003*e+.1*n)+.7,a=.2*Math.sin(.001*e+.05*n)+.8;t[3*n]=.1+.1*Math.sin(.002*e+n),t[3*n+1]=(.5+.3*Math.random())*r*a,t[3*n+2]=1*a}if(m.geometry.attributes.color.needsUpdate=!0,_.forEach(((t,n)=>{const{originalPos:r,speed:a,phase:i,orbitRadius:s,verticalSpeed:o}=t.userData,l=5e-4*e*a,c=3e-4*e*o;t.position.x=r.x+Math.cos(l+i)*s,t.position.y=r.y+Math.sin(c+i)*s*.8,t.position.z=r.z+Math.sin(l+i)*s*.6,t.material.opacity=.5+.3*Math.sin(.005*e+.2*n);const u=(.5+.2*Math.sin(8e-4*e+.3*n))%1;t.material.color.setHSL(u,.9+.1*Math.sin(.002*e+n),.8)})),x){const t=x.geometry.attributes.color.array,n=18;for(let r=0;r<t.length;r+=n){const n=.4*Math.sin(.003*e+.008*r)+.5,a=.3*Math.sin(.0015*e+.015*r)+.4,i=.2*Math.sin(.001*e+.02*r)+.6;r+1<t.length&&(t[r+1]=.7*n*a),r+4<t.length&&(t[r+4]=.7*n*a),r+2<t.length&&(t[r+2]=1*i),r+5<t.length&&(t[r+5]=1*i)}x.geometry.attributes.color.needsUpdate=!0}o.render(i,s),n.current=requestAnimationFrame(w)}catch(t){console.error("Animation error:",t)}},S=()=>{if(!t)return;const e=t.clientWidth||500,n=t.clientHeight||600;s.aspect=e/n,s.updateProjectionMatrix(),o.setSize(e,n)};return window.addEventListener("resize",S),w(0),console.log("Animation started"),()=>{console.log("Cleaning up NeuralHumanHead"),window.removeEventListener("resize",S),n.current&&cancelAnimationFrame(n.current),i.traverse((e=>{e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):e.material.dispose())})),o.dispose(),t&&o.domElement&&t.contains(o.domElement)&&t.removeChild(o.domElement)}}),[]),(0,ga.jsxs)("div",{style:{width:"100%",height:"100%",minHeight:"100vh",margin:0,padding:0,overflow:"hidden",position:"relative",background:"linear-gradient(135deg, #0a0a15 0%, #1a1a2e 50%, #16213e 100%)",boxSizing:"border-box"},children:[(0,ga.jsx)("div",{ref:e,style:{width:"100%",height:"100%",minHeight:"100vh",margin:0,padding:0,cursor:"grab",boxSizing:"border-box"}}),(0,ga.jsx)("style",{children:"\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n      "})]})},Kp=n.p+"static/media/analytics-icon.626793a74a8798dfd17f.png",Jp=n.p+"static/media/demographics-icon.1ed7229ecb14d78695d4.png",Zp=n.p+"static/media/trends-icon.8b68fb61d45929084c10.png",$p=n.p+"static/media/risk-icon.8cc7ad0cc8e768e6bfde.png",Qp=n.p+"static/media/efficiency.21be78c74c5695940b57.png",em=n.p+"static/media/cost-management.bdae0c7d74f8c7ea7408.png",tm=n.p+"static/media/strategic-planning.6ef79c6d0b8e6af42fb8.png",nm=n.p+"static/media/risk-mitigation.d02208801ca46c1416d3.png",rm=()=>{const e=(0,t.useRef)(null),n=(0,t.useRef)(null),r=pe();return(0,t.useEffect)((()=>{n.current=setTimeout((()=>{const e=document.querySelector(".hero-title"),t=document.querySelector(".hero-subtitle"),n=document.querySelector(".hero-actions");e&&e.classList.add("animate-slideDown"),t&&t.classList.add("animate-slideUp"),n&&n.classList.add("animate-fadeIn")}),100),e.current=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(t.target.classList.add("fade-in-visible"),e.current.unobserve(t.target))}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll(".fade-in").forEach((t=>e.current.observe(t))),Da(),()=>{e.current&&e.current.disconnect(),n.current&&clearTimeout(n.current)}}),[]),(0,ga.jsxs)("div",{className:"home-page",children:[(0,ga.jsxs)("header",{className:"hero-section",children:[(0,ga.jsxs)("div",{className:"hero-background",children:[(0,ga.jsx)(Yp,{}),(0,ga.jsx)("div",{className:"hero-overlay"})]}),(0,ga.jsxs)("div",{className:"container hero-content",children:[(0,ga.jsx)("h1",{className:"hero-title",children:"Transform HR with AI Analytics"}),(0,ga.jsx)("p",{className:"hero-subtitle",children:"Optimize workforce planning with advanced attrition insights"}),(0,ga.jsxs)("div",{className:"hero-actions",children:[(0,ga.jsx)("button",{className:"get-started-btn hero-action-btn",onClick:()=>r("/signup"),children:"Try Now"}),(0,ga.jsx)("button",{className:"cta-button hero-action-btn",onClick:()=>r("/book-demo"),children:"Schedule Demo"})]})]})]}),(0,ga.jsx)("section",{className:"tool-section",children:(0,ga.jsxs)("div",{className:"container",children:[(0,ga.jsxs)("div",{className:"tool-header fade-in",children:[(0,ga.jsx)("h2",{children:"Explore Our Analytics Platform"}),(0,ga.jsx)("p",{children:"Unlock powerful workforce insights in minutes"})]}),(0,ga.jsx)("div",{className:"tool-card fade-in",children:(0,ga.jsx)(gt,{to:"/analysis",className:"btn btn-primary btn-demo-request",children:"Launch Analysis Tool"})})]})}),(0,ga.jsx)("section",{className:"cta-section",children:(0,ga.jsx)("div",{className:"container",children:(0,ga.jsxs)("div",{className:"cta-content fade-in",children:[(0,ga.jsx)("h2",{children:"Ready to Optimize Your Workforce?"}),(0,ga.jsx)("p",{children:"Get started with our AI-driven analytics today"}),(0,ga.jsx)("button",{className:"cta-button-large",onClick:()=>r("/signup"),children:"Start Free Trial"})]})})}),(0,ga.jsx)("section",{className:"capabilities-section",children:(0,ga.jsxs)("div",{className:"container",children:[(0,ga.jsx)("h2",{className:"section-title fade-in",children:"Why Choose Us"}),(0,ga.jsxs)("div",{className:"capabilities-grid",children:[(0,ga.jsxs)("div",{className:"capability-card fade-in",children:[(0,ga.jsx)("div",{className:"capability-icon",children:(0,ga.jsx)("img",{src:Kp,alt:"Analytics"})}),(0,ga.jsx)("h3",{children:"Attrition Analysis"}),(0,ga.jsx)("p",{children:"Track employee turnover patterns with precision"})]}),(0,ga.jsxs)("div",{className:"capability-card fade-in",children:[(0,ga.jsx)("div",{className:"capability-icon",children:(0,ga.jsx)("img",{src:Jp,alt:"Demographics"})}),(0,ga.jsx)("h3",{children:"Demographic Insights"}),(0,ga.jsx)("p",{children:"Analyze trends by department and location"})]}),(0,ga.jsxs)("div",{className:"capability-card fade-in",children:[(0,ga.jsx)("div",{className:"capability-icon",children:(0,ga.jsx)("img",{src:Zp,alt:"Trends"})}),(0,ga.jsx)("h3",{children:"Trend Identification"}),(0,ga.jsx)("p",{children:"Spot significant patterns over time"})]}),(0,ga.jsxs)("div",{className:"capability-card fade-in",children:[(0,ga.jsx)("div",{className:"capability-icon",children:(0,ga.jsx)("img",{src:$p,alt:"Risk Assessment"})}),(0,ga.jsx)("h3",{children:"Risk Assessment"}),(0,ga.jsx)("p",{children:"Identify retention risks proactively"})]})]})]})}),(0,ga.jsx)("section",{className:"value-section",children:(0,ga.jsxs)("div",{className:"container",children:[(0,ga.jsx)("h2",{className:"section-title fade-in",children:"Business Benefits"}),(0,ga.jsxs)("div",{className:"value-grid",children:[(0,ga.jsxs)("div",{className:"value-card fade-in",children:[(0,ga.jsx)("div",{className:"value-image",children:(0,ga.jsx)("img",{src:Qp,alt:"Operational Efficiency"})}),(0,ga.jsxs)("div",{className:"value-content",children:[(0,ga.jsx)("h3",{children:"Operational Efficiency"}),(0,ga.jsx)("p",{children:"Streamline workforce planning"})]})]}),(0,ga.jsxs)("div",{className:"value-card fade-in",children:[(0,ga.jsx)("div",{className:"value-image",children:(0,ga.jsx)("img",{src:em,alt:"Cost Management"})}),(0,ga.jsxs)("div",{className:"value-content",children:[(0,ga.jsx)("h3",{children:"Cost Management"}),(0,ga.jsx)("p",{children:"Minimize turnover expenses"})]})]}),(0,ga.jsxs)("div",{className:"value-card fade-in",children:[(0,ga.jsx)("div",{className:"value-image",children:(0,ga.jsx)("img",{src:tm,alt:"Strategic Planning"})}),(0,ga.jsxs)("div",{className:"value-content",children:[(0,ga.jsx)("h3",{children:"Strategic Planning"}),(0,ga.jsx)("p",{children:"Make data-driven decisions"})]})]}),(0,ga.jsxs)("div",{className:"value-card fade-in",children:[(0,ga.jsx)("div",{className:"value-image",children:(0,ga.jsx)("img",{src:nm,alt:"Risk Mitigation"})}),(0,ga.jsxs)("div",{className:"value-content",children:[(0,ga.jsx)("h3",{children:"Risk Mitigation"}),(0,ga.jsx)("p",{children:"Prevent talent loss"})]})]})]})]})})]})},am=()=>{const e=(new Date).getFullYear();return(0,ga.jsx)("footer",{className:"footer footer-fullwidth",children:(0,ga.jsxs)("div",{className:"container footer-container-fullwidth",children:[(0,ga.jsx)("div",{className:"footer-top"}),(0,ga.jsxs)("div",{className:"footer-sections",children:[(0,ga.jsxs)("div",{className:"footer-section",children:[(0,ga.jsx)("h2",{className:"footer-title",children:"Automate Reporting"}),(0,ga.jsx)("p",{className:"footer-description",children:"Professional tools to help you automate analysis and create beautiful, data-driven reports from your spreadsheets and databases."})]}),(0,ga.jsxs)("div",{className:"footer-section",children:[(0,ga.jsx)("h2",{className:"footer-title",children:"Contact Us"}),(0,ga.jsx)("p",{className:"contact-email",children:"sales@automatereporting.com"})]})]}),(0,ga.jsxs)("div",{className:"footer-bottom",children:[(0,ga.jsxs)("div",{className:"copyright",children:["\xa9 ",e," Automate Reporting. All rights reserved."]}),(0,ga.jsxs)("div",{className:"footer-links",children:[(0,ga.jsx)(ft,{to:"/terms",children:"Terms of Service"}),(0,ga.jsx)(ft,{to:"/privacy",children:"Privacy Policy"}),(0,ga.jsx)(ft,{to:"/cookies",children:"Cookie Policy"})]})]})]})})};const im=new class{constructor(){this.baseURL=Kr.API_URL||"https://aiblog.automatereporting.com/wp-json/wp/v2",this.api=Xr.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use((async e=>{const t=await Jr.getValidToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)))}async getPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=c({per_page:100,page:1,status:"publish",_embed:!0},e),n=await this.api.get("/posts",{params:t});return{posts:this.formatPosts(n.data),totalPages:parseInt(n.headers["x-wp-totalpages"])||1,total:parseInt(n.headers["x-wp-total"])||0}}catch(t){throw console.error("Error fetching posts:",t),this._handleError(t)}}async getPost(e){try{const t=isNaN(e)?"/posts?slug=".concat(e):"/posts/".concat(e),n=await this.api.get(t,{params:{_embed:!0}}),r=Array.isArray(n.data)?n.data[0]:n.data;if(!r)throw new Error("Post not found");return this.formatPost(r)}catch(t){throw console.error("Error fetching post:",t),this._handleError(t)}}async getPostBySlug(e){try{console.log("Fetching post by slug:",e);const t=await this.api.get("/posts",{params:{slug:e,_embed:!0,status:"publish,draft,private"}});if(console.log("API Response for slug:",t.data),!t.data||0===t.data.length){const t=e.replace(/-/g," ").trim(),n=await this.api.get("/posts",{params:{search:t,_embed:!0,status:"publish,draft,private",per_page:5}});if(n.data&&n.data.length>0){const t=n.data.find((t=>t.slug===e));return t?this.formatPost(t):this.formatPost(n.data[0])}throw new Error('Post with slug "'.concat(e,'" not found'))}return this.formatPost(t.data[0])}catch(t){throw console.error("Error fetching post by slug:",t),this._handleError(t)}}async createPost(e){try{const t=await this.formatPostForAPI(e),n=await this.api.post("/posts",t);return this.formatPost(n.data)}catch(t){throw console.error("Error creating post:",t),this._handleError(t)}}async updatePost(e,t){try{const n=await this.formatPostForAPI(t),r=await this.api.put("/posts/".concat(e),n);return this.formatPost(r.data)}catch(n){throw console.error("Error updating post:",n),this._handleError(n)}}async deletePost(e){try{return await this.api.delete("/posts/".concat(e)),!0}catch(t){throw console.error("Error deleting post:",t),this._handleError(t)}}async uploadMedia(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n,r;const a=new FormData;a.append("file",e),t.title&&a.append("title",t.title),t.caption&&a.append("caption",t.caption),t.alt&&a.append("alt_text",t.alt);const i=await this.api.post("/media",a,{headers:{"Content-Type":"multipart/form-data"}});return{id:i.data.id,url:i.data.source_url,title:(null===(n=i.data.title)||void 0===n?void 0:n.rendered)||"",alt:i.data.alt_text||"",caption:(null===(r=i.data.caption)||void 0===r?void 0:r.rendered)||""}}catch(a){throw console.error("Error uploading media:",a),this._handleError(a)}}async getCategories(){try{return(await this.api.get("/categories",{params:{per_page:100}})).data.map((e=>({id:e.id,name:e.name,slug:e.slug,count:e.count})))}catch(e){throw console.error("Error fetching categories:",e),this._handleError(e)}}async getTags(){try{return(await this.api.get("/tags",{params:{per_page:100}})).data.map((e=>({id:e.id,name:e.name,slug:e.slug,count:e.count})))}catch(e){throw console.error("Error fetching tags:",e),this._handleError(e)}}async searchPosts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getPosts(c({search:e},t))}async getPostsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getPosts(c({categories:e},t))}async getPostsByTag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getPosts(c({tags:e},t))}async formatPostForAPI(e){const t=await this.processCategoryIds(e.categories||[]),n=await this.processTagIds(e.tags||[]);return{title:e.title,content:e.content,excerpt:e.excerpt,status:e.status||"draft",categories:t,tags:n,featured_media:e.featured_media||null,meta:{subtitle:e.subtitle||""}}}async processCategoryIds(e){if(!Array.isArray(e)||0===e.length)return[1];const t=[];for(const n of e)if("string"===typeof n&&n.trim()){const e=await this.createOrGetCategory(n.trim());e&&t.push(e)}else"number"===typeof n&&t.push(n);return t.length>0?t:[1]}async processTagIds(e){if(!Array.isArray(e)||0===e.length)return[];const t=[];for(const n of e)if("string"===typeof n&&n.trim()){const e=await this.createOrGetTag(n.trim());e&&t.push(e)}else"number"===typeof n&&t.push(n);return t}async createOrGetCategory(e){try{const t=(await this.api.get("/categories",{params:{search:e,per_page:100}})).data.find((t=>t.name.toLowerCase()===e.toLowerCase()));if(t)return t.id;const n=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return(await this.api.post("/categories",{name:e,slug:n})).data.id}catch(t){return console.error("Error creating/getting category:",t),1}}async createOrGetTag(e){try{const t=(await this.api.get("/tags",{params:{search:e,per_page:100}})).data.find((t=>t.name.toLowerCase()===e.toLowerCase()));if(t)return t.id;const n=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");return(await this.api.post("/tags",{name:e,slug:n})).data.id}catch(t){return console.error("Error creating/getting tag:",t),null}}decodeHtmlEntities(e){if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value}formatPost(e){var t,n,r,a,i,s;return{id:e.id,title:this.decodeHtmlEntities((null===(t=e.title)||void 0===t?void 0:t.rendered)||""),subtitle:this.decodeHtmlEntities((null===(n=e.meta)||void 0===n?void 0:n.subtitle)||""),excerpt:this.decodeHtmlEntities((null===(r=e.excerpt)||void 0===r||null===(a=r.rendered)||void 0===a?void 0:a.replace(/<[^>]*>/g,""))||""),content:(null===(i=e.content)||void 0===i?void 0:i.rendered)||"",image:this.getFeatureImage(e),date:e.date,modified:e.modified,slug:e.slug,status:e.status,categories:this.getCategories(e),tags:this.getTags(e),author:this.getAuthor(e),readingTime:this.calculateReadingTime((null===(s=e.content)||void 0===s?void 0:s.rendered)||""),link:e.link}}formatPosts(e){return e.map((e=>this.formatPost(e)))}getFeatureImage(e){var t,n;return null!==(t=e._embedded)&&void 0!==t&&null!==(n=t["wp:featuredmedia"])&&void 0!==n&&n[0]?e._embedded["wp:featuredmedia"][0].source_url:Kr.DEFAULT_FEATURED_IMAGE||"/default-blog-image.jpg"}getCategories(e){var t,n;return null!==(t=e._embedded)&&void 0!==t&&null!==(n=t["wp:term"])&&void 0!==n&&n[0]?e._embedded["wp:term"][0].map((e=>e.name)):[]}getTags(e){var t,n;return null!==(t=e._embedded)&&void 0!==t&&null!==(n=t["wp:term"])&&void 0!==n&&n[1]?e._embedded["wp:term"][1].map((e=>e.name)):[]}getAuthor(e){var t,n;if(null!==(t=e._embedded)&&void 0!==t&&null!==(n=t.author)&&void 0!==n&&n[0]){var r,a,i;const t=e._embedded.author[0];return{name:t.name||"Unknown Author",avatar:(null===(r=t.avatar_urls)||void 0===r?void 0:r[96])||Kr.DEFAULT_AVATAR||"/default-avatar.png",bio:t.description||"",link:t.link,social:{twitter:(null===(a=t.social)||void 0===a?void 0:a.twitter)||"",linkedin:(null===(i=t.social)||void 0===i?void 0:i.linkedin)||""}}}return{name:"Unknown Author",avatar:Kr.DEFAULT_AVATAR||"/default-avatar.png",bio:"",social:{twitter:"",linkedin:""}}}calculateReadingTime(e){const t=e.replace(/<[^>]*>/g,"").split(/\s+/).length;return Math.ceil(t/200)||1}_handleError(e){let t="An unknown error occurred";if(e.response){const n=e.response.data;t=n.message?n.message:n.code?"WordPress Error: ".concat(n.code):"Server error: ".concat(e.response.status)}else t=e.request?"No response from WordPress API. Please check your connection.":e.message;return new Error(t)}},sm=e=>{const t=document.createElement("textarea");return t.innerHTML=e||"",t.value},om=e=>{var n,r,a;let{posts:i=[],activeCategory:s,setActiveCategory:o,onEditPost:l}=e;const[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)([]),[p,m]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[v,x]=(0,t.useState)([]),[y,b]=(0,t.useState)(""),[_,w]=(0,t.useState)(1),S=pe();(0,t.useEffect)((()=>{if(i.length>0){const e=[...i].sort(((e,t)=>new Date(t.date)-new Date(e.date)));h(e),u(e[0]),m(e.slice(1,7)),g(e.slice(0,4));const t=new Set;i.forEach((e=>{(Array.isArray(e.categories)?e.categories:"string"===typeof e.categories&&e.categories?e.categories.split(",").map((e=>e.trim())):[]).forEach((e=>t.add(sm(e))))})),x(Array.from(t))}}),[i]);const E=d.filter((e=>{const t=!!Jr.isAuthenticated()||"publish"===e.status,n="all"===s||(Array.isArray(e.categories)?e.categories.includes(s):"string"===typeof e.categories&&e.categories.split(",").map((e=>sm(e.trim()))).includes(s)),r=!y||sm(e.title).toLowerCase().includes(y.toLowerCase())||sm(e.excerpt).toLowerCase().includes(y.toLowerCase())||e.tags&&(Array.isArray(e.tags)?e.tags.some((e=>sm(e).toLowerCase().includes(y.toLowerCase()))):"string"===typeof e.tags&&e.tags.split(",").map((e=>sm(e.trim()))).some((e=>e.toLowerCase().includes(y.toLowerCase()))));return t&&n&&r})),M=6*_,T=M-6,N=E.slice(T,M),A=Math.ceil(E.length/6),C=e=>w(e),R=()=>{S("/blog/create")},P=e=>Array.isArray(e)?e.map(sm):"string"===typeof e&&e?e.split(",").map((e=>sm(e.trim()))).filter(Boolean):[],k=e=>{e&&S("/blog/".concat(e))},L=e=>{var t,n,r;if(!Jr.isAuthenticated())return!1;const a=Jr.getCurrentUser();return(null===a||void 0===a||null===(t=a.roles)||void 0===t?void 0:t.includes("administrator"))||(null===a||void 0===a||null===(n=a.roles)||void 0===n?void 0:n.includes("editor"))||(null===(r=e.author)||void 0===r?void 0:r.name)===(null===a||void 0===a?void 0:a.displayName)};return 0===i.length?(0,ga.jsxs)("div",{className:"blog-empty",children:[(0,ga.jsx)("h2",{children:"No articles published yet"}),(0,ga.jsx)("p",{children:"Be the first to share your thoughts and insights!"}),(0,ga.jsx)("button",{className:"create-first-post-btn",onClick:R,children:"Create Your First Post"})]}):(0,ga.jsxs)("div",{className:"enhanced-blog-container",children:[(0,ga.jsxs)("header",{className:"enhanced-blog-header",children:[(0,ga.jsx)("h1",{children:"Stories & Insights"}),(0,ga.jsx)("p",{className:"blog-description",children:"Thought-provoking articles on topics that matter"}),(0,ga.jsxs)("div",{className:"search-filter-container",children:[(0,ga.jsx)("div",{className:"search-bar",children:(0,ga.jsx)("input",{type:"text",placeholder:"Search articles...",value:y,onChange:e=>{b(e.target.value),w(1)},className:"search-input"})}),(0,ga.jsxs)("div",{className:"category-filter",children:[(0,ga.jsx)("button",{className:"category-btn ".concat("all"===s?"active":""),onClick:()=>{o("all"),w(1)},children:"All"}),v.map((e=>(0,ga.jsx)("button",{className:"category-btn ".concat(s===e?"active":""),onClick:()=>{o(e),w(1)},children:e},e)))]})]})]}),c&&"all"===s&&!y&&1===_&&(0,ga.jsxs)("section",{className:"enhanced-featured-post",children:[(0,ga.jsx)("div",{className:"featured-image",children:(0,ga.jsx)("img",{src:c.image||"/default-hero.png",alt:sm(c.title)||"Featured Post"})}),(0,ga.jsxs)("div",{className:"featured-content",children:[(0,ga.jsxs)("div",{className:"post-meta",children:[(0,ga.jsx)("span",{className:"featured-label",children:"Featured"}),(0,ga.jsx)("span",{className:"post-date",children:c.date?new Date(c.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Date unavailable"}),(0,ga.jsxs)("span",{className:"reading-time",children:[c.readingTime||"5"," min read"]})]}),(0,ga.jsx)("h2",{className:"featured-title",children:sm(c.title)||"Untitled"}),c.subtitle&&(0,ga.jsx)("h3",{className:"featured-subtitle",children:sm(c.subtitle)}),(0,ga.jsx)("p",{className:"featured-excerpt",children:sm(c.excerpt)||""}),(0,ga.jsx)("div",{className:"post-categories",children:P(c.categories).map(((e,t)=>(0,ga.jsx)("span",{className:"category-tag",children:e},t)))}),(0,ga.jsxs)("div",{className:"post-author",children:[(0,ga.jsx)("img",{src:(null===(n=c.author)||void 0===n?void 0:n.avatar)||"/default-avatar.png",alt:sm(null===(r=c.author)||void 0===r?void 0:r.name)||"Author",className:"author-avatar"}),(0,ga.jsx)("div",{className:"author-details",children:(0,ga.jsx)("span",{className:"author-name",children:sm(null===(a=c.author)||void 0===a?void 0:a.name)||"Author"})})]}),(0,ga.jsxs)("div",{className:"featured-actions",children:[(0,ga.jsx)("button",{onClick:()=>k(c.slug),className:"read-article-btn",children:"Read Full Article"}),L(c)&&(0,ga.jsx)("button",{onClick:()=>l(c),className:"edit-featured-btn",children:"Edit"})]})]})]}),(0,ga.jsxs)("div",{className:"enhanced-blog-layout",children:[(0,ga.jsx)("main",{className:"blog-main-content",children:N.length>0?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("div",{className:"articles-grid",children:N.map((e=>{var t,n,r;return(0,ga.jsxs)("article",{className:"article-card",children:[(0,ga.jsx)("div",{onClick:()=>k(e.slug),className:"article-image-link",style:{cursor:"pointer"},children:(0,ga.jsx)("div",{className:"article-image",children:(0,ga.jsx)("img",{src:e.image||"/default-hero.png",alt:sm(e.title)||"Article"})})}),(0,ga.jsxs)("div",{className:"article-content",children:[(0,ga.jsxs)("div",{className:"article-meta",children:[(0,ga.jsx)("span",{className:"post-date",children:e.date?new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Date unavailable"}),(0,ga.jsxs)("span",{className:"reading-time",children:[e.readingTime||"4"," min read"]}),"draft"===e.status&&(0,ga.jsx)("span",{className:"draft-indicator",children:"Draft"})]}),(0,ga.jsx)("h3",{className:"article-title",children:(0,ga.jsx)("button",{onClick:()=>k(e.slug),style:{background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left",color:"inherit",fontSize:"inherit",fontWeight:"inherit",textDecoration:"none"},children:sm(e.title)||"Untitled"})}),(0,ga.jsx)("p",{className:"article-excerpt",children:sm(e.excerpt)||""}),P(e.categories).length>0&&(0,ga.jsx)("div",{className:"article-categories",children:P(e.categories).map(((e,t)=>(0,ga.jsx)("span",{className:"category-tag",onClick:t=>{t.preventDefault(),t.stopPropagation(),o(e),w(1)},style:{cursor:"pointer"},children:e},t)))}),(0,ga.jsxs)("div",{className:"article-footer",children:[(0,ga.jsxs)("div",{className:"author-info",children:[(0,ga.jsx)("img",{src:(null===(t=e.author)||void 0===t?void 0:t.avatar)||"/default-avatar.png",alt:sm(null===(n=e.author)||void 0===n?void 0:n.name)||"Author",className:"author-avatar-small"}),(0,ga.jsx)("span",{className:"author-name",children:sm(null===(r=e.author)||void 0===r?void 0:r.name)||"Author"})]}),(0,ga.jsxs)("div",{className:"article-actions",children:[(0,ga.jsx)("button",{onClick:()=>k(e.slug),className:"read-more-btn",children:"Read More"}),L(e)&&(0,ga.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),l(e)},className:"edit-btn",children:"Edit"})]})]})]})]},e.id)}))}),A>1&&(0,ga.jsxs)("div",{className:"pagination",children:[(0,ga.jsx)("button",{onClick:()=>C(_-1),disabled:1===_,className:"pagination-btn prev",children:"Previous"}),(0,ga.jsx)("div",{className:"page-numbers",children:Array.from({length:A},((e,t)=>t+1)).map((e=>(0,ga.jsx)("button",{onClick:()=>C(e),className:"page-number ".concat(_===e?"active":""),children:e},e)))}),(0,ga.jsx)("button",{onClick:()=>C(_+1),disabled:_===A,className:"pagination-btn next",children:"Next"})]})]}):(0,ga.jsxs)("div",{className:"no-results",children:[(0,ga.jsx)("h2",{children:"No articles found"}),(0,ga.jsx)("p",{children:"Try adjusting your search or category filters."}),(0,ga.jsx)("button",{onClick:()=>{b(""),o("all"),w(1)},className:"reset-filters-btn",children:"Reset Filters"})]})}),(0,ga.jsxs)("aside",{className:"blog-sidebar",children:[(0,ga.jsxs)("div",{className:"sidebar-section about-blog",children:[(0,ga.jsx)("h3",{className:"sidebar-heading",children:"About This Blog"}),(0,ga.jsx)("p",{children:"Discover thought-provoking perspectives and insights on topics that matter. Join our community of readers and writers passionate about sharing ideas."})]}),(0,ga.jsxs)("div",{className:"sidebar-section popular-posts",children:[(0,ga.jsx)("h3",{className:"sidebar-heading",children:"Popular Articles"}),(0,ga.jsx)("div",{className:"popular-posts-list",children:f.map((e=>{var t;return(0,ga.jsx)("div",{className:"popular-post-item",children:(0,ga.jsxs)("button",{onClick:()=>k(e.slug),className:"popular-post-link",style:{background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left",width:"100%"},children:[(0,ga.jsx)("h4",{children:sm(e.title)||"Untitled"}),(0,ga.jsxs)("div",{className:"popular-post-meta",children:[(0,ga.jsx)("span",{className:"popular-post-author",children:sm(null===(t=e.author)||void 0===t?void 0:t.name)||"Author"}),(0,ga.jsx)("span",{className:"dot-separator",children:"\xb7"}),(0,ga.jsxs)("span",{className:"popular-post-read-time",children:[e.readingTime||"4"," min read"]})]})]})},e.id)}))})]}),(0,ga.jsxs)("div",{className:"sidebar-section categories-section",children:[(0,ga.jsx)("h3",{className:"sidebar-heading",children:"Explore Topics"}),(0,ga.jsx)("ul",{className:"categories-list",children:v.map((e=>(0,ga.jsx)("li",{className:"category-item",children:(0,ga.jsx)("button",{onClick:()=>{o(e),w(1)},className:"category-link ".concat(s===e?"active":""),children:e})},e)))})]})]})]})]})},lm=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)("all"),i=pe();(0,t.useEffect)((()=>{(async()=>{try{const e=Jr.isAuthenticated()?{status:"publish,draft"}:{status:"publish"},{posts:t}=await im.getPosts(e),r=t.map((e=>c(c({},e),{},{title:sm(e.title),subtitle:sm(e.subtitle||""),excerpt:sm(e.excerpt||""),categories:Array.isArray(e.categories)?e.categories.map(sm):"string"===typeof e.categories?e.categories.split(",").map((e=>sm(e.trim()))):[],tags:Array.isArray(e.tags)?e.tags.map(sm):"string"===typeof e.tags?e.tags.split(",").map((e=>sm(e.trim()))):[]})));n(r||[])}catch(e){console.error("Error fetching posts:",e)}})()}),[]);return(0,ga.jsxs)("div",{className:"blog-management",children:[(0,ga.jsxs)("div",{className:"blog-management-header",children:[(0,ga.jsx)("h1",{children:"Blog Management"}),(0,ga.jsx)("button",{className:"add-post-button",onClick:()=>{Jr.isAuthenticated()?i("/blog/create"):i("/wplogin")},children:"Write a story"})]}),(0,ga.jsx)(om,{posts:e,activeCategory:r,setActiveCategory:a,onEditPost:e=>{var t,n,r;if(!Jr.isAuthenticated())return void i("/wplogin");const a=Jr.getCurrentUser();if(!a)return void i("/wplogin");if((null===a||void 0===a||null===(t=a.roles)||void 0===t?void 0:t.includes("administrator"))||(null===a||void 0===a||null===(n=a.roles)||void 0===n?void 0:n.includes("editor"))||(null===(r=e.author)||void 0===r?void 0:r.name)===(null===a||void 0===a?void 0:a.displayName)){if(!e.slug)return console.error("Post slug is missing:",e),void alert("Cannot edit this post: missing identifier");console.log("Navigating to edit page for slug:",e.slug),i("/blog/edit/".concat(e.slug))}else alert("You don't have permission to edit this post")}})]})};const cm=new class{constructor(){this.baseURL=Kr.API_URL,this.api=Xr.create({baseURL:this.baseURL,timeout:Kr.TIMEOUT,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use((async e=>{const t=await Jr.getValidToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.api.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&Jr.logout(),Promise.reject(e)}))}async getComments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=c({post:e,per_page:50,order:"asc",orderby:"date",status:"approve"},t),r=await this.api.get("/comments",{params:n});return{comments:r.data.map((e=>this.formatComment(e))),totalPages:parseInt(r.headers["x-wp-totalpages"])||1,total:parseInt(r.headers["x-wp-total"])||0}}catch(n){throw console.error("Error fetching comments:",n),this._handleError(n)}}async createComment(e){try{const t=this.validateCommentData(e);if(!t.isValid)throw new Error(Object.values(t.errors).join("; "));const n={post:e.postId,content:e.content,parent:e.parentId||0};if(!Jr.isAuthenticated()){if(!e.authorName||!e.authorEmail)throw new Error("Name and email are required for guest comments");n.author_name=e.authorName,n.author_email=e.authorEmail,n.author_url=e.authorUrl||""}const r=await this.api.post("/comments",n);return this.formatComment(r.data)}catch(t){throw console.error("Error creating comment:",t),this._handleError(t)}}async updateComment(e,t){try{if(!Jr.isAuthenticated())throw new Error("Authentication required to update comments");const n=await this.api.put("/comments/".concat(e),{content:t});return this.formatComment(n.data)}catch(n){throw console.error("Error updating comment:",n),this._handleError(n)}}async deleteComment(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(!Jr.isAuthenticated())throw new Error("Authentication required to delete comments");const n=t?{force:!0}:{};return await this.api.delete("/comments/".concat(e),{params:n}),!0}catch(n){throw console.error("Error deleting comment:",n),this._handleError(n)}}async getCommentReplies(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=c({parent:e,per_page:50,order:"asc",orderby:"date",status:"approve"},t);return(await this.api.get("/comments",{params:n})).data.map((e=>this.formatComment(e)))}catch(n){throw console.error("Error fetching comment replies:",n),this._handleError(n)}}organizeCommentsThreaded(e){const t=new Map,n=[];return e.forEach((e=>{e.replies=[],t.set(e.id,e)})),e.forEach((e=>{if(e.parentId&&0!==e.parentId){const r=t.get(e.parentId);r?r.replies.push(e):n.push(e)}else n.push(e)})),n}async getCommentStats(e){try{const t=await this.api.get("/comments",{params:{post:e,per_page:1,status:"approve"}});return{total:parseInt(t.headers["x-wp-total"])||0,postId:e}}catch(t){return console.error("Error fetching comment stats:",t),{total:0,postId:e}}}async moderateComment(e,t){try{if(!this.canModerateComments())throw new Error("You don't have permission to moderate comments");if(!["approve","hold","spam","trash"].includes(t))throw new Error("Invalid comment status");const n=await this.api.put("/comments/".concat(e),{status:t});return this.formatComment(n.data)}catch(n){throw console.error("Error moderating comment:",n),this._handleError(n)}}async getCommentsForModeration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(!this.canModerateComments())throw new Error("You don't have permission to moderate comments");const t=c({per_page:50,context:"edit",status:"hold"},e),n=await this.api.get("/comments",{params:t});return{comments:n.data.map((e=>this.formatComment(e))),totalPages:parseInt(n.headers["x-wp-totalpages"])||1,total:parseInt(n.headers["x-wp-total"])||0}}catch(t){throw console.error("Error fetching comments for moderation:",t),this._handleError(t)}}canModerateComments(){var e;const t=Jr.getCurrentUser();if(!t)return!1;const n=["administrator","editor"];return(null===(e=t.roles)||void 0===e?void 0:e.some((e=>n.includes(e))))||Object.keys(t.capabilities||{}).includes("moderate_comments")}canEditComment(e){const t=Jr.getCurrentUser();return!!t&&(e.authorId===t.id||this.canModerateComments())}formatComment(e){var t,n,r;return{id:e.id,postId:e.post,parentId:e.parent||0,content:(null===(t=e.content)||void 0===t?void 0:t.rendered)||e.content||"",rawContent:(null===(n=e.content)||void 0===n?void 0:n.raw)||e.content||"",author:{id:e.author||0,name:e.author_name||"Anonymous",email:e.author_email||"",url:e.author_url||"",avatar:(null===(r=e.author_avatar_urls)||void 0===r?void 0:r[48])||"https://www.gravatar.com/avatar/".concat(this.md5(e.author_email||""),"?d=mp&s=48")},authorId:e.author||0,date:e.date,dateGmt:e.date_gmt,status:e.status||"approve",link:e.link,meta:e.meta||{},replies:[]}}validateCommentData(e){const t={};return e.postId||(t.postId="Post ID is required"),e.content&&e.content.trim()?e.content.length>65535&&(t.content="Comment is too long"):t.content="Comment content is required",Jr.isAuthenticated()||(e.authorName&&e.authorName.trim()||(t.authorName="Name is required"),e.authorEmail&&e.authorEmail.trim()?/\S+@\S+\.\S+/.test(e.authorEmail)||(t.authorEmail="Valid email is required"):t.authorEmail="Email is required"),{isValid:0===Object.keys(t).length,errors:t}}md5(e){return e.toLowerCase().replace(/\s/g,"")}_handleError(e){let t="An unknown error occurred";if(e.response){const n=e.response.data;t=401===e.response.status?"Authentication required. Please log in.":403===e.response.status?"You don't have permission to perform this action.":404===e.response.status?"Comment or post not found.":409===e.response.status?"Duplicate comment detected.":n.message?n.message:n.code?"WordPress Error: ".concat(n.code):"Server error: ".concat(e.response.status)}else t=e.request?"No response from WordPress API. Please check your connection.":e.message;return new Error(t)}},um=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},dm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()};var hm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pm=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],mm=(0,t.forwardRef)(((e,n)=>{let{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,iconNode:d}=e,h=a(e,pm);return(0,t.createElement)("svg",c(c(c({ref:n},hm),{},{width:i,height:i,stroke:r,strokeWidth:o?24*Number(s)/Number(i):s,className:dm("lucide",l)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map((e=>{let[n,r]=e;return(0,t.createElement)(n,r)})),...Array.isArray(u)?u:[u]])})),fm=["className"],gm=(e,n)=>{const r=(0,t.forwardRef)(((r,i)=>{let{className:s}=r,o=a(r,fm);return(0,t.createElement)(mm,c({ref:i,iconNode:n,className:dm("lucide-".concat((l=um(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},o));var l}));return r.displayName=um(e),r},vm=gm("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),xm=gm("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ym=gm("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]),bm=gm("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),_m=gm("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),wm=e=>{let{postId:n}=e;const[r,a]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(null),[g,v]=(0,t.useState)({name:"",email:"",url:""}),[x,y]=(0,t.useState)(!1),[b,_]=(0,t.useState)({total:0}),w=Jr.isAuthenticated(),S=Jr.getCurrentUser();(0,t.useEffect)((()=>{n&&(E(),M())}),[n]);const E=async()=>{try{s(!0);const e=await cm.getComments(n),t=cm.organizeCommentsThreaded(e.comments);a(t),l(null)}catch(e){l(e.message),console.error("Error loading comments:",e)}finally{s(!1)}},M=async()=>{try{const e=await cm.getCommentStats(n);_(e)}catch(e){console.error("Error loading comment stats:",e)}},T=e=>{const t=new Date(e),n=new Date,r=(n-t)/36e5;return r<1?"Just now":r<24?"".concat(Math.floor(r)," hours ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==n.getFullYear()?"numeric":void 0})},N=e=>{let{comment:n,depth:r=0}=e;const[a,i]=(0,t.useState)(!1),[s,o]=(0,t.useState)(n.rawContent),c=cm.canEditComment(n);return(0,ga.jsxs)("div",{className:"comment-item ".concat(r>0?"comment-reply":""),style:{marginLeft:"".concat(20*r,"px")},children:[(0,ga.jsxs)("div",{className:"comment-content",children:[(0,ga.jsxs)("div",{className:"comment-header",children:[(0,ga.jsxs)("div",{className:"comment-author",children:[(0,ga.jsx)("img",{src:n.author.avatar,alt:n.author.name,className:"comment-avatar"}),(0,ga.jsxs)("div",{className:"comment-author-info",children:[(0,ga.jsx)("span",{className:"comment-author-name",children:n.author.name}),(0,ga.jsx)("span",{className:"comment-date",children:T(n.date)})]})]}),c&&(0,ga.jsxs)("div",{className:"comment-actions",children:[(0,ga.jsx)("button",{onClick:()=>i(!a),className:"comment-action-btn edit-btn",title:"Edit comment",children:(0,ga.jsx)(vm,{size:14})}),(0,ga.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this comment?"))try{await cm.deleteComment(e),await E(),await M()}catch(t){l(t.message),console.error("Error deleting comment:",t)}})(n.id),className:"comment-action-btn delete-btn",title:"Delete comment",children:(0,ga.jsx)(xm,{size:14})})]})]}),(0,ga.jsx)("div",{className:"comment-body",children:a?(0,ga.jsxs)("div",{className:"edit-comment-form",children:[(0,ga.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),className:"edit-comment-textarea",rows:3}),(0,ga.jsxs)("div",{className:"edit-comment-actions",children:[(0,ga.jsx)("button",{onClick:async()=>{if(s.trim()!==n.rawContent)try{await(async(e,t)=>{try{await cm.updateComment(e,t),f(null),await E()}catch(n){l(n.message),console.error("Error editing comment:",n)}})(n.id,s),i(!1)}catch(e){console.error("Error in edit:",e)}else i(!1)},className:"save-edit-btn",children:"Save"}),(0,ga.jsx)("button",{onClick:()=>i(!1),className:"cancel-edit-btn",children:"Cancel"})]})]}):(0,ga.jsx)("div",{className:"comment-text",dangerouslySetInnerHTML:{__html:n.content}})}),(0,ga.jsx)("div",{className:"comment-footer",children:(0,ga.jsxs)("button",{onClick:()=>p(n),className:"reply-btn",children:[(0,ga.jsx)(ym,{size:14}),"Reply"]})})]}),n.replies&&n.replies.length>0&&(0,ga.jsx)("div",{className:"comment-replies",children:n.replies.map((e=>(0,ga.jsx)(N,{comment:e,depth:r+1},e.id)))})]})};return i?(0,ga.jsxs)("div",{className:"comment-system loading",children:[(0,ga.jsx)("div",{className:"loading-spinner"}),(0,ga.jsx)("p",{children:"Loading comments..."})]}):(0,ga.jsxs)("div",{className:"comment-system",children:[(0,ga.jsx)("div",{className:"comments-header",children:(0,ga.jsxs)("h3",{className:"comments-title",children:[(0,ga.jsx)(bm,{size:20}),"Comments (",b.total,")"]})}),o&&(0,ga.jsxs)("div",{className:"comment-error",children:[(0,ga.jsx)("p",{children:o}),(0,ga.jsx)("button",{onClick:E,className:"retry-btn",children:"Try Again"})]}),(0,ga.jsxs)("div",{className:"comment-form-container",children:[h&&(0,ga.jsxs)("div",{className:"replying-to",children:[(0,ga.jsxs)("p",{children:["Replying to ",(0,ga.jsx)("strong",{children:h.author.name})]}),(0,ga.jsx)("button",{onClick:()=>p(null),className:"cancel-reply-btn",children:"Cancel"})]}),(0,ga.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u.trim()){y(!0);try{const e={postId:n,content:u,parentId:(null===h||void 0===h?void 0:h.id)||0};w||(e.authorName=g.name,e.authorEmail=g.email,e.authorUrl=g.url),await cm.createComment(e),d(""),p(null),v({name:"",email:"",url:""}),await E(),await M()}catch(t){l(t.message),console.error("Error submitting comment:",t)}finally{y(!1)}}},className:"comment-form",children:[!w&&(0,ga.jsxs)("div",{className:"guest-info",children:[(0,ga.jsxs)("div",{className:"guest-info-row",children:[(0,ga.jsx)("input",{type:"text",placeholder:"Your Name *",value:g.name,onChange:e=>v(c(c({},g),{},{name:e.target.value})),className:"guest-input",required:!0}),(0,ga.jsx)("input",{type:"email",placeholder:"Your Email *",value:g.email,onChange:e=>v(c(c({},g),{},{email:e.target.value})),className:"guest-input",required:!0})]}),(0,ga.jsx)("input",{type:"url",placeholder:"Your Website (optional)",value:g.url,onChange:e=>v(c(c({},g),{},{url:e.target.value})),className:"guest-input"})]}),(0,ga.jsxs)("div",{className:"comment-input-container",children:[w&&S&&(0,ga.jsxs)("div",{className:"authenticated-user",children:[(0,ga.jsx)("img",{src:S.avatar,alt:S.displayName,className:"user-avatar"}),(0,ga.jsx)("span",{className:"user-name",children:S.displayName})]}),(0,ga.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:h?"Reply to ".concat(h.author.name,"..."):"Write a comment...",className:"comment-textarea",rows:4,required:!0})]}),(0,ga.jsx)("div",{className:"comment-form-actions",children:(0,ga.jsx)("button",{type:"submit",disabled:x||!u.trim(),className:"submit-comment-btn",children:x?(0,ga.jsx)(ga.Fragment,{children:"Posting..."}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(_m,{size:16}),h?"Post Reply":"Post Comment"]})})})]})]}),(0,ga.jsx)("div",{className:"comments-list",children:0===r.length?(0,ga.jsxs)("div",{className:"no-comments",children:[(0,ga.jsx)(bm,{size:48}),(0,ga.jsx)("p",{children:"No comments yet. Be the first to comment!"})]}):r.map((e=>(0,ga.jsx)(N,{comment:e},e.id)))}),(0,ga.jsx)("style",{jsx:!0,children:"\n        .comment-system {\n          max-width: 740px;\n          margin: 2rem 0;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        }\n\n        .comment-system.loading {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          padding: 2rem;\n          color: #666;\n        }\n\n        .loading-spinner {\n          width: 32px;\n          height: 32px;\n          border: 3px solid #f3f3f3;\n          border-top: 3px solid #3498db;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin-bottom: 1rem;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .comments-header {\n          margin-bottom: 2rem;\n          padding-bottom: 1rem;\n          border-bottom: 2px solid #e9ecef;\n        }\n\n        .comments-title {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: #2c3e50;\n          margin: 0;\n        }\n\n        .comment-error {\n          background: #fee;\n          border: 1px solid #fcc;\n          border-radius: 8px;\n          padding: 1rem;\n          margin-bottom: 1rem;\n          color: #c33;\n        }\n\n        .retry-btn {\n          background: #e74c3c;\n          color: white;\n          border: none;\n          padding: 0.5rem 1rem;\n          border-radius: 4px;\n          cursor: pointer;\n          margin-top: 0.5rem;\n        }\n\n        .comment-form-container {\n          background: #f8f9fa;\n          border-radius: 12px;\n          padding: 1.5rem;\n          margin-bottom: 2rem;\n          border: 1px solid #e9ecef;\n        }\n\n        .replying-to {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          background: #e3f2fd;\n          padding: 0.75rem 1rem;\n          border-radius: 8px;\n          margin-bottom: 1rem;\n          font-size: 0.9rem;\n          color: #1976d2;\n        }\n\n        .cancel-reply-btn {\n          background: none;\n          border: none;\n          color: #1976d2;\n          cursor: pointer;\n          font-size: 0.85rem;\n          text-decoration: underline;\n        }\n\n        .guest-info {\n          margin-bottom: 1rem;\n        }\n\n        .guest-info-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 0.75rem;\n          margin-bottom: 0.75rem;\n        }\n\n        .guest-input {\n          padding: 0.75rem;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          font-size: 0.9rem;\n        }\n\n        .guest-input:focus {\n          outline: none;\n          border-color: #3498db;\n          box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\n        }\n\n        .comment-input-container {\n          margin-bottom: 1rem;\n        }\n\n        .authenticated-user {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          margin-bottom: 1rem;\n          font-size: 0.9rem;\n          color: #555;\n        }\n\n        .user-avatar {\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          object-fit: cover;\n        }\n\n        .user-name {\n          font-weight: 500;\n        }\n\n        .comment-textarea {\n          width: 100%;\n          padding: 1rem;\n          border: 1px solid #ddd;\n          border-radius: 8px;\n          font-size: 1rem;\n          font-family: inherit;\n          resize: vertical;\n          min-height: 100px;\n        }\n\n        .comment-textarea:focus {\n          outline: none;\n          border-color: #3498db;\n          box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\n        }\n\n        .comment-form-actions {\n          display: flex;\n          justify-content: flex-end;\n        }\n\n        .submit-comment-btn {\n          background: #3498db;\n          color: white;\n          border: none;\n          padding: 0.75rem 1.5rem;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          font-weight: 500;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          transition: background 0.2s;\n        }\n\n        .submit-comment-btn:hover:not(:disabled) {\n          background: #2980b9;\n        }\n\n        .submit-comment-btn:disabled {\n          background: #bdc3c7;\n          cursor: not-allowed;\n        }\n\n        .comments-list {\n          display: flex;\n          flex-direction: column;\n          gap: 1.5rem;\n        }\n\n        .no-comments {\n          text-align: center;\n          padding: 3rem 1rem;\n          color: #7f8c8d;\n        }\n\n        .no-comments svg {\n          margin-bottom: 1rem;\n          opacity: 0.5;\n        }\n\n        .comment-item {\n          background: white;\n          border-radius: 8px;\n          border: 1px solid #e9ecef;\n          overflow: hidden;\n        }\n\n        .comment-reply {\n          border-left: 3px solid #3498db;\n          background: #f8f9fa;\n        }\n\n        .comment-content {\n          padding: 1.25rem;\n        }\n\n        .comment-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 1rem;\n        }\n\n        .comment-author {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n        }\n\n        .comment-avatar {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          object-fit: cover;\n        }\n\n        .comment-author-info {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .comment-author-name {\n          font-weight: 600;\n          color: #2c3e50;\n          font-size: 0.95rem;\n        }\n\n        .comment-date {\n          font-size: 0.8rem;\n          color: #7f8c8d;\n        }\n\n        .comment-actions {\n          display: flex;\n          gap: 0.5rem;\n        }\n\n        .comment-action-btn {\n          background: none;\n          border: none;\n          padding: 0.25rem;\n          border-radius: 4px;\n          cursor: pointer;\n          color: #7f8c8d;\n          transition: all 0.2s;\n        }\n\n        .comment-action-btn:hover {\n          background: #f1f2f6;\n          color: #2c3e50;\n        }\n\n        .delete-btn:hover {\n          color: #e74c3c;\n          background: #fee;\n        }\n\n        .comment-body {\n          margin-bottom: 1rem;\n        }\n\n        .comment-text {\n          line-height: 1.6;\n          color: #2c3e50;\n        }\n\n        .edit-comment-form {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .edit-comment-textarea {\n          width: 100%;\n          padding: 0.75rem;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          font-family: inherit;\n          font-size: 0.9rem;\n          resize: vertical;\n        }\n\n        .edit-comment-actions {\n          display: flex;\n          gap: 0.5rem;\n        }\n\n        .save-edit-btn,\n        .cancel-edit-btn {\n          padding: 0.5rem 1rem;\n          border: none;\n          border-radius: 4px;\n          font-size: 0.85rem;\n          cursor: pointer;\n        }\n\n        .save-edit-btn {\n          background: #27ae60;\n          color: white;\n        }\n\n        .cancel-edit-btn {\n          background: #95a5a6;\n          color: white;\n        }\n\n        .comment-footer {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n        }\n\n        .reply-btn {\n          background: none;\n          border: none;\n          color: #3498db;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          font-size: 0.85rem;\n          padding: 0.25rem 0.5rem;\n          border-radius: 4px;\n          transition: background 0.2s;\n        }\n\n        .reply-btn:hover {\n          background: #e3f2fd;\n        }\n\n        .comment-replies {\n          border-top: 1px solid #e9ecef;\n          background: #f8f9fa;\n        }\n\n        @media (max-width: 768px) {\n          .comment-system {\n            margin: 1rem 0;\n          }\n\n          .comment-form-container {\n            padding: 1rem;\n          }\n\n          .guest-info-row {\n            grid-template-columns: 1fr;\n          }\n\n          .comment-content {\n            padding: 1rem;\n          }\n\n          .comment-author {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.5rem;\n          }\n\n          .comment-header {\n            flex-direction: column;\n            gap: 0.75rem;\n          }\n        }\n      "})]})};const Sm=new class{constructor(){this.baseURL=Kr.API_URL,this.api=Xr.create({baseURL:this.baseURL,timeout:Kr.TIMEOUT,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use((async e=>{const t=await Jr.getValidToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.STORAGE_KEY="wp_anonymous_likes",this.STORAGE_REACTIONS_KEY="wp_anonymous_reactions"}async toggleLike(e){try{return Jr.isAuthenticated()?await this._toggleAuthenticatedLike(e):this._toggleAnonymousLike(e)}catch(t){throw console.error("Error toggling like:",t),this._handleError(t)}}async addReaction(e,t){try{if(!["like","love","laugh","wow","sad","angry"].includes(t))throw new Error("Invalid reaction type");return Jr.isAuthenticated()?await this._addAuthenticatedReaction(e,t):this._addAnonymousReaction(e,t)}catch(n){throw console.error("Error adding reaction:",n),this._handleError(n)}}async getPostStats(e){try{let t={postId:e,likes:0,reactions:{like:0,love:0,laugh:0,wow:0,sad:0,angry:0},userLiked:!1,userReaction:null};if(Jr.isAuthenticated()){const n=await this.api.get("/posts/".concat(e),{params:{context:"edit"}});if(n.data.meta){t.likes=parseInt(n.data.meta.likes_count)||0,t.reactions={like:parseInt(n.data.meta.reaction_like)||0,love:parseInt(n.data.meta.reaction_love)||0,laugh:parseInt(n.data.meta.reaction_laugh)||0,wow:parseInt(n.data.meta.reaction_wow)||0,sad:parseInt(n.data.meta.reaction_sad)||0,angry:parseInt(n.data.meta.reaction_angry)||0};const e=Jr.getCurrentUser();if(e){const r=n.data.meta.user_likes?JSON.parse(n.data.meta.user_likes):[],a=n.data.meta.user_reactions?JSON.parse(n.data.meta.user_reactions):{};t.userLiked=r.includes(e.id),t.userReaction=a[e.id]||null}}}const n=this._getAnonymousLikes(),r=this._getAnonymousReactions();n.includes(e.toString())&&(t.userLiked=!0,Jr.isAuthenticated()||(t.likes+=1));const a=r[e];return a&&(t.userReaction=a,Jr.isAuthenticated()||(t.reactions[a]+=1)),t}catch(t){return console.error("Error fetching post stats:",t),{postId:e,likes:0,reactions:{like:0,love:0,laugh:0,wow:0,sad:0,angry:0},userLiked:!1,userReaction:null}}}async getMultiplePostStats(e){try{const t=e.map((e=>this.getPostStats(e)));return(await Promise.all(t)).reduce(((e,t)=>(e[t.postId]=t,e)),{})}catch(t){throw console.error("Error fetching multiple post stats:",t),this._handleError(t)}}async getPopularPosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let n="";if("week"===e){const e=new Date;e.setDate(e.getDate()-7),n=e.toISOString()}else if("month"===e){const e=new Date;e.setMonth(e.getMonth()-1),n=e.toISOString()}const r={per_page:t,meta_key:"likes_count",orderby:"meta_value_num",order:"desc",_embed:!0};n&&(r.after=n);return(await this.api.get("/posts",{params:r})).data.map((e=>{var t,n;return{id:e.id,title:(null===(t=e.title)||void 0===t?void 0:t.rendered)||"",link:e.link,likesCount:parseInt(null===(n=e.meta)||void 0===n?void 0:n.likes_count)||0,totalReactions:this._calculateTotalReactions(e.meta)}}))}catch(n){return console.error("Error fetching popular posts:",n),[]}}async _toggleAuthenticatedLike(e){const t=Jr.getCurrentUser();if(!t)throw new Error("User not authenticated");const n=(await this.api.get("/posts/".concat(e),{params:{context:"edit"}})).data.meta||{},r=parseInt(n.likes_count)||0,a=n.user_likes?JSON.parse(n.user_likes):[],i=a.includes(t.id);let s=r,o=[...a];return i?(s=Math.max(0,r-1),o=a.filter((e=>e!==t.id))):(s=r+1,o.push(t.id)),await this.api.put("/posts/".concat(e),{meta:{likes_count:s,user_likes:JSON.stringify(o)}}),{liked:!i,likesCount:s}}_toggleAnonymousLike(e){const t=this._getAnonymousLikes(),n=e.toString(),r=t.includes(n);if(r){const e=t.filter((e=>e!==n));this._setAnonymousLikes(e)}else t.push(n),this._setAnonymousLikes(t);return{liked:!r,likesCount:r?-1:1}}async _addAuthenticatedReaction(e,t){const n=Jr.getCurrentUser();if(!n)throw new Error("User not authenticated");const r=(await this.api.get("/posts/".concat(e),{params:{context:"edit"}})).data.meta||{},a=r.user_reactions?JSON.parse(r.user_reactions):{},i=a[n.id],s=c({},r);if(i){const e="reaction_".concat(i);s[e]=Math.max(0,(parseInt(s[e])||0)-1)}const o="reaction_".concat(t);return s[o]=(parseInt(s[o])||0)+1,i===t?delete a[n.id]:a[n.id]=t,s.user_reactions=JSON.stringify(a),await this.api.put("/posts/".concat(e),{meta:s}),{reaction:i===t?null:t,reactionCounts:{like:parseInt(s.reaction_like)||0,love:parseInt(s.reaction_love)||0,laugh:parseInt(s.reaction_laugh)||0,wow:parseInt(s.reaction_wow)||0,sad:parseInt(s.reaction_sad)||0,angry:parseInt(s.reaction_angry)||0}}}_addAnonymousReaction(e,t){const n=this._getAnonymousReactions(),r=e.toString(),a=n[r];return a===t?delete n[r]:n[r]=t,this._setAnonymousReactions(n),{reaction:a===t?null:t,oldReaction:a}}_getAnonymousLikes(){try{return JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"[]")}catch(e){return[]}}_setAnonymousLikes(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.warn("Could not save anonymous likes to localStorage:",t)}}_getAnonymousReactions(){try{return JSON.parse(localStorage.getItem(this.STORAGE_REACTIONS_KEY)||"{}")}catch(e){return{}}}_setAnonymousReactions(e){try{localStorage.setItem(this.STORAGE_REACTIONS_KEY,JSON.stringify(e))}catch(t){console.warn("Could not save anonymous reactions to localStorage:",t)}}_calculateTotalReactions(e){return e?(parseInt(e.reaction_like)||0)+(parseInt(e.reaction_love)||0)+(parseInt(e.reaction_laugh)||0)+(parseInt(e.reaction_wow)||0)+(parseInt(e.reaction_sad)||0)+(parseInt(e.reaction_angry)||0):0}_handleError(e){let t="An unknown error occurred";if(e.response){const n=e.response.data;t=401===e.response.status?"Authentication required for this action.":403===e.response.status?"You don't have permission to perform this action.":404===e.response.status?"Post not found.":n.message?n.message:n.code?"WordPress Error: ".concat(n.code):"Server error: ".concat(e.response.status)}else t=e.request?"No response from WordPress API. Please check your connection.":e.message;return new Error(t)}},Em=gm("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),Mm=gm("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Tm=gm("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Nm=gm("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Am=gm("frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Cm=gm("angry",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["path",{d:"M7.5 8 10 9",key:"olxxln"}],["path",{d:"m14 9 2.5-1",key:"1j6cij"}],["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}]]),Rm=e=>{let{postId:n,showReactions:r=!0,showCounts:a=!0,size:i="medium"}=e;const[s,o]=(0,t.useState)({likes:0,reactions:{like:0,love:0,laugh:0,wow:0,sad:0,angry:0},userLiked:!1,userReaction:null}),[l,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),f={like:{icon:Em,emoji:"\ud83d\udc4d",label:"Like",color:"#3498db"},love:{icon:Mm,emoji:"\u2764\ufe0f",label:"Love",color:"#e74c3c"},laugh:{icon:Tm,emoji:"\ud83d\ude02",label:"Laugh",color:"#f39c12"},wow:{icon:Nm,emoji:"\ud83d\ude2e",label:"Wow",color:"#9b59b6"},sad:{icon:Am,emoji:"\ud83d\ude22",label:"Sad",color:"#95a5a6"},angry:{icon:Cm,emoji:"\ud83d\ude20",label:"Angry",color:"#e67e22"}},g={small:{iconSize:16,spacing:"gap-1",padding:"p-1",text:"text-xs"},medium:{iconSize:20,spacing:"gap-2",padding:"p-2",text:"text-sm"},large:{iconSize:24,spacing:"gap-3",padding:"p-3",text:"text-base"}}[i];(0,t.useEffect)((()=>{n&&v()}),[n]);const v=async()=>{try{u(!0);const e=await Sm.getPostStats(n);o(e),m(null)}catch(e){m(e.message),console.error("Error loading like stats:",e)}finally{u(!1)}},x=()=>Object.values(s.reactions).reduce(((e,t)=>e+t),0),y=()=>(0,ga.jsx)("div",{className:"reaction-picker",children:(0,ga.jsx)("div",{className:"reaction-picker-content",children:Object.entries(f).map((e=>{let[t,r]=e;return(0,ga.jsxs)("button",{onClick:()=>(async e=>{try{h(!1);const t=await Sm.addReaction(n,e);o((e=>c(c({},e),{},{userReaction:t.reaction,reactions:t.reactionCounts||e.reactions}))),setTimeout(v,500)}catch(t){m(t.message),console.error("Error adding reaction:",t)}})(t),className:"reaction-option ".concat(s.userReaction===t?"selected":""),title:r.label,style:{color:r.color},children:[(0,ga.jsx)("span",{className:"reaction-emoji",children:r.emoji}),a&&s.reactions[t]>0&&(0,ga.jsx)("span",{className:"reaction-count",children:s.reactions[t]})]},t)}))})});return l?(0,ga.jsx)("div",{className:"like-reaction-system loading",children:(0,ga.jsx)("div",{className:"loading-placeholder"})}):(0,ga.jsxs)("div",{className:"like-reaction-system",children:[p&&(0,ga.jsx)("div",{className:"error-message",children:(0,ga.jsx)("span",{children:p})}),(0,ga.jsxs)("div",{className:"engagement-container",children:[(0,ga.jsx)("div",{className:"like-section",children:(0,ga.jsxs)("button",{onClick:async()=>{try{const e=await Sm.toggleLike(n);o((t=>c(c({},t),{},{userLiked:e.liked,likes:"number"===typeof e.likesCount?e.likesCount:t.likes+(e.liked?1:-1)}))),setTimeout(v,500)}catch(e){m(e.message),console.error("Error toggling like:",e)}},className:"like-button ".concat(s.userLiked?"liked":""),title:s.userLiked?"Unlike":"Like",children:[(0,ga.jsx)(Mm,{size:g.iconSize,fill:s.userLiked?"#e74c3c":"none",color:s.userLiked?"#e74c3c":"#7f8c8d"}),a&&s.likes>0&&(0,ga.jsx)("span",{className:"like-count",children:s.likes})]})}),r&&(0,ga.jsxs)("div",{className:"reactions-section",children:[(0,ga.jsxs)("div",{className:"reaction-trigger-container",children:[(0,ga.jsx)("button",{onClick:()=>h(!d),className:"reaction-trigger",title:"Add reaction",children:s.userReaction?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("span",{className:"user-reaction-emoji",children:f[s.userReaction].emoji}),(0,ga.jsx)("span",{className:"reaction-label",children:f[s.userReaction].label})]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(Tm,{size:g.iconSize,color:"#7f8c8d"}),(0,ga.jsx)("span",{className:"reaction-label",children:"React"})]})}),d&&(0,ga.jsx)(y,{})]}),a&&x()>0&&(0,ga.jsxs)("div",{className:"reaction-summary",children:[(0,ga.jsx)("div",{className:"top-reactions",children:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return Object.entries(s.reactions).filter((e=>{let[t,n]=e;return n>0})).sort(((e,t)=>{let[,n]=e,[,r]=t;return r-n})).slice(0,e)}().map((e=>{let[t,n]=e;return(0,ga.jsxs)("span",{className:"reaction-summary-item",children:[(0,ga.jsx)("span",{className:"summary-emoji",children:f[t].emoji}),(0,ga.jsx)("span",{className:"summary-count",children:n})]},t)}))}),x()>0&&(0,ga.jsxs)("span",{className:"total-reactions",children:[x()," reaction",1!==x()?"s":""]})]})]})]}),(0,ga.jsx)("style",{jsx:!0,children:"\n        .like-reaction-system {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        }\n\n        .like-reaction-system.loading {\n          opacity: 0.6;\n        }\n\n        .loading-placeholder {\n          width: 120px;\n          height: 32px;\n          background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n          background-size: 200% 100%;\n          animation: loading 1.5s infinite;\n          border-radius: 16px;\n        }\n\n        @keyframes loading {\n          0% { background-position: 200% 0; }\n          100% { background-position: -200% 0; }\n        }\n\n        .error-message {\n          background: #fee;\n          border: 1px solid #fcc;\n          border-radius: 4px;\n          padding: 0.5rem;\n          font-size: 0.85rem;\n          color: #c33;\n        }\n\n        .engagement-container {\n          display: flex;\n          align-items: center;\n          gap: 1.5rem;\n          flex-wrap: wrap;\n        }\n\n        .like-section {\n          display: flex;\n          align-items: center;\n        }\n\n        .like-button {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: 1px solid #e9ecef;\n          border-radius: 20px;\n          padding: ".concat("1"===g.padding.split("-")[1]?"0.4rem 0.8rem":"2"===g.padding.split("-")[1]?"0.6rem 1rem":"0.8rem 1.2rem",";\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: ").concat("text-xs"===g.text?"0.75rem":"text-sm"===g.text?"0.875rem":"1rem",";\n          color: #2c3e50;\n        }\n\n        .like-button:hover {\n          background: #f8f9fa;\n          border-color: #dee2e6;\n          transform: translateY(-1px);\n        }\n\n        .like-button.liked {\n          border-color: #e74c3c;\n          background: rgba(231, 76, 60, 0.1);\n        }\n\n        .like-count {\n          font-weight: 500;\n          color: inherit;\n        }\n\n        .reactions-section {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          flex-wrap: wrap;\n        }\n\n        .reaction-trigger-container {\n          position: relative;\n        }\n\n        .reaction-trigger {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: 1px solid #e9ecef;\n          border-radius: 20px;\n          padding: ").concat("1"===g.padding.split("-")[1]?"0.4rem 0.8rem":"2"===g.padding.split("-")[1]?"0.6rem 1rem":"0.8rem 1.2rem",";\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: ").concat("text-xs"===g.text?"0.75rem":"text-sm"===g.text?"0.875rem":"1rem",";\n          color: #2c3e50;\n        }\n\n        .reaction-trigger:hover {\n          background: #f8f9fa;\n          border-color: #dee2e6;\n          transform: translateY(-1px);\n        }\n\n        .user-reaction-emoji {\n          font-size: ").concat(g.iconSize,"px;\n        }\n\n        .reaction-label {\n          font-weight: 500;\n        }\n\n        .reaction-picker {\n          position: absolute;\n          bottom: 100%;\n          left: 50%;\n          transform: translateX(-50%);\n          margin-bottom: 0.5rem;\n          z-index: 1000;\n          animation: slideUp 0.2s ease-out;\n        }\n\n        @keyframes slideUp {\n          from {\n            opacity: 0;\n            transform: translateX(-50%) translateY(10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(-50%) translateY(0);\n          }\n        }\n\n        .reaction-picker-content {\n          background: white;\n          border: 1px solid #e9ecef;\n          border-radius: 25px;\n          padding: 0.5rem;\n          display: flex;\n          gap: 0.25rem;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n\n        .reaction-option {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 0.25rem;\n          background: none;\n          border: none;\n          border-radius: 12px;\n          padding: 0.5rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          min-width: 40px;\n        }\n\n        .reaction-option:hover {\n          background: #f8f9fa;\n          transform: scale(1.1);\n        }\n\n        .reaction-option.selected {\n          background: rgba(52, 152, 219, 0.1);\n          border: 2px solid #3498db;\n        }\n\n        .reaction-emoji {\n          font-size: 20px;\n        }\n\n        .reaction-count {\n          font-size: 0.7rem;\n          font-weight: 500;\n          color: #666;\n        }\n\n        .reaction-summary {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          font-size: ").concat("text-xs"===g.text?"0.75rem":"text-sm"===g.text?"0.875rem":"1rem",";\n        }\n\n        .top-reactions {\n          display: flex;\n          gap: 0.75rem;\n        }\n\n        .reaction-summary-item {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          padding: 0.25rem 0.5rem;\n          background: #f8f9fa;\n          border-radius: 12px;\n          border: 1px solid #e9ecef;\n        }\n\n        .summary-emoji {\n          font-size: ").concat(g.iconSize,"px;\n        }\n\n        .summary-count {\n          font-weight: 500;\n          color: #2c3e50;\n        }\n\n        .total-reactions {\n          color: #7f8c8d;\n          font-size: 0.85em;\n          white-space: nowrap;\n        }\n\n        /* Mobile Responsiveness */\n        @media (max-width: 768px) {\n          .engagement-container {\n            gap: 1rem;\n          }\n\n          .reaction-summary {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.5rem;\n          }\n\n          .reaction-picker {\n            position: fixed;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%);\n            margin-bottom: 0;\n          }\n\n          .reaction-picker-content {\n            padding: 0.75rem;\n            gap: 0.5rem;\n          }\n\n          .reaction-option {\n            min-width: 50px;\n            padding: 0.75rem;\n          }\n\n          .reaction-emoji {\n            font-size: 24px;\n          }\n        }\n\n        /* Dark mode support */\n        @media (prefers-color-scheme: dark) {\n          .like-button,\n          .reaction-trigger {\n            border-color: #4a5568;\n            color: #e2e8f0;\n          }\n\n          .like-button:hover,\n          .reaction-trigger:hover {\n            background: #2d3748;\n            border-color: #718096;\n          }\n\n          .reaction-picker-content {\n            background: #2d3748;\n            border-color: #4a5568;\n          }\n\n          .reaction-option:hover {\n            background: #4a5568;\n          }\n\n          .reaction-summary-item {\n            background: #2d3748;\n            border-color: #4a5568;\n          }\n\n          .summary-count {\n            color: #e2e8f0;\n          }\n\n          .total-reactions {\n            color: #a0aec0;\n          }\n\n          .error-message {\n            background: #fed7d7;\n            border-color: #feb2b2;\n            color: #c53030;\n          }\n        }\n\n        /* High contrast mode */\n        @media (prefers-contrast: high) {\n          .like-button,\n          .reaction-trigger {\n            border-width: 2px;\n          }\n\n          .reaction-picker-content {\n            border-width: 2px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n          }\n        }\n\n        /* Reduced motion */\n        @media (prefers-reduced-motion: reduce) {\n          .like-button,\n          .reaction-trigger,\n          .reaction-option {\n            transition: none;\n          }\n\n          .like-button:hover,\n          .reaction-trigger:hover {\n            transform: none;\n          }\n\n          .reaction-option:hover {\n            transform: none;\n          }\n\n          .reaction-picker {\n            animation: none;\n          }\n\n          .loading-placeholder {\n            animation: none;\n            background: #e0e0e0;\n          }\n        }\n      ")})]})},Pm=()=>{var e,n,r,a,i,s,o,l;const{slug:c}=me(),u=pe(),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[v,x]=(0,t.useState)(!0),[y,b]=(0,t.useState)(null),[_,w]=(0,t.useState)(0),[S,E]=(0,t.useState)(!1),M=(0,t.useRef)(null);(0,t.useEffect)((()=>{(async()=>{try{if(x(!0),b(null),!c)throw new Error("No post slug provided");console.log("Fetching post with slug:",c);const n=decodeURIComponent(c);console.log("Decoded slug:",n);let r=null;try{r=await im.getPostBySlug(n)}catch(e){if(console.warn("Failed to fetch by slug, trying original slug:",e),n===c)throw e;r=await im.getPostBySlug(c)}if(!r)throw new Error('Post with slug "'.concat(c,'" not found'));console.log("Fetched post:",r),h(r);try{const[e,t]=await Promise.allSettled([T(r),N(r)]);"fulfilled"===e.status?m(e.value):(console.warn("Error fetching related posts:",e.reason),m([])),"fulfilled"===t.status?g(t.value):(console.warn("Error fetching recommended posts:",t.reason),g([]))}catch(t){console.warn("Error fetching side content:",t)}x(!1),window.scrollTo(0,0)}catch(y){console.error("Error fetching post:",y),b(y.message),x(!1)}})()}),[c]);const T=async e=>{try{var t;const r=Array.isArray(e.categories)?e.categories[0]:"string"===typeof e.categories?null===(t=e.categories.split(",")[0])||void 0===t?void 0:t.trim():null;if(r){var n;return(null===(n=(await im.getPostsByCategory(r,{per_page:3})).posts)||void 0===n?void 0:n.filter((t=>t.id!==e.id)).slice(0,3))||[]}return[]}catch(y){return console.warn("Error fetching related posts:",y),[]}},N=async e=>{try{var t;return(null===(t=(await im.getPosts({per_page:4,orderby:"date",order:"desc"})).posts)||void 0===t?void 0:t.filter((t=>t.id!==e.id)).slice(0,4))||[]}catch(y){return console.warn("Error fetching recommended posts:",y),[]}};(0,t.useEffect)((()=>{const e=()=>{if(M.current){const e=M.current,t=e.clientHeight,n=window.innerHeight,r=window.scrollY||document.documentElement.scrollTop,a=window.pageYOffset+e.getBoundingClientRect().top;if(r>=a&&t>0){const e=Math.min(100,Math.max(0,(r-a)/(t-n+200)*100));w(e)}}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[d]);const A=e=>Array.isArray(e)?e:"string"===typeof e&&e?e.split(",").map((e=>e.trim())).filter(Boolean):[];return v?(0,ga.jsxs)("div",{className:"enhanced-loading",children:[(0,ga.jsx)("div",{className:"loading-spinner"}),(0,ga.jsx)("p",{children:"Loading article..."}),c&&(0,ga.jsxs)("p",{children:['Searching for: "',decodeURIComponent(c),'"']})]}):y?(0,ga.jsx)("div",{className:"enhanced-loading",children:(0,ga.jsxs)("div",{className:"error-message",children:[(0,ga.jsx)("h2",{children:"Error loading article"}),(0,ga.jsx)("p",{children:y}),(0,ga.jsxs)("p",{children:['Slug: "',c,'"']}),(0,ga.jsxs)("div",{className:"error-actions",children:[(0,ga.jsx)(ft,{to:"/blog",className:"back-to-blog-btn",children:"\u2190 Back to all articles"}),(0,ga.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-btn",style:{marginLeft:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007cba",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]})]})}):d?(0,ga.jsxs)("div",{className:"enhanced-article-container",children:[(0,ga.jsx)("div",{className:"reading-progress-container",children:(0,ga.jsx)("div",{className:"reading-progress-bar",style:{width:"".concat(_,"%")}})}),(0,ga.jsxs)("header",{className:"enhanced-article-header",children:[(0,ga.jsxs)("div",{className:"enhanced-article-meta",children:[(0,ga.jsx)("span",{className:"article-date",children:d.date?new Date(d.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Date unavailable"}),(0,ga.jsxs)("span",{className:"article-reading-time",children:[d.readingTime||"5"," min read"]})]}),(0,ga.jsx)("h1",{className:"enhanced-article-title",children:d.title||"Untitled"}),d.subtitle&&(0,ga.jsx)("h2",{className:"enhanced-article-subtitle",children:d.subtitle}),(0,ga.jsxs)("div",{className:"enhanced-article-author",children:[(0,ga.jsx)("img",{src:(null===(e=d.author)||void 0===e?void 0:e.avatar)||"/default-avatar.png",alt:(null===(n=d.author)||void 0===n?void 0:n.name)||"Author",className:"enhanced-author-avatar",onError:e=>{e.target.src="/default-avatar.png"}}),(0,ga.jsx)("div",{className:"enhanced-author-info",children:(0,ga.jsx)("span",{className:"enhanced-author-name",children:(null===(r=d.author)||void 0===r?void 0:r.name)||"Author"})})]}),(0,ga.jsx)("div",{className:"enhanced-article-categories",children:(C=d.categories,Array.isArray(C)?C:"string"===typeof C&&C?C.split(",").map((e=>e.trim())).filter(Boolean):[]).map(((e,t)=>(0,ga.jsx)(ft,{to:"/blog/category/".concat(e.toLowerCase().replace(/\s+/g,"-")),className:"enhanced-category-tag",children:e},t)))})]}),(0,ga.jsx)("div",{className:"enhanced-article-hero",children:(0,ga.jsx)("img",{src:d.image||"/default-hero.png",alt:d.title||"Article image",className:"enhanced-article-hero-image",onError:e=>{e.target.src="/default-hero.png"}})}),(0,ga.jsxs)("div",{className:"enhanced-article-layout",children:[(0,ga.jsx)("aside",{className:"enhanced-article-sidebar",children:(0,ga.jsxs)("div",{className:"sharing-toolbar",children:[(0,ga.jsxs)("button",{className:"share-button",onClick:()=>E(!S),children:[(0,ga.jsx)("span",{className:"share-icon",children:"Share"}),S&&(0,ga.jsxs)("div",{className:"share-tooltip",children:[(0,ga.jsx)("button",{className:"share-option twitter",onClick:()=>{const e=window.location.href,t=d.title||"Check out this article";window.open("https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(e),"&text=").concat(encodeURIComponent(t)),"_blank")},children:"Twitter"}),(0,ga.jsx)("button",{className:"share-option facebook",onClick:()=>{const e=window.location.href;window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e)),"_blank")},children:"Facebook"}),(0,ga.jsx)("button",{className:"share-option linkedin",onClick:()=>{const e=window.location.href,t=d.title||"Article";window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(e),"&title=").concat(encodeURIComponent(t)),"_blank")},children:"LinkedIn"}),(0,ga.jsx)("button",{className:"share-option copy-link",onClick:()=>{navigator.clipboard.writeText(window.location.href).then((()=>{alert("Link copied to clipboard!")}))},children:"Copy Link"})]})]}),(0,ga.jsx)("button",{className:"bookmark-button",onClick:()=>u("/blog/edit/".concat(d.slug)),children:(0,ga.jsx)("span",{className:"bookmark-icon",children:"Edit"})})]})}),(0,ga.jsxs)("article",{className:"enhanced-article-content",ref:M,children:[(0,ga.jsx)("div",{className:"enhanced-article-body",children:null!==d&&void 0!==d&&d.content?(0,ga.jsx)("div",{className:"article-content-html",dangerouslySetInnerHTML:{__html:d.content}}):(0,ga.jsx)("p",{children:"No content available."})}),(0,ga.jsx)("div",{className:"enhanced-article-tags",children:A(d.tags).length>0&&(0,ga.jsx)("div",{className:"tags-container",children:A(d.tags).map(((e,t)=>(0,ga.jsx)(ft,{to:"/blog/tag/".concat(e.toLowerCase().replace(/\s+/g,"-")),className:"article-tag",children:e},t)))})}),(0,ga.jsx)("div",{className:"article-engagement-section",children:(0,ga.jsx)(Rm,{postId:d.id,showReactions:!0,showCounts:!0,size:"large"})}),(0,ga.jsxs)("div",{className:"enhanced-author-bio",children:[(0,ga.jsx)("img",{src:(null===(a=d.author)||void 0===a?void 0:a.avatar)||"/default-avatar.png",alt:(null===(i=d.author)||void 0===i?void 0:i.name)||"Author",className:"bio-avatar",onError:e=>{e.target.src="/default-avatar.png"}}),(0,ga.jsxs)("div",{className:"bio-content",children:[(0,ga.jsx)("h3",{className:"bio-name",children:(null===(s=d.author)||void 0===s?void 0:s.name)||"Author"}),null!==(o=d.author)&&void 0!==o&&o.bio?(0,ga.jsx)("p",{className:"bio-text",children:d.author.bio}):(0,ga.jsx)("p",{className:"bio-text",children:"Writer and contributor to our blog."}),(null===(l=d.author)||void 0===l?void 0:l.social)&&(0,ga.jsxs)("div",{className:"bio-social-links",children:[d.author.social.twitter&&(0,ga.jsx)("a",{href:d.author.social.twitter,target:"_blank",rel:"noopener noreferrer",className:"social-link twitter",children:"Twitter"}),d.author.social.linkedin&&(0,ga.jsx)("a",{href:d.author.social.linkedin,target:"_blank",rel:"noopener noreferrer",className:"social-link linkedin",children:"LinkedIn"})]}),(0,ga.jsx)("button",{className:"follow-button",children:"Follow"})]})]}),(0,ga.jsx)("div",{className:"comments-section",children:(0,ga.jsx)(wm,{postId:d.id})})]})]}),p.length>0&&(0,ga.jsxs)("section",{className:"enhanced-related-articles",children:[(0,ga.jsx)("h2",{className:"related-heading",children:"Related Articles"}),(0,ga.jsx)("div",{className:"related-articles-grid",children:p.map((e=>{var t;return(0,ga.jsx)("div",{className:"related-article-card",children:(0,ga.jsxs)(ft,{to:"/blog/".concat(e.slug),className:"related-article-link",children:[(0,ga.jsx)("div",{className:"related-article-image",children:(0,ga.jsx)("img",{src:e.image||"/default-hero.png",alt:e.title||"Related article",onError:e=>{e.target.src="/default-hero.png"}})}),(0,ga.jsxs)("div",{className:"related-article-content",children:[(0,ga.jsx)("h3",{className:"related-article-title",children:e.title||"Untitled"}),(0,ga.jsx)("p",{className:"related-article-excerpt",children:e.excerpt||""}),(0,ga.jsxs)("div",{className:"related-article-meta",children:[(0,ga.jsx)("span",{className:"related-article-author",children:(null===(t=e.author)||void 0===t?void 0:t.name)||"Author"}),(0,ga.jsx)("span",{className:"dot-separator",children:"\xb7"}),(0,ga.jsxs)("span",{className:"related-article-read-time",children:[e.readingTime||"4"," min read"]})]})]})]})},e.id)}))})]}),(0,ga.jsxs)("section",{className:"enhanced-recommended-section",children:[(0,ga.jsx)("h2",{className:"recommended-heading",children:"Recommended For You"}),(0,ga.jsx)("div",{className:"recommended-articles-grid",children:f.map((e=>{var t;return(0,ga.jsx)("div",{className:"recommended-article-card",children:(0,ga.jsxs)(ft,{to:"/blog/".concat(e.slug),className:"recommended-article-link",children:[(0,ga.jsx)("div",{className:"recommended-article-image",children:(0,ga.jsx)("img",{src:e.image||"/default-hero.png",alt:e.title||"Recommended article",onError:e=>{e.target.src="/default-hero.png"}})}),(0,ga.jsxs)("div",{className:"recommended-article-content",children:[(0,ga.jsx)("h3",{className:"recommended-article-title",children:e.title||"Untitled"}),(0,ga.jsxs)("div",{className:"recommended-article-meta",children:[(0,ga.jsx)("span",{className:"recommended-article-author",children:(null===(t=e.author)||void 0===t?void 0:t.name)||"Author"}),(0,ga.jsx)("span",{className:"dot-separator",children:"\xb7"}),(0,ga.jsx)("span",{className:"recommended-article-date",children:e.date?new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Date unavailable"})]})]})]})},e.id)}))})]}),(0,ga.jsx)("div",{className:"enhanced-post-navigation",children:(0,ga.jsx)(ft,{to:"/blog",className:"back-to-blog-btn",children:"\u2190 Back to all articles"})})]}):(0,ga.jsx)("div",{className:"enhanced-loading",children:(0,ga.jsxs)("div",{className:"error-message",children:[(0,ga.jsx)("h2",{children:"Article not found"}),(0,ga.jsx)("p",{children:"The article you're looking for doesn't exist or has been removed."}),(0,ga.jsxs)("p",{children:['Searched for slug: "',c,'"']}),(0,ga.jsx)(ft,{to:"/blog",className:"back-to-blog-btn",children:"\u2190 Back to all articles"})]})});var C},km=gm("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),Lm=gm("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),jm=gm("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),Dm=gm("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Um=gm("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Im=gm("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),Om=gm("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Fm=gm("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),zm=gm("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bm=gm("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Hm=gm("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Vm=gm("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Gm=gm("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Wm=gm("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),qm=gm("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Xm=gm("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Ym=()=>{const e=pe(),n=(0,t.useRef)(null),[r,a]=(0,t.useState)({title:"",subtitle:"",excerpt:"",image:null,categories:"",tags:"",authorName:"",authorAvatar:"",authorBio:"",authorSocial:{twitter:"",linkedin:"",instagram:"",website:""},publishDate:"",status:"draft",password:"",slug:"",metaDescription:"",focusKeyword:""}),[i,s]=(0,t.useState)([{id:1,type:"paragraph",content:""}]),[o,l]=(0,t.useState)(!1),[u,d]=(0,t.useState)("draft"),[h,p]=(0,t.useState)({}),[m,f]=(0,t.useState)(!1),[g,v]=(0,t.useState)(0),[x,y]=(0,t.useState)(0),[b,_]=(0,t.useState)(null),w={paragraph:{icon:km,label:"Paragraph",color:"#3B82F6"},heading:{icon:km,label:"Heading",color:"#8B5CF6"},subheading:{icon:km,label:"Subheading",color:"#A855F7"},image:{icon:Lm,label:"Image",color:"#10B981"},quote:{icon:jm,label:"Quote",color:"#F59E0B"},list:{icon:Dm,label:"List",color:"#EF4444"},video:{icon:Um,label:"Video",color:"#EC4899"},code:{icon:Im,label:"Code Block",color:"#6B7280"},separator:{icon:Om,label:"Separator",color:"#9CA3AF"},link:{icon:Fm,label:"Link Card",color:"#14B8A6"}};(0,t.useEffect)((()=>{if(!Jr.isAuthenticated())return void e("/wplogin");const t=Jr.getCurrentUser();t&&(_(t),a((e=>{var n,r,a,i;return c(c({},e),{},{authorName:t.displayName||t.username||"",authorAvatar:t.avatar||"",authorBio:t.bio||"",authorSocial:{twitter:(null===(n=t.social)||void 0===n?void 0:n.twitter)||"",linkedin:(null===(r=t.social)||void 0===r?void 0:r.linkedin)||"",instagram:(null===(a=t.social)||void 0===a?void 0:a.instagram)||"",website:(null===(i=t.social)||void 0===i?void 0:i.website)||""}})})))}),[e]),(0,t.useEffect)((()=>{const e=i.map((e=>"paragraph"===e.type||"heading"===e.type||"subheading"===e.type||"quote"===e.type?e.content||"":"list"===e.type&&e.items?e.items.join(" "):"")).join(" ").trim().split(/\s+/).filter((e=>e.length>0)).length;v(e),y(Math.ceil(e/200))}),[i]),(0,t.useEffect)((()=>{if(r.title&&!r.slug){const e=r.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,50);a((t=>c(c({},t),{},{slug:e})))}}),[r.title]);const S=e=>{const{name:t,value:n,type:r,checked:i}=e.target;if(t.startsWith("authorSocial.")){const e=t.split(".")[1];a((t=>c(c({},t),{},{authorSocial:c(c({},t.authorSocial),{},{[e]:n})})))}else a((e=>c(c({},e),{},{[t]:"checkbox"===r?i:n})));p((e=>c(c({},e),{},{[t]:""})))},E=(e,t)=>{s((n=>n.map((n=>n.id===e?c(c({},n),t):n))))},M=(e,t)=>{s((n=>{const r=n.findIndex((t=>t.id===e));if("up"===t&&0===r||"down"===t&&r===n.length-1)return n;const a=[...n],i="up"===t?r-1:r+1;return[a[r],a[i]]=[a[i],a[r]],a}))},T=async t=>{if(t.preventDefault(),(()=>{const e={};return r.title.trim()||(e.title="Title is required"),r.excerpt.trim()||(e.excerpt="Excerpt is required"),r.authorName.trim()||(e.authorName="Author name is required"),"password"!==r.status||r.password.trim()||(e.password="Password is required for password-protected posts"),i.some((e=>{var t,n,r,a;return["paragraph","heading","subheading","quote"].includes(e.type)?null===(t=e.content)||void 0===t?void 0:t.trim():"image"===e.type?e.file:"list"===e.type?null===(n=e.items)||void 0===n?void 0:n.some((e=>e.trim())):"video"===e.type?null===(r=e.url)||void 0===r?void 0:r.trim():"code"===e.type&&(null===(a=e.content)||void 0===a?void 0:a.trim())}))||(e.content="At least one content section is required"),p(e),0===Object.keys(e).length})()){if(!Jr.isAuthenticated())return p({general:"Please log in to create a post."}),void e("/wplogin");l(!0);try{let t=null;if(r.image){t=(await Jr.uploadMedia(r.image,{title:r.title})).id}const n=await(async()=>{var e,t,n,r,a,s,o,l;let c="";for(const h of i)switch(h.type){case"paragraph":null!==(e=h.content)&&void 0!==e&&e.trim()&&(c+="<p>".concat(h.content,"</p>\n"));break;case"heading":null!==(t=h.content)&&void 0!==t&&t.trim()&&(c+="<h2>".concat(h.content,"</h2>\n"));break;case"subheading":null!==(n=h.content)&&void 0!==n&&n.trim()&&(c+="<h3>".concat(h.content,"</h3>\n"));break;case"image":if(h.file)try{const e=await Jr.uploadMedia(h.file,{caption:h.caption||"",alt:h.alt||""});c+='<figure class="wp-block-image align'.concat(h.alignment,'">\n                <img src="').concat(e.url,'" alt="').concat(h.alt||"",'" />\n                ').concat(h.caption?"<figcaption>".concat(h.caption,"</figcaption>"):"","\n              </figure>\n")}catch(d){console.error("Error uploading image:",d)}break;case"quote":null!==(r=h.content)&&void 0!==r&&r.trim()&&(c+='<blockquote class="wp-block-quote '.concat("default"!==h.style?"is-style-".concat(h.style):"",'">\n              <p>').concat(h.content,"</p>\n              ").concat(h.attribution?"<cite>".concat(h.attribution,"</cite>"):"","\n            </blockquote>\n"));break;case"list":if(null!==(a=h.items)&&void 0!==a&&a.some((e=>e.trim()))){const e="ordered"===h.listType?"ol":"ul";c+="<".concat(e,' class="wp-block-list">\n').concat(h.items.filter((e=>e.trim())).map((e=>"<li>".concat(e,"</li>"))).join("\n"),"\n</").concat(e,">\n")}break;case"video":if(null!==(s=h.url)&&void 0!==s&&s.trim()){let e=h.url;if(h.url.includes("youtube.com/watch")){var u;const t=null===(u=h.url.split("v=")[1])||void 0===u?void 0:u.split("&")[0];e="https://www.youtube.com/embed/".concat(t)}else if(h.url.includes("vimeo.com/")){const t=h.url.split("/").pop();e="https://player.vimeo.com/video/".concat(t)}c+='<figure class="wp-block-embed wp-block-embed-youtube">\n              <div class="wp-block-embed__wrapper">\n                <iframe src="'.concat(e,'" frameborder="0" allowfullscreen ').concat(h.autoplay?"autoplay":"","></iframe>\n              </div>\n              ").concat(h.caption?"<figcaption>".concat(h.caption,"</figcaption>"):"","\n            </figure>\n")}break;case"code":null!==(o=h.content)&&void 0!==o&&o.trim()&&(c+='<pre class="wp-block-code"><code class="language-'.concat(h.language,'">').concat(h.content,"</code></pre>\n"));break;case"separator":c+='<hr class="wp-block-separator is-style-'.concat(h.style,'" />\n');break;case"link":null!==(l=h.url)&&void 0!==l&&l.trim()&&(c+='<div class="wp-block-group link-card">\n              <div class="wp-block-group__inner-container">\n                <h4><a href="'.concat(h.url,'" target="_blank" rel="noopener noreferrer">').concat(h.title||h.url,"</a></h4>\n                ").concat(h.description?"<p>".concat(h.description,"</p>"):"","\n              </div>\n            </div>\n"))}return c})(),a={title:r.title,content:n,excerpt:r.excerpt,status:u,categories:r.categories.split(",").map((e=>e.trim())).filter((e=>""!==e)),tags:r.tags.split(",").map((e=>e.trim())).filter((e=>""!==e)),featured_media:t,meta:{subtitle:r.subtitle,meta_description:r.metaDescription,focus_keyword:r.focusKeyword,author_bio:r.authorBio,author_social:r.authorSocial},fields:{subtitle:r.subtitle,author_social:r.authorSocial}};"password"===r.status&&r.password&&(a.password=r.password),r.publishDate&&(a.date=r.publishDate);const s=Jr.getToken(),o=await im.createPost(a,s);l(!1),e("publish"===u?"/blog/".concat(o.slug):"/blog")}catch(n){l(!1),console.error("Error creating post:",n),p({general:n.message||"Failed to save post. Please try again."})}}else{const e=document.querySelector(".error-field");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}},N=e=>{var t,n,r;const a=(null===(t=w[e.type])||void 0===t?void 0:t.icon)||km,i=(null===(n=w[e.type])||void 0===n?void 0:n.color)||"#3B82F6";return(0,ga.jsxs)("div",{className:"content-section",style:{borderLeft:"4px solid ".concat(i)},children:[(0,ga.jsxs)("div",{className:"section-header",children:[(0,ga.jsxs)("div",{className:"section-info",children:[(0,ga.jsx)(a,{size:16,style:{color:i}}),(0,ga.jsx)("span",{children:(null===(r=w[e.type])||void 0===r?void 0:r.label)||e.type})]}),(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsx)("button",{type:"button",onClick:()=>M(e.id,"up"),className:"section-btn",title:"Move up",children:"\u2191"}),(0,ga.jsx)("button",{type:"button",onClick:()=>M(e.id,"down"),className:"section-btn",title:"Move down",children:"\u2193"}),(0,ga.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void s((e=>e.filter((e=>e.id!==t))));var t},className:"section-btn remove",title:"Remove section",children:(0,ga.jsx)(zm,{size:14})})]})]}),(0,ga.jsx)("div",{className:"section-content",children:A(e)})]},e.id)},A=e=>{switch(e.type){case"paragraph":return(0,ga.jsx)("textarea",{value:e.content||"",onChange:t=>E(e.id,{content:t.target.value}),placeholder:"Write your paragraph...",className:"section-textarea",rows:4});case"heading":return(0,ga.jsx)("input",{type:"text",value:e.content||"",onChange:t=>E(e.id,{content:t.target.value}),placeholder:"Enter heading...",className:"section-input heading"});case"subheading":return(0,ga.jsx)("input",{type:"text",value:e.content||"",onChange:t=>E(e.id,{content:t.target.value}),placeholder:"Enter subheading...",className:"section-input subheading"});case"image":return(0,ga.jsxs)("div",{className:"image-section",children:[(0,ga.jsx)("input",{type:"file",accept:"image/*",onChange:t=>{const n=t.target.files[0];n&&E(e.id,{file:n})},className:"file-input"}),(0,ga.jsxs)("div",{className:"image-options",children:[(0,ga.jsx)("input",{type:"text",value:e.caption||"",onChange:t=>E(e.id,{caption:t.target.value}),placeholder:"Image caption (optional)",className:"section-input"}),(0,ga.jsx)("input",{type:"text",value:e.alt||"",onChange:t=>E(e.id,{alt:t.target.value}),placeholder:"Alt text for accessibility",className:"section-input"}),(0,ga.jsxs)("select",{value:e.alignment||"center",onChange:t=>E(e.id,{alignment:t.target.value}),className:"section-select",children:[(0,ga.jsx)("option",{value:"left",children:"Align Left"}),(0,ga.jsx)("option",{value:"center",children:"Align Center"}),(0,ga.jsx)("option",{value:"right",children:"Align Right"})]})]}),e.file&&(0,ga.jsx)("div",{className:"image-preview",children:(0,ga.jsx)("img",{src:URL.createObjectURL(e.file),alt:"Preview"})})]});case"quote":return(0,ga.jsxs)("div",{className:"quote-section",children:[(0,ga.jsx)("textarea",{value:e.content||"",onChange:t=>E(e.id,{content:t.target.value}),placeholder:"Enter quote text...",className:"section-textarea",rows:3}),(0,ga.jsxs)("div",{className:"quote-options",children:[(0,ga.jsx)("input",{type:"text",value:e.attribution||"",onChange:t=>E(e.id,{attribution:t.target.value}),placeholder:"Attribution (optional)",className:"section-input"}),(0,ga.jsxs)("select",{value:e.style||"default",onChange:t=>E(e.id,{style:t.target.value}),className:"section-select",children:[(0,ga.jsx)("option",{value:"default",children:"Default"}),(0,ga.jsx)("option",{value:"large",children:"Large"}),(0,ga.jsx)("option",{value:"plain",children:"Plain"})]})]})]});case"list":return(0,ga.jsxs)("div",{className:"list-section",children:[(0,ga.jsx)("div",{className:"list-options",children:(0,ga.jsxs)("select",{value:e.listType||"unordered",onChange:t=>E(e.id,{listType:t.target.value}),className:"section-select",children:[(0,ga.jsx)("option",{value:"unordered",children:"Bullet List"}),(0,ga.jsx)("option",{value:"ordered",children:"Numbered List"})]})}),(e.items||[""]).map(((t,n)=>(0,ga.jsxs)("div",{className:"list-item",children:[(0,ga.jsx)("input",{type:"text",value:t,onChange:t=>{const r=[...e.items||[""]];r[n]=t.target.value,E(e.id,{items:r})},placeholder:"Item ".concat(n+1),className:"section-input"}),(0,ga.jsx)("button",{type:"button",onClick:()=>{const t=(e.items||[""]).filter(((e,t)=>t!==n));E(e.id,{items:t})},className:"remove-item-btn",children:(0,ga.jsx)(zm,{size:14})})]},n))),(0,ga.jsxs)("button",{type:"button",onClick:()=>{const t=[...e.items||[""],""];E(e.id,{items:t})},className:"add-item-btn",children:[(0,ga.jsx)(Bm,{size:14})," Add Item"]})]});case"video":return(0,ga.jsxs)("div",{className:"video-section",children:[(0,ga.jsx)("input",{type:"url",value:e.url||"",onChange:t=>E(e.id,{url:t.target.value}),placeholder:"Video URL (YouTube, Vimeo, etc.)",className:"section-input"}),(0,ga.jsx)("input",{type:"text",value:e.caption||"",onChange:t=>E(e.id,{caption:t.target.value}),placeholder:"Video caption (optional)",className:"section-input"}),(0,ga.jsxs)("label",{className:"checkbox-label",children:[(0,ga.jsx)("input",{type:"checkbox",checked:e.autoplay||!1,onChange:t=>E(e.id,{autoplay:t.target.checked})}),"Autoplay"]})]});case"code":return(0,ga.jsxs)("div",{className:"code-section",children:[(0,ga.jsxs)("select",{value:e.language||"javascript",onChange:t=>E(e.id,{language:t.target.value}),className:"section-select",children:[(0,ga.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,ga.jsx)("option",{value:"html",children:"HTML"}),(0,ga.jsx)("option",{value:"css",children:"CSS"}),(0,ga.jsx)("option",{value:"python",children:"Python"}),(0,ga.jsx)("option",{value:"php",children:"PHP"}),(0,ga.jsx)("option",{value:"sql",children:"SQL"}),(0,ga.jsx)("option",{value:"json",children:"JSON"})]}),(0,ga.jsx)("textarea",{value:e.content||"",onChange:t=>E(e.id,{content:t.target.value}),placeholder:"Enter your code...",className:"section-textarea code",rows:6,style:{fontFamily:"monospace"}})]});case"separator":return(0,ga.jsxs)("div",{className:"separator-section",children:[(0,ga.jsxs)("select",{value:e.style||"line",onChange:t=>E(e.id,{style:t.target.value}),className:"section-select",children:[(0,ga.jsx)("option",{value:"line",children:"Default"}),(0,ga.jsx)("option",{value:"wide",children:"Wide"}),(0,ga.jsx)("option",{value:"dots",children:"Dots"})]}),(0,ga.jsx)("div",{className:"separator-preview separator-".concat(e.style||"line")})]});case"link":return(0,ga.jsxs)("div",{className:"link-section",children:[(0,ga.jsx)("input",{type:"url",value:e.url||"",onChange:t=>E(e.id,{url:t.target.value}),placeholder:"Link URL",className:"section-input"}),(0,ga.jsx)("input",{type:"text",value:e.title||"",onChange:t=>E(e.id,{title:t.target.value}),placeholder:"Link title",className:"section-input"}),(0,ga.jsx)("textarea",{value:e.description||"",onChange:t=>E(e.id,{description:t.target.value}),placeholder:"Link description (optional)",className:"section-textarea",rows:2})]});default:return(0,ga.jsx)("div",{children:"Unknown section type"})}};return Jr.isAuthenticated()?(0,ga.jsxs)("div",{className:"blog-create-container",children:[(0,ga.jsxs)("div",{className:"blog-create-header",children:[(0,ga.jsx)("h1",{children:"Create New Article"}),(0,ga.jsxs)("div",{className:"header-stats",children:[(0,ga.jsxs)("span",{className:"stat-item",children:[(0,ga.jsx)(km,{size:16}),g," words"]}),(0,ga.jsxs)("span",{className:"stat-item",children:[(0,ga.jsx)(Hm,{size:16}),x," min read"]}),b&&(0,ga.jsxs)("span",{className:"stat-item",children:[(0,ga.jsx)(Vm,{size:16}),b.displayName]})]}),(0,ga.jsxs)("div",{className:"header-actions",children:[(0,ga.jsxs)("button",{type:"button",onClick:()=>f(!m),className:"preview-button",children:[(0,ga.jsx)(Gm,{size:16}),m?"Edit":"Preview"]}),(0,ga.jsx)("button",{onClick:()=>e("/blog"),className:"cancel-button",children:"Cancel"})]})]}),h.general&&(0,ga.jsxs)("div",{className:"error-banner",children:[(0,ga.jsx)(Nm,{size:20}),h.general]}),(0,ga.jsx)("form",{className:"blog-create-form",onSubmit:T,children:(0,ga.jsxs)("div",{className:"form-layout",children:[(0,ga.jsxs)("div",{className:"main-form-content",children:[(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"title",children:"Title *"}),(0,ga.jsx)("input",{type:"text",id:"title",name:"title",value:r.title,onChange:S,placeholder:"Enter a compelling title",className:"title-input ".concat(h.title?"error-field":"")}),h.title&&(0,ga.jsx)("span",{className:"error-message",children:h.title})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"subtitle",children:"Subtitle"}),(0,ga.jsx)("input",{type:"text",id:"subtitle",name:"subtitle",value:r.subtitle,onChange:S,placeholder:"A subtitle to complement your title",className:"subtitle-input"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"slug",children:"URL Slug"}),(0,ga.jsx)("input",{type:"text",id:"slug",name:"slug",value:r.slug,onChange:S,placeholder:"url-friendly-slug",className:"slug-input"}),(0,ga.jsxs)("small",{className:"helper-text",children:["Preview: /blog/",r.slug||"your-post-slug"]})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"excerpt",children:"Excerpt *"}),(0,ga.jsx)("textarea",{id:"excerpt",name:"excerpt",value:r.excerpt,onChange:S,rows:"3",placeholder:"A brief summary (150-200 characters recommended)",className:"excerpt-input ".concat(h.excerpt?"error-field":"")}),h.excerpt&&(0,ga.jsx)("span",{className:"error-message",children:h.excerpt}),(0,ga.jsxs)("small",{className:"helper-text",children:[r.excerpt.length,"/200 characters"]})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"image",children:"Featured Image"}),(0,ga.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>10485760)return void p((e=>c(c({},e),{},{image:"Image size must be less than 10MB"})));a((e=>c(c({},e),{},{image:t}))),p((e=>c(c({},e),{},{image:""})))}},className:"image-input ".concat(h.image?"error-field":""),ref:n}),h.image&&(0,ga.jsx)("span",{className:"error-message",children:h.image}),r.image&&(0,ga.jsxs)("div",{className:"image-preview featured-image-preview",children:[(0,ga.jsx)("img",{src:URL.createObjectURL(r.image),alt:"Featured preview"}),(0,ga.jsx)("button",{type:"button",onClick:()=>{a((e=>c(c({},e),{},{image:null}))),n.current&&(n.current.value="")},className:"remove-image-btn",children:(0,ga.jsx)(zm,{size:16})})]})]}),(0,ga.jsxs)("div",{className:"form-group content-builder",children:[(0,ga.jsx)("label",{children:"Content *"}),h.content&&(0,ga.jsx)("span",{className:"error-message",children:h.content}),(0,ga.jsx)("div",{className:"content-sections",children:i.map((e=>N(e)))}),(0,ga.jsxs)("div",{className:"add-section-controls",children:[(0,ga.jsx)("h4",{children:"Add Content Block:"}),(0,ga.jsx)("div",{className:"section-buttons",children:Object.entries(w).map((e=>{let[t,n]=e;const r=n.icon;return(0,ga.jsxs)("button",{type:"button",onClick:()=>(e=>{let t={id:Date.now(),type:e};switch(e){case"heading":case"subheading":case"paragraph":default:t.content="";break;case"image":t=c(c({},t),{},{file:null,caption:"",alt:"",alignment:"center"});break;case"quote":t=c(c({},t),{},{content:"",attribution:"",style:"default"});break;case"list":t=c(c({},t),{},{items:[""],listType:"unordered"});break;case"video":t=c(c({},t),{},{url:"",caption:"",autoplay:!1});break;case"code":t=c(c({},t),{},{content:"",language:"javascript"});break;case"separator":t=c(c({},t),{},{style:"line"});break;case"link":t=c(c({},t),{},{url:"",title:"",description:""})}s((e=>[...e,t]))})(t),className:"add-section-btn",style:{borderColor:n.color},title:"Add ".concat(n.label),children:[(0,ga.jsx)(r,{size:16,style:{color:n.color}}),n.label]},t)}))})]})]})]}),(0,ga.jsxs)("div",{className:"side-form-content",children:[(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsxs)("h3",{children:[(0,ga.jsx)(Wm,{size:18})," Publishing"]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"status",children:"Post Status"}),(0,ga.jsxs)("select",{id:"status",name:"status",value:r.status,onChange:S,className:"status-select",children:[(0,ga.jsx)("option",{value:"draft",children:"Draft"}),(0,ga.jsx)("option",{value:"publish",children:"Published"}),(0,ga.jsx)("option",{value:"private",children:"Private"}),(0,ga.jsx)("option",{value:"password",children:"Password Protected"})]})]}),"password"===r.status&&(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"password",children:"Password"}),(0,ga.jsx)("input",{type:"password",id:"password",name:"password",value:r.password,onChange:S,placeholder:"Enter password",className:"password-input ".concat(h.password?"error-field":"")}),h.password&&(0,ga.jsx)("span",{className:"error-message",children:h.password})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"publishDate",children:"Publish Date"}),(0,ga.jsx)("input",{type:"datetime-local",id:"publishDate",name:"publishDate",value:r.publishDate,onChange:S,className:"date-input"}),(0,ga.jsx)("small",{className:"helper-text",children:"Leave empty to publish immediately"})]}),(0,ga.jsxs)("div",{className:"publishing-actions",children:[(0,ga.jsx)("button",{type:"submit",className:"publish-button",onClick:()=>d("publish"),disabled:o,children:o&&"publish"===u?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("div",{className:"spinner"}),"Publishing..."]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(Wm,{size:16}),"Publish Article"]})}),(0,ga.jsx)("button",{type:"button",className:"save-draft-button",onClick:e=>{e.preventDefault(),d("draft"),T(e)},disabled:o,children:o&&"draft"===u?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("div",{className:"spinner"}),"Saving..."]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(qm,{size:16}),"Save as Draft"]})})]})]}),(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsxs)("h3",{children:[(0,ga.jsx)(Xm,{size:18})," Categories & Tags"]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"categories",children:"Categories"}),(0,ga.jsx)("input",{type:"text",id:"categories",name:"categories",value:r.categories,onChange:S,placeholder:"Technology, Design, Business",className:"categories-input"}),(0,ga.jsx)("small",{className:"helper-text",children:"Separate with commas"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"tags",children:"Tags"}),(0,ga.jsx)("input",{type:"text",id:"tags",name:"tags",value:r.tags,onChange:S,placeholder:"wordpress, react, javascript",className:"tags-input"}),(0,ga.jsx)("small",{className:"helper-text",children:"Separate with commas"})]})]}),(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsxs)("h3",{children:[(0,ga.jsx)(Wm,{size:18})," SEO Settings"]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"metaDescription",children:"Meta Description"}),(0,ga.jsx)("textarea",{id:"metaDescription",name:"metaDescription",value:r.metaDescription,onChange:S,placeholder:"SEO meta description (160 characters max)",className:"meta-description-input",rows:"3"}),(0,ga.jsxs)("small",{className:"helper-text",children:[r.metaDescription.length,"/160 characters"]})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"focusKeyword",children:"Focus Keyword"}),(0,ga.jsx)("input",{type:"text",id:"focusKeyword",name:"focusKeyword",value:r.focusKeyword,onChange:S,placeholder:"Main SEO keyword",className:"focus-keyword-input"})]})]}),(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsxs)("h3",{children:[(0,ga.jsx)(Vm,{size:18})," Author Information"]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorName",children:"Name *"}),(0,ga.jsx)("input",{type:"text",id:"authorName",name:"authorName",value:r.authorName,onChange:S,className:"author-name-input ".concat(h.authorName?"error-field":"")}),h.authorName&&(0,ga.jsx)("span",{className:"error-message",children:h.authorName})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorAvatar",children:"Avatar URL"}),(0,ga.jsx)("input",{type:"url",id:"authorAvatar",name:"authorAvatar",value:r.authorAvatar,onChange:S,placeholder:"https://example.com/avatar.jpg",className:"author-avatar-input"}),r.authorAvatar&&(0,ga.jsx)("div",{className:"avatar-preview",children:(0,ga.jsx)("img",{src:r.authorAvatar,alt:"Author avatar preview"})})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorBio",children:"Short Bio"}),(0,ga.jsx)("textarea",{id:"authorBio",name:"authorBio",value:r.authorBio,onChange:S,rows:"3",placeholder:"A brief author bio",className:"author-bio-input"})]}),(0,ga.jsx)("h4",{children:"Social Media"}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorSocial.twitter",children:"Twitter"}),(0,ga.jsx)("input",{type:"url",id:"authorSocial.twitter",name:"authorSocial.twitter",value:r.authorSocial.twitter,onChange:S,placeholder:"https://twitter.com/username",className:"social-input"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorSocial.linkedin",children:"LinkedIn"}),(0,ga.jsx)("input",{type:"url",id:"authorSocial.linkedin",name:"authorSocial.linkedin",value:r.authorSocial.linkedin,onChange:S,placeholder:"https://linkedin.com/in/username",className:"social-input"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorSocial.instagram",children:"Instagram"}),(0,ga.jsx)("input",{type:"url",id:"authorSocial.instagram",name:"authorSocial.instagram",value:r.authorSocial.instagram,onChange:S,placeholder:"https://instagram.com/username",className:"social-input"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorSocial.website",children:"Website"}),(0,ga.jsx)("input",{type:"url",id:"authorSocial.website",name:"authorSocial.website",value:r.authorSocial.website,onChange:S,placeholder:"https://yourwebsite.com",className:"social-input"})]})]}),(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsxs)("h3",{children:[(0,ga.jsx)(km,{size:18})," Content Stats"]}),(0,ga.jsxs)("div",{className:"stats-grid",children:[(0,ga.jsxs)("div",{className:"stat-item",children:[(0,ga.jsx)("div",{className:"stat-value",children:g}),(0,ga.jsx)("div",{className:"stat-label",children:"Words"})]}),(0,ga.jsxs)("div",{className:"stat-item",children:[(0,ga.jsx)("div",{className:"stat-value",children:x}),(0,ga.jsx)("div",{className:"stat-label",children:"Min Read"})]}),(0,ga.jsxs)("div",{className:"stat-item",children:[(0,ga.jsx)("div",{className:"stat-value",children:i.length}),(0,ga.jsx)("div",{className:"stat-label",children:"Sections"})]}),(0,ga.jsxs)("div",{className:"stat-item",children:[(0,ga.jsx)("div",{className:"stat-value",children:r.excerpt.length}),(0,ga.jsx)("div",{className:"stat-label",children:"Excerpt Chars"})]})]})]})]})]})})]}):(0,ga.jsx)("div",{className:"blog-create-container",children:(0,ga.jsxs)("div",{className:"auth-required",children:[(0,ga.jsx)(Nm,{size:48,color:"#dc2626"}),(0,ga.jsx)("h2",{children:"Authentication Required"}),(0,ga.jsx)("p",{children:"You need to be logged in to create blog posts."}),(0,ga.jsx)("button",{onClick:()=>e("/wplogin"),className:"login-button",children:"Go to Login"})]})})},Km=gm("heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]),Jm=gm("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Zm=()=>{const e=pe(),{slug:n}=me(),[r,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)({title:"",subtitle:"",excerpt:"",image:null,categories:"",tags:"",authorName:"",authorAvatar:"",authorBio:"",authorSocial:{twitter:"",linkedin:""}}),[u,d]=(0,t.useState)([{type:"paragraph",content:""}]),[h,p]=(0,t.useState)(!1),[m,f]=(0,t.useState)("publish"),[g,v]=(0,t.useState)({}),[x,y]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{if(!n)return v({general:"No post specified for editing"}),void s(!1);if(!Jr.isAuthenticated())return console.log("User not authenticated, redirecting to login"),void e("/wplogin");try{var t,r,i,o,c,u,h,p,m,f;s(!0),v({}),console.log("Loading post with slug:",n);const e=await im.getPostBySlug(n);if(!e)throw new Error("Post not found");console.log("Fetched post:",e);const g=Jr.getCurrentUser();if(console.log("Current user:",g),!g)throw new Error("Unable to verify user permissions");const x=(null===(t=g.roles)||void 0===t?void 0:t.includes("administrator"))||(null===(r=g.roles)||void 0===r?void 0:r.includes("editor"))||(null===(i=e.author)||void 0===i?void 0:i.name)===g.displayName;if(console.log("Can edit:",x),!x)return v({general:"You don't have permission to edit this post"}),void s(!1);a(e),l({title:e.title||"",subtitle:e.subtitle||"",excerpt:e.excerpt||"",image:null,categories:Array.isArray(e.categories)?e.categories.join(", "):e.categories||"",tags:Array.isArray(e.tags)?e.tags.join(", "):e.tags||"",authorName:(null===(o=e.author)||void 0===o?void 0:o.name)||g.displayName||"",authorAvatar:(null===(c=e.author)||void 0===c?void 0:c.avatar)||g.avatar||"",authorBio:(null===(u=e.author)||void 0===u?void 0:u.bio)||"",authorSocial:{twitter:(null===(h=e.author)||void 0===h||null===(p=h.social)||void 0===p?void 0:p.twitter)||"",linkedin:(null===(m=e.author)||void 0===m||null===(f=m.social)||void 0===f?void 0:f.linkedin)||""}});const y=b(e.content);d(y.length>0?y:[{type:"paragraph",content:""}]),console.log("Post loaded successfully")}catch(g){console.error("Error loading post:",g),v({general:g.message||"Failed to load post"})}finally{s(!1)}})()}),[n,e]);const b=e=>{if(!e)return[];const t=[],n=document.createElement("div");n.innerHTML=e;const r=n.children;for(let a of r)switch(a.tagName.toLowerCase()){case"h2":t.push({type:"heading",content:a.textContent});break;case"h3":t.push({type:"subheading",content:a.textContent});break;case"blockquote":const e=a.querySelector("cite");t.push({type:"quote",content:a.textContent.replace((null===e||void 0===e?void 0:e.textContent)||"","").trim(),attribution:(null===e||void 0===e?void 0:e.textContent.replace("\u2014 ",""))||""});break;case"ul":const n=Array.from(a.querySelectorAll("li")).map((e=>e.textContent));t.push({type:"list",items:n});break;case"figure":const r=a.querySelector("img"),i=a.querySelector("figcaption");r&&t.push({type:"image",url:r.src,caption:(null===i||void 0===i?void 0:i.textContent)||"",file:null});break;default:a.textContent.trim()&&t.push({type:"paragraph",content:a.textContent})}return t},_=e=>{const{name:t,value:n}=e.target;if(t.startsWith("authorSocial.")){const e=t.split(".")[1];l(c(c({},o),{},{authorSocial:c(c({},o.authorSocial),{},{[e]:n})}))}else l(c(c({},o),{},{[t]:n}));v((e=>c(c({},e),{},{[t]:""})))},w=(e,t)=>{const n=[...u];n[e].content=t,d(n)},S=e=>{let t;switch(e){case"heading":t={type:"heading",content:""};break;case"subheading":t={type:"subheading",content:""};break;case"image":t={type:"image",file:null,caption:""};break;case"quote":t={type:"quote",content:"",attribution:""};break;case"list":t={type:"list",items:[""]};break;default:t={type:"paragraph",content:""}}d([...u,t])},E=e=>{const t=u.filter(((t,n)=>n!==e));d(t)},M=async t=>{if(t.preventDefault(),(()=>{const e={};return o.title.trim()||(e.title="Title is required"),o.excerpt.trim()||(e.excerpt="Excerpt is required"),o.authorName.trim()||(e.authorName="Author name is required"),u.some((e=>["paragraph","heading","subheading","quote"].includes(e.type)?""!==e.content.trim():"image"===e.type?e.file||e.url:"list"===e.type&&e.items.some((e=>""!==e.trim()))))||(e.content="At least one content section is required"),v(e),0===Object.keys(e).length})()){if(!Jr.isAuthenticated())return v({general:"Please log in to update this post."}),void e("/wplogin");p(!0);try{let t=null;if(o.image){t=(await Jr.uploadMedia(o.image,{title:o.title})).id}const a=await(async()=>{let e="";for(const n of u)switch(n.type){case"paragraph":n.content.trim()&&(e+="<p>".concat(n.content,"</p>\n"));break;case"heading":n.content.trim()&&(e+="<h2>".concat(n.content,"</h2>\n"));break;case"subheading":n.content.trim()&&(e+="<h3>".concat(n.content,"</h3>\n"));break;case"image":if(n.file)try{const t=await Jr.uploadMedia(n.file,{caption:n.caption||""});e+='<figure><img src="'.concat(t.url,'" alt="').concat(n.caption||"",'" />'),n.caption&&(e+="<figcaption>".concat(n.caption,"</figcaption>")),e+="</figure>\n"}catch(t){console.error("Error uploading image:",t)}else n.url&&(e+='<figure><img src="'.concat(n.url,'" alt="').concat(n.caption||"",'" />'),n.caption&&(e+="<figcaption>".concat(n.caption,"</figcaption>")),e+="</figure>\n");break;case"quote":n.content.trim()&&(e+="<blockquote><p>".concat(n.content,"</p>").concat(n.attribution?"<cite>\u2014 ".concat(n.attribution,"</cite>"):"","</blockquote>\n"));break;case"list":n.items.some((e=>e.trim()))&&(e+="<ul>\n".concat(n.items.filter((e=>e.trim())).map((e=>"<li>".concat(e,"</li>"))).join("\n"),"\n</ul>\n"))}return e})(),i={title:o.title,subtitle:o.subtitle,excerpt:o.excerpt,content:a,status:m,categories:o.categories.split(",").map((e=>e.trim())).filter((e=>""!==e)),tags:o.tags.split(",").map((e=>e.trim())).filter((e=>""!==e)),featured_media:t,meta:{subtitle:o.subtitle}};console.log("Updating post with data:",i);const s=await im.updatePost(r.id,i);y("Post updated successfully!"),p(!1),setTimeout((()=>{e("/blog/".concat(s.slug||n))}),1500)}catch(a){p(!1),console.error("Error updating post:",a),v({general:a.message||"Failed to update post. Please try again."})}}else{const e=document.querySelector(".error-message");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}};return i?(0,ga.jsxs)("div",{className:"loading-container",children:[(0,ga.jsx)("div",{className:"loading-spinner"}),(0,ga.jsx)("p",{children:"Loading post for editing..."}),n&&(0,ga.jsxs)("p",{children:["Post slug: ",n]})]}):g.general&&!r?(0,ga.jsx)("div",{className:"blog-edit-container",children:(0,ga.jsxs)("div",{className:"error-container",children:[(0,ga.jsx)(Nm,{size:48,color:"#dc2626"}),(0,ga.jsx)("h2",{children:"Unable to Load Post"}),(0,ga.jsx)("p",{children:g.general}),(0,ga.jsxs)("div",{className:"error-actions",children:[(0,ga.jsx)("button",{onClick:()=>e("/blog"),className:"back-button",children:"\u2190 Back to Blog"}),(0,ga.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Retry"})]})]})}):(0,ga.jsxs)("div",{className:"blog-edit-container",children:[(0,ga.jsxs)("header",{className:"blog-edit-header",children:[(0,ga.jsxs)("h1",{children:[(0,ga.jsx)(Jm,{size:28}),"Edit Article"]}),(0,ga.jsx)("div",{className:"header-actions",children:(0,ga.jsxs)("button",{onClick:()=>e("/blog/".concat(n)),className:"cancel-button",children:[(0,ga.jsx)(zm,{size:20}),"Cancel"]})})]}),g.general&&(0,ga.jsx)("div",{className:"error-banner",children:g.general}),x&&(0,ga.jsx)("div",{className:"success-banner",children:x}),(0,ga.jsx)("form",{className:"blog-edit-form",onSubmit:M,children:(0,ga.jsxs)("div",{className:"form-layout",children:[(0,ga.jsxs)("div",{className:"main-form-content",children:[(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"title",children:"Title"}),(0,ga.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:_,placeholder:"Enter a compelling title",className:"form-input title-input ".concat(g.title?"error-field":"")}),g.title&&(0,ga.jsx)("span",{className:"error-message",children:g.title})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"subtitle",children:"Subtitle (optional)"}),(0,ga.jsx)("input",{type:"text",id:"subtitle",name:"subtitle",value:o.subtitle,onChange:_,placeholder:"A subtitle to complement your title",className:"form-input subtitle-input"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"excerpt",children:"Excerpt"}),(0,ga.jsx)("textarea",{id:"excerpt",name:"excerpt",value:o.excerpt,onChange:_,rows:"3",placeholder:"A brief summary to appear in previews",className:"form-input excerpt-input ".concat(g.excerpt?"error-field":"")}),g.excerpt&&(0,ga.jsx)("span",{className:"error-message",children:g.excerpt})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"image",children:"Featured Image"}),(null===r||void 0===r?void 0:r.image)&&(0,ga.jsxs)("div",{className:"current-featured-image",children:[(0,ga.jsx)("img",{src:r.image,alt:"Current featured"}),(0,ga.jsx)("p",{className:"image-note",children:"Current featured image - upload new to replace"})]}),(0,ga.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:e=>{l(c(c({},o),{},{image:e.target.files[0]}))},className:"form-input image-input"}),o.image&&(0,ga.jsx)("div",{className:"image-preview",children:(0,ga.jsx)("img",{src:URL.createObjectURL(o.image),alt:"New featured preview"})})]}),(0,ga.jsxs)("div",{className:"form-group content-builder",children:[(0,ga.jsx)("label",{children:"Content"}),g.content&&(0,ga.jsx)("span",{className:"error-message",children:g.content}),(0,ga.jsx)("div",{className:"content-sections",children:u.map(((e,t)=>((e,t)=>{switch(e.type){case"heading":return(0,ga.jsxs)("div",{className:"content-section heading-section",children:[(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsxs)("div",{className:"section-type",children:[(0,ga.jsx)(Km,{size:20}),(0,ga.jsx)("span",{children:"Heading"})]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>E(t),className:"remove-btn",children:[(0,ga.jsx)(xm,{size:16}),"Remove"]})]}),(0,ga.jsx)("input",{type:"text",value:e.content,onChange:e=>w(t,e.target.value),placeholder:"Section Heading",className:"section-input heading-input"})]},t);case"subheading":return(0,ga.jsxs)("div",{className:"content-section subheading-section",children:[(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsxs)("div",{className:"section-type",children:[(0,ga.jsx)(km,{size:20}),(0,ga.jsx)("span",{children:"Subheading"})]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>E(t),className:"remove-btn",children:[(0,ga.jsx)(xm,{size:16}),"Remove"]})]}),(0,ga.jsx)("input",{type:"text",value:e.content,onChange:e=>w(t,e.target.value),placeholder:"Subsection Heading",className:"section-input subheading-input"})]},t);case"image":return(0,ga.jsxs)("div",{className:"content-section image-section",children:[(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsxs)("div",{className:"section-type",children:[(0,ga.jsx)(Lm,{size:20}),(0,ga.jsx)("span",{children:"Image"})]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>E(t),className:"remove-btn",children:[(0,ga.jsx)(xm,{size:16}),"Remove"]})]}),e.url&&!e.file&&(0,ga.jsxs)("div",{className:"existing-image",children:[(0,ga.jsx)("img",{src:e.url,alt:"Existing",className:"existing-image-preview"}),(0,ga.jsx)("p",{className:"image-note",children:"Current image - upload new to replace"})]}),(0,ga.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const n=[...u];n[t].file=e.target.files[0],d(n)},className:"section-input image-file-input"}),(0,ga.jsx)("input",{type:"text",value:e.caption||"",onChange:e=>{const n=[...u];n[t].caption=e.target.value,d(n)},placeholder:"Image Caption (optional)",className:"section-input image-caption-input"}),e.file&&(0,ga.jsx)("div",{className:"image-preview",children:(0,ga.jsx)("img",{src:URL.createObjectURL(e.file),alt:"Preview"})})]},t);case"quote":return(0,ga.jsxs)("div",{className:"content-section quote-section",children:[(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsxs)("div",{className:"section-type",children:[(0,ga.jsx)(jm,{size:20}),(0,ga.jsx)("span",{children:"Quote"})]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>E(t),className:"remove-btn",children:[(0,ga.jsx)(xm,{size:16}),"Remove"]})]}),(0,ga.jsx)("textarea",{value:e.content,onChange:e=>w(t,e.target.value),placeholder:"Quote text",className:"section-input quote-input",rows:"3"}),(0,ga.jsx)("input",{type:"text",value:e.attribution||"",onChange:e=>{const n=[...u];n[t].attribution=e.target.value,d(n)},placeholder:"Attribution (optional)",className:"section-input quote-attribution-input"})]},t);case"list":return(0,ga.jsxs)("div",{className:"content-section list-section",children:[(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsxs)("div",{className:"section-type",children:[(0,ga.jsx)(Dm,{size:20}),(0,ga.jsx)("span",{children:"List"})]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>E(t),className:"remove-btn",children:[(0,ga.jsx)(xm,{size:16}),"Remove"]})]}),e.items.map(((e,n)=>(0,ga.jsxs)("div",{className:"list-item-container",children:[(0,ga.jsx)("input",{type:"text",value:e,onChange:e=>{const r=[...u];r[t].items[n]=e.target.value,d(r)},placeholder:"List item ".concat(n+1),className:"section-input list-item-input"}),(0,ga.jsx)("button",{type:"button",onClick:()=>{const e=[...u];e[t].items=e[t].items.filter(((e,t)=>t!==n)),d(e)},className:"remove-list-item",children:(0,ga.jsx)(zm,{size:16})})]},n))),(0,ga.jsxs)("button",{type:"button",onClick:()=>{const e=[...u];e[t].items.push(""),d(e)},className:"add-list-item",children:[(0,ga.jsx)(Bm,{size:16}),"Add List Item"]})]},t);default:return(0,ga.jsxs)("div",{className:"content-section paragraph-section",children:[(0,ga.jsxs)("div",{className:"section-controls",children:[(0,ga.jsxs)("div",{className:"section-type",children:[(0,ga.jsx)(km,{size:20}),(0,ga.jsx)("span",{children:"Paragraph"})]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>E(t),className:"remove-btn",children:[(0,ga.jsx)(xm,{size:16}),"Remove"]})]}),(0,ga.jsx)("textarea",{value:e.content,onChange:e=>w(t,e.target.value),placeholder:"Paragraph text",className:"section-input paragraph-input",rows:"5"})]},t)}})(e,t)))}),(0,ga.jsxs)("div",{className:"add-section-controls",children:[(0,ga.jsxs)("button",{type:"button",onClick:()=>S("paragraph"),className:"add-section-btn",children:[(0,ga.jsx)(km,{size:16}),"Add Paragraph"]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>S("heading"),className:"add-section-btn",children:[(0,ga.jsx)(Km,{size:16}),"Add Heading"]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>S("subheading"),className:"add-section-btn",children:[(0,ga.jsx)(km,{size:16}),"Add Subheading"]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>S("image"),className:"add-section-btn",children:[(0,ga.jsx)(Lm,{size:16}),"Add Image"]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>S("quote"),className:"add-section-btn",children:[(0,ga.jsx)(jm,{size:16}),"Add Quote"]}),(0,ga.jsxs)("button",{type:"button",onClick:()=>S("list"),className:"add-section-btn",children:[(0,ga.jsx)(Dm,{size:16}),"Add List"]})]})]})]}),(0,ga.jsxs)("div",{className:"side-form-content",children:[(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsx)("h3",{children:"Publishing"}),(0,ga.jsxs)("div",{className:"publishing-actions",children:[(0,ga.jsxs)("button",{type:"submit",className:"publish-button",onClick:()=>f("publish"),disabled:h,children:[h&&"publish"===m?(0,ga.jsx)("div",{className:"spinner"}):(0,ga.jsx)(qm,{size:16}),h&&"publish"===m?"Updating...":"Update Article"]}),(0,ga.jsxs)("button",{type:"button",className:"save-draft-button",onClick:e=>{e.preventDefault(),f("draft"),M(e)},disabled:h,children:[h&&"draft"===m?(0,ga.jsx)("div",{className:"spinner"}):(0,ga.jsx)(qm,{size:16}),h&&"draft"===m?"Saving...":"Save as Draft"]})]})]}),(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsx)("h3",{children:"Categories & Tags"}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"categories",children:"Categories"}),(0,ga.jsx)("input",{type:"text",id:"categories",name:"categories",value:o.categories,onChange:_,placeholder:"Technology, Design, Business (comma-separated)",className:"form-input"})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"tags",children:"Tags"}),(0,ga.jsx)("input",{type:"text",id:"tags",name:"tags",value:o.tags,onChange:_,placeholder:"web-development, react, javascript (comma-separated)",className:"form-input"})]})]}),(0,ga.jsxs)("div",{className:"form-section",children:[(0,ga.jsx)("h3",{children:"Author Information"}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorName",children:"Name"}),(0,ga.jsx)("input",{type:"text",id:"authorName",name:"authorName",value:o.authorName,onChange:_,className:"form-input ".concat(g.authorName?"error-field":"")}),g.authorName&&(0,ga.jsx)("span",{className:"error-message",children:g.authorName})]}),(0,ga.jsxs)("div",{className:"form-group",children:[(0,ga.jsx)("label",{htmlFor:"authorBio",children:"Short Bio"}),(0,ga.jsx)("textarea",{id:"authorBio",name:"authorBio",value:o.authorBio,onChange:_,rows:"3",placeholder:"A brief author bio",className:"form-input"})]})]})]})]})})]})};const $m=new class{constructor(){this.baseURL=Kr.API_URL,this.api=Xr.create({baseURL:this.baseURL,timeout:Kr.TIMEOUT,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use((async e=>{const t=await Jr.getValidToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.api.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&Jr.logout(),Promise.reject(e)}))}async createUser(e){try{if(!this.canManageUsers())throw new Error("You don't have permission to create users");const n=this.validateUserData(e);if(!n.isValid)throw new Error(Object.values(n.errors).join("; "));const r={username:e.username,email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,roles:[e.role||"author"],meta:{first_name:e.firstName,last_name:e.lastName,description:e.bio||""}},a=await this.api.post("/users",r),i=this.formatUser(a.data);if(["author","editor","administrator"].includes(e.role))try{const e=await this.generateApplicationPassword(i.id,"Blog Management App");i.applicationPassword=e}catch(t){console.warn("Could not generate application password:",t.message)}if(e.sendEmail)try{await this.sendWelcomeEmail(i)}catch(t){console.warn("Could not send welcome email:",t.message)}return i}catch(t){throw console.error("Error creating user:",t),this._handleError(t)}}async registerUser(e){try{const n=this.validateUserData(e);if(!n.isValid)throw new Error(Object.values(n.errors).join("; "));const r=["subscriber","author"].includes(e.role)?e.role:"subscriber",a={username:e.username,email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,roles:[r],meta:{first_name:e.firstName,last_name:e.lastName,description:e.bio||""}},i=await Xr.post("".concat(this.baseURL,"/custom/register"),a),s=this.formatUser(i.data);if(e.sendEmail)try{await this.sendWelcomeEmail(s)}catch(t){console.warn("Could not send welcome email:",t.message)}return s}catch(t){throw console.error("Error registering user:",t),this._handleError(t)}}async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=c({per_page:100,page:1,context:"edit"},e),r=(await this.api.get("/users",{params:n})).data.map((e=>this.formatUser(e)));for(const e of r)try{const t=await this.api.get("/posts",{params:{author:e.id,per_page:1}});e.postsCount=parseInt(t.headers["x-wp-total"])||0}catch(t){e.postsCount=0}return r}catch(t){throw console.error("Error fetching users:",t),this._handleError(t)}}async getUser(e){try{const t=await this.api.get("/users/".concat(e),{params:{context:"edit"}});return this.formatUser(t.data)}catch(t){throw console.error("Error fetching user:",t),this._handleError(t)}}async updateUser(e,t){try{if(!this.canManageUsers()&&!this.isAuthorizedUser(e))throw new Error("You don't have permission to update this user");const n={first_name:t.firstName,last_name:t.lastName,email:t.email||void 0,roles:t.role?[t.role]:void 0,meta:{first_name:t.firstName,last_name:t.lastName,description:t.bio||""}};t.password&&(n.password=t.password);const r=await this.api.put("/users/".concat(e),n);return this.formatUser(r.data)}catch(n){throw console.error("Error updating user:",n),this._handleError(n)}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!this.canManageUsers())throw new Error("You don't have permission to delete users");if(this.isAuthorizedUser(e))throw new Error("You cannot delete your own account");const n={force:!0};return t&&(n.reassign=t),await this.api.delete("/users/".concat(e),{params:n}),!0}catch(n){throw console.error("Error deleting user:",n),this._handleError(n)}}async updateUserRole(e,t){try{if(!this.canManageUsers())throw new Error("You don't have permission to change user roles");const n=await this.api.put("/users/".concat(e),{roles:[t]});return this.formatUser(n.data)}catch(n){throw console.error("Error updating user role:",n),this._handleError(n)}}async generateApplicationPassword(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"API Access";try{return(await this.api.post("/users/".concat(e,"/application-passwords"),{name:t})).data.password}catch(n){throw console.error("Error generating application password:",n),new Error("Could not generate application password.")}}async sendWelcomeEmail(e){try{return console.log("Welcome email sent to ".concat(e.email)),!0}catch(t){throw console.error("Error sending welcome email:",t),t}}async getUserStats(){try{const e=await this.getUsers(),t={total:e.length,byRole:{},recent:e.filter((e=>new Date(e.createdAt)>new Date(Date.now()-6048e5))).length,active:e.filter((e=>"active"===e.status)).length};return e.forEach((e=>{t.byRole[e.role]=(t.byRole[e.role]||0)+1})),t}catch(e){throw console.error("Error fetching user stats:",e),this._handleError(e)}}async searchUsers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=c({search:e,per_page:50,context:"edit"},t);return(await this.api.get("/users",{params:n})).data.map((e=>this.formatUser(e)))}catch(n){throw console.error("Error searching users:",n),this._handleError(n)}}canManageUsers(){var e;const t=Jr.getCurrentUser();if(!t)return!1;const n=["administrator","editor"];return(null===(e=t.roles)||void 0===e?void 0:e.some((e=>n.includes(e))))||Object.keys(t.capabilities||{}).includes("edit_users")||Object.keys(t.capabilities||{}).includes("create_users")}isAuthorizedUser(e){const t=Jr.getCurrentUser();return t&&t.id===e}formatUser(e){var t,n,r,a,i,s,o;return{id:e.id,username:e.username||e.slug,email:e.email,firstName:e.first_name||(null===(t=e.meta)||void 0===t?void 0:t.first_name)||"",lastName:e.last_name||(null===(n=e.meta)||void 0===n?void 0:n.last_name)||"",displayName:e.name,role:Array.isArray(e.roles)?e.roles[0]:e.roles,roles:e.roles||[],capabilities:e.capabilities||{},status:(null===(r=e.meta)||void 0===r||r.wp_user_level,"active"),bio:e.description||(null===(a=e.meta)||void 0===a?void 0:a.description)||"",avatar:(null===(i=e.avatar_urls)||void 0===i?void 0:i[96])||(null===(s=e.avatar_urls)||void 0===s?void 0:s[48])||Kr.DEFAULT_AVATAR||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name||e.username),"&background=667eea&color=fff&size=96"),createdAt:e.registered_date||(new Date).toISOString(),lastLogin:(null===(o=e.meta)||void 0===o?void 0:o.last_login)||null,postsCount:0,link:e.link,meta:e.meta||{}}}validateUserData(e){var t,n;const r={};!e.username||e.username.length<3?r.username="Username must be at least 3 characters":/^[a-zA-Z0-9_-]+$/.test(e.username)||(r.username="Username can only contain letters, numbers, hyphens, and underscores"),e.email?/\S+@\S+\.\S+/.test(e.email)||(r.email="Email is invalid"):r.email="Email is required",e.password&&e.password.length<8&&(r.password="Password must be at least 8 characters"),null!==(t=e.firstName)&&void 0!==t&&t.trim()||(r.firstName="First name is required"),null!==(n=e.lastName)&&void 0!==n&&n.trim()||(r.lastName="Last name is required");return["subscriber","contributor","author","editor","administrator"].includes(e.role)||(r.role="Invalid user role"),{isValid:0===Object.keys(r).length,errors:r}}_handleError(e){let t="An unknown error occurred";if(e.response){const n=e.response.data;t=401===e.response.status?"Authentication required. Please log in.":403===e.response.status?"You don't have permission to perform this action.":404===e.response.status?"User not found.":409===e.response.status?"Username or email already exists.":n.message?n.message:n.code?"WordPress Error: ".concat(n.code):"Server error: ".concat(e.response.status)}else t=e.request?"No response from WordPress API. Please check your connection.":e.message;return new Error(t)}getAvailableRoles(){return[{value:"subscriber",label:"Subscriber",description:"Can only manage profile and read content",capabilities:["read"]},{value:"contributor",label:"Contributor",description:"Can write posts but cannot publish them",capabilities:["read","edit_posts","delete_posts"]},{value:"author",label:"Author",description:"Can publish and manage own posts",capabilities:["read","edit_posts","publish_posts","delete_posts","upload_files"]},{value:"editor",label:"Editor",description:"Can manage all posts and pages",capabilities:["read","edit_posts","publish_posts","delete_posts","edit_others_posts","delete_others_posts","edit_pages","publish_pages","delete_pages","upload_files"]},{value:"administrator",label:"Administrator",description:"Full access to everything",capabilities:["all"]}]}},Qm=gm("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ef=gm("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),tf=gm("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),nf=()=>{const[e,n]=(0,t.useState)(!1),[r,a]=(0,t.useState)({username:"",password:"",email:"",firstName:"",lastName:"",role:"author",sendEmail:!0}),[i,s]=(0,t.useState)({}),[o,l]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),h=pe(),p=e=>{const{name:t,value:n,type:r,checked:i}=e.target,o="checkbox"===r?i:n;a((e=>c(c({},e),{},{[t]:o}))),s((e=>c(c({},e),{},{[t]:""}))),d("")};return(0,ga.jsx)("div",{className:"login-container",children:(0,ga.jsxs)("div",{className:"form-card",children:[(0,ga.jsx)("h2",{className:"form-heading",children:e?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(Vm,{size:24}),"Create WordPress Account"]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(Qm,{size:24}),"Login to WordPress"]})}),i.general&&(0,ga.jsxs)("div",{className:"error-message",children:[(0,ga.jsx)(Nm,{size:20}),(0,ga.jsx)("p",{children:i.general})]}),u&&(0,ga.jsxs)("div",{className:"success-message",children:[(0,ga.jsx)(ef,{size:20}),(0,ga.jsx)("p",{children:u})]}),(0,ga.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return r.username.trim()?r.username.length<3?t.username="Username must be at least 3 characters":/^[a-zA-Z0-9_-]+$/.test(r.username)||(t.username="Username can only contain letters, numbers, hyphens, and underscores"):t.username="Username is required",r.password?r.password.length<8&&(t.password="Password must be at least 8 characters"):t.password="Password is required",e&&(r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(t.email="Email is invalid"):t.email="Email is required",r.firstName.trim()||(t.firstName="First name is required"),r.lastName.trim()||(t.lastName="Last name is required")),s(t),0===Object.keys(t).length})()){l(!0),s({}),d("");try{if(e){const e={username:r.username,email:r.email,firstName:r.firstName,lastName:r.lastName,password:r.password,role:r.role,sendEmail:r.sendEmail},t=await $m.createUser(e);d("User ".concat(t.username," created successfully! You can now log in.")),n(!1),a({username:"",password:"",email:"",firstName:"",lastName:"",role:"author",sendEmail:!0})}else{const e=await Jr.login(r.username,r.password);e.success?h("/blog/create"):s({general:e.message||"Login failed"})}}catch(i){s({general:i.message||(e?"User creation failed":"Login failed")})}finally{l(!1)}}},className:"form",children:[(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username *"}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)(Vm,{className:"input-icon",size:20}),(0,ga.jsx)("input",{type:"text",id:"username",name:"username",value:r.username,onChange:p,disabled:o,className:"form-input ".concat(i.username?"form-input-error":""),placeholder:"Enter username",required:!0})]}),i.username&&(0,ga.jsx)("p",{className:"error-text",children:i.username})]}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)("label",{htmlFor:"password",className:"form-label",children:e?"Password *":"Application Password *"}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)(Qm,{className:"input-icon",size:20}),(0,ga.jsx)("input",{type:"password",id:"password",name:"password",value:r.password,onChange:p,disabled:o,className:"form-input ".concat(i.password?"form-input-error":""),placeholder:e?"Enter password":"xxxx xxxx xxxx xxxx",required:!0})]}),i.password&&(0,ga.jsx)("p",{className:"error-text",children:i.password}),!e&&(0,ga.jsx)("p",{className:"helper-text",children:"Use an Application Password from WordPress Admin \u2192 Users \u2192 Your Profile"})]}),e&&(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address *"}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)(tf,{className:"input-icon",size:20}),(0,ga.jsx)("input",{type:"email",id:"email",name:"email",value:r.email,onChange:p,disabled:o,className:"form-input ".concat(i.email?"form-input-error":""),placeholder:"Enter email",required:!0})]}),i.email&&(0,ga.jsx)("p",{className:"error-text",children:i.email})]}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name *"}),(0,ga.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:p,disabled:o,className:"form-input ".concat(i.firstName?"form-input-error":""),placeholder:"Enter first name",required:!0}),i.firstName&&(0,ga.jsx)("p",{className:"error-text",children:i.firstName})]}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name *"}),(0,ga.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:p,disabled:o,className:"form-input ".concat(i.lastName?"form-input-error":""),placeholder:"Enter last name",required:!0}),i.lastName&&(0,ga.jsx)("p",{className:"error-text",children:i.lastName})]}),(0,ga.jsxs)("div",{className:"input-group",children:[(0,ga.jsx)("label",{htmlFor:"role",className:"form-label",children:"User Role *"}),(0,ga.jsx)("select",{id:"role",name:"role",value:r.role,onChange:p,disabled:o,className:"dropdown-select",children:$m.getAvailableRoles().map((e=>(0,ga.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value)))})]}),(0,ga.jsxs)("div",{className:"checkbox-group",children:[(0,ga.jsx)("div",{className:"custom-checkbox",children:(0,ga.jsx)("input",{type:"checkbox",id:"sendEmail",name:"sendEmail",checked:r.sendEmail,onChange:p,disabled:o})}),(0,ga.jsx)("label",{htmlFor:"sendEmail",className:"checkbox-label",children:"Send login credentials via email"})]})]}),(0,ga.jsx)("button",{type:"submit",disabled:o,className:"submit-button",children:o?(0,ga.jsx)("div",{className:"spinner"}):e?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(Vm,{size:20}),"Create Account"]}):(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)(Qm,{size:20}),"Login"]})})]}),(0,ga.jsx)("div",{className:"toggle-mode",children:(0,ga.jsx)("button",{onClick:()=>{n(!e),s({}),d(""),a({username:"",password:"",email:"",firstName:"",lastName:"",role:"author",sendEmail:!0})},className:"toggle-mode-btn",disabled:o,children:e?"Already have an account? Login":"Don't have an account? Create one"})})]})})};const rf=n.p+"static/media/notfound.59901da05d672bd51b3b4d36cc633292.svg",af=()=>(0,ga.jsx)("div",{className:"auth-page",children:(0,ga.jsxs)("div",{className:"auth-container",children:[(0,ga.jsx)("div",{className:"notfound-image",children:(0,ga.jsx)("img",{src:rf,alt:"Page not found illustration"})}),(0,ga.jsxs)("div",{className:"notfound-links",children:[(0,ga.jsx)(ft,{to:"/",className:"btn btn-primary",children:"Go Home"}),(0,ga.jsx)(ft,{to:"/documentation",className:"btn btn-secondary",children:"View Documentation"})]})]})}),sf=()=>{const e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{if(!e.current)return;console.log("NeuralGobal: Starting initialization");const t=e.current,r=t.clientWidth||500,a=t.clientHeight||600;console.log("Container dimensions:",r,"x",a);const i=new Kc;i.background=new $l(657941);const s=new Bc(75,r/a,.1,1e3);s.position.set(0,0,3);const o=new Xp({antialias:!0,alpha:!1});o.setSize(r,a),o.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.appendChild(o.domElement),console.log("Canvas added to container");const l=new Mu(1,32,32),c=new nc({color:43775,wireframe:!0,transparent:!0,opacity:.3}),u=new Cc(l,c);i.add(u);const d=200,h=new Float32Array(600),p=new Float32Array(600);for(let e=0;e<d;e++){const t=Math.acos(2*e/d-1),n=Math.sqrt(d*Math.PI)*t,r=.9+.3*Math.random();h[3*e]=r*Math.sin(t)*Math.cos(n),h[3*e+1]=r*Math.sin(t)*Math.sin(n),h[3*e+2]=r*Math.cos(t),p[3*e]=.1+.3*Math.random(),p[3*e+1]=.5+.5*Math.random(),p[3*e+2]=1}const m=new vc;m.setAttribute("position",new sc(h,3)),m.setAttribute("color",new sc(p,3));const f=new gu({size:.05,vertexColors:!0,transparent:!0,opacity:.8,blending:2}),g=new _u(m,f);i.add(g);const v=new vc,x=[],y=[];for(let e=0;e<d;e++)for(let t=e+1;t<d;t++){const n=Math.sqrt(Math.pow(h[3*e]-h[3*t],2)+Math.pow(h[3*e+1]-h[3*t+1],2)+Math.pow(h[3*e+2]-h[3*t+2],2));if(n<.5){x.push(h[3*e],h[3*e+1],h[3*e+2],h[3*t],h[3*t+1],h[3*t+2]);const r=1-n/.5;y.push(.2*r,.6*r,1*r,.2*r,.6*r,1*r)}}let b=null;if(x.length>0){v.setAttribute("position",new cc(x,3)),v.setAttribute("color",new cc(y,3));const e=new ru({vertexColors:!0,transparent:!0,opacity:.4,blending:2});b=new fu(v,e),i.add(b)}const _=new nd(4210752,.4);i.add(_);const w=new ed(43775,1,100);w.position.set(2,2,2),i.add(w);const S=[];for(let e=0;e<8;e++){const e=new Mu(.02,8,8),t=new nc({color:65535,transparent:!0,opacity:.8}),n=new Cc(e,t),r=Math.random()*Math.PI*2,a=Math.random()*Math.PI;n.position.x=1.1*Math.sin(a)*Math.cos(r),n.position.y=1.1*Math.sin(a)*Math.sin(r),n.position.z=1.1*Math.cos(a),n.userData={originalPos:n.position.clone(),speed:.5+.5*Math.random(),phase:Math.random()*Math.PI*2},S.push(n),i.add(n)}console.log("Scene objects created, starting animation");const E=e=>{try{u.rotation.y=3e-4*e,g.rotation.y=3e-4*e,b&&(b.rotation.y=3e-4*e);const t=g.geometry.attributes.color.array;for(let n=0;n<d;n++){const r=.3*Math.sin(.002*e+.1*n)+.7;t[3*n+1]=(.5+.5*Math.random())*r}if(g.geometry.attributes.color.needsUpdate=!0,S.forEach(((t,n)=>{const{originalPos:r,speed:a,phase:i}=t.userData,s=.1*Math.sin(.001*e*a+i);t.position.copy(r).multiplyScalar(1+s),t.material.opacity=.5+.3*Math.sin(.003*e+n)})),b){const t=b.geometry.attributes.color.array;for(let n=0;n<t.length;n+=6){const r=.2*Math.sin(.001*e+.01*n)+.3;t[n+1]=.6*r,t[n+4]=.6*r}b.geometry.attributes.color.needsUpdate=!0}o.render(i,s),n.current=requestAnimationFrame(E)}catch(t){console.error("Animation error:",t)}},M=()=>{if(!t)return;const e=t.clientWidth||500,n=t.clientHeight||600;s.aspect=e/n,s.updateProjectionMatrix(),o.setSize(e,n)};return window.addEventListener("resize",M),E(0),console.log("Animation started"),()=>{console.log("Cleaning up NeuralGobal"),window.removeEventListener("resize",M),n.current&&cancelAnimationFrame(n.current),i.traverse((e=>{e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach((e=>e.dispose())):e.material.dispose())})),o.dispose(),t&&o.domElement&&t.contains(o.domElement)&&t.removeChild(o.domElement)}}),[]),(0,ga.jsxs)("div",{style:{width:"100%",height:"100%",minHeight:"100vh",margin:0,padding:0,overflow:"hidden",position:"relative",background:"linear-gradient(135deg, #0a0a15 0%, #1a1a2e 50%, #16213e 100%)",boxSizing:"border-box"},children:[(0,ga.jsx)("div",{ref:e,style:{width:"100%",height:"100%",minHeight:"100vh",margin:0,padding:0,cursor:"grab",boxSizing:"border-box"}}),(0,ga.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",background:"linear-gradient(0deg, transparent 0%, rgba(0, 170, 255, 0.03) 50%, transparent 100%)",animation:"pulse 4s ease-in-out infinite"}})]})},of=()=>(0,ga.jsx)("div",{className:"auth-svg-left",style:{flex:"1",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 0 0 0",margin:2,overflow:"hidden",position:"relative",boxSizing:"border-box",borderRadius:"24px"},children:(0,ga.jsx)("div",{style:{background:"black",width:"100%",height:"100%",minHeight:"100vh",padding:0,margin:0,overflow:"hidden"},children:(0,ga.jsx)(sf,{})})}),lf=e=>{let{children:t}=e;return(0,ga.jsx)("div",{className:"auth-container medium-card auth-right-section",children:t})},cf=()=>{const[e,n]=(0,t.useState)({email:"",password:"",rememberMe:!1}),[r,a]=(0,t.useState)({}),[i,s]=(0,t.useState)(!1),o=pe(),l=t=>{const{name:i,value:s,type:o,checked:l}=t.target;n(c(c({},e),{},{[i]:"checkbox"===o?l:s})),r[i]&&a(c(c({},r),{},{[i]:""}))};return(0,ga.jsxs)("div",{className:"auth-page medium-bg",children:[(0,ga.jsx)(of,{}),(0,ga.jsxs)(lf,{children:[(0,ga.jsxs)("div",{className:"auth-header medium-header",children:[(0,ga.jsx)("h1",{className:"medium-title",children:"Sign in to your account"}),(0,ga.jsx)("p",{className:"auth-subtitle medium-subtitle",children:"Welcome back! Enter your email and password to continue."})]}),r.general&&(0,ga.jsx)("div",{className:"auth-error-message",style:{textAlign:"left"},children:r.general}),(0,ga.jsxs)("form",{className:"auth-form",onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email address is invalid"):t.email="Email is required",e.password||(t.password="Password is required"),a(t),0===Object.keys(t).length})()){s(!0),a({});try{const t=await fa.loginWithStorage({email:e.email,password:e.password,rememberMe:e.rememberMe});t.success?o("/"):a({general:t.message||"Login failed. Please check your credentials and try again."})}catch(n){console.error("Login error:",n),a({general:"Login failed. Please check your credentials and try again."})}finally{s(!1)}}},autoComplete:"off",children:[(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"email",className:"medium-label",children:"Email Address"}),(0,ga.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:l,placeholder:"Enter your email",className:"medium-input".concat(r.email?" error":""),disabled:i,autoComplete:"email"}),r.email&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.email})]}),(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"password",className:"medium-label",children:"Password"}),(0,ga.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:l,placeholder:"Enter your password",className:"medium-input".concat(r.password?" error":""),disabled:i,autoComplete:"current-password"}),r.password&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.password})]}),(0,ga.jsxs)("div",{className:"auth-options",style:{marginBottom:24},children:[(0,ga.jsxs)("div",{className:"remember-me",children:[(0,ga.jsx)("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:e.rememberMe,onChange:l,disabled:i}),(0,ga.jsx)("label",{htmlFor:"rememberMe",children:"Remember me"})]}),(0,ga.jsx)("button",{type:"button",onClick:async()=>{if(e.email&&!r.email){s(!0);try{const t=await fa.forgotPassword(e.email);t.success?(a({}),alert("If an account exists for ".concat(e.email,", a reset link has been sent."))):a((e=>c(c({},e),{},{general:t.message||"Failed to send reset link. Please try again later."})))}catch(t){console.error("Forgot password error:",t),a((e=>c(c({},e),{},{general:"Failed to send reset link. Please try again later."})))}finally{s(!1)}}else a((e=>c(c({},e),{},{general:"Please enter a valid email address above to reset your password."})))},className:"forgot-password medium-link",style:{background:"none",border:"none",color:"#3366cc",fontWeight:600,fontSize:14,cursor:"pointer",textDecoration:"underline"},disabled:i,children:"Forgot password?"})]}),(0,ga.jsx)("button",{type:"submit",className:"auth-button medium-btn".concat(i?" loading":""),disabled:i,children:i?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("span",{className:"loader"})," Logging in..."]}):"Sign in"})]}),(0,ga.jsxs)("div",{className:"auth-footer medium-footer",children:[(0,ga.jsx)("span",{children:"Don't have an account? "}),(0,ga.jsx)(ft,{to:"/signup",className:"auth-link medium-link",children:"Sign up"})]})]})]})},uf=()=>{const[e,n]=(0,t.useState)({fullName:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),[r,a]=(0,t.useState)({}),[i,s]=(0,t.useState)(!1),o=pe(),l=t=>{const{name:i,value:s,type:o,checked:l}=t.target;n(c(c({},e),{},{[i]:"checkbox"===o?l:s})),r[i]&&a(c(c({},r),{},{[i]:""}))};return(0,ga.jsxs)("div",{className:"auth-page medium-bg",children:[(0,ga.jsx)(of,{}),(0,ga.jsx)(lf,{children:(0,ga.jsxs)("div",{children:[(0,ga.jsxs)("div",{className:"auth-header medium-header",children:[(0,ga.jsx)("h1",{className:"medium-title",children:"Create your account"}),(0,ga.jsx)("p",{className:"auth-subtitle medium-subtitle",children:"Join us and start generating professional AI-powered reports with ease."})]}),r.general&&(0,ga.jsx)("div",{className:"auth-error-message",style:{textAlign:"left"},children:r.general}),(0,ga.jsxs)("form",{className:"auth-form",onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return e.fullName.trim()||(t.fullName="Full name is required"),e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email address is invalid"):t.email="Email is required",e.password?e.password.length<8&&(t.password="Password must be at least 8 characters"):t.password="Password is required",e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword="Passwords do not match"):t.confirmPassword="Please confirm your password",e.agreeToTerms||(t.agreeToTerms="You must agree to the terms and conditions"),a(t),0===Object.keys(t).length})()){s(!0),a({});try{const t=await fa.signupWithStorage({fullName:e.fullName,email:e.email,password:e.password});t.success?o("/",{state:{message:"Registration successful! Welcome to Automate Reporting."}}):a({general:t.message||"Registration failed. Please try again later."})}catch(n){console.error("Signup error:",n),a({general:"Registration failed. Please try again later."})}finally{s(!1)}}},autoComplete:"off",children:[(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"fullName",className:"medium-label",children:"Full Name"}),(0,ga.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:l,placeholder:"Enter your full name",className:"medium-input".concat(r.fullName?" error":""),disabled:i,autoComplete:"name"}),r.fullName&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.fullName})]}),(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"email",className:"medium-label",children:"Email Address"}),(0,ga.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:l,placeholder:"Enter your email",className:"medium-input".concat(r.email?" error":""),disabled:i,autoComplete:"email"}),r.email&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.email})]}),(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"password",className:"medium-label",children:"Password"}),(0,ga.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:l,placeholder:"Create a password",className:"medium-input".concat(r.password?" error":""),disabled:i,autoComplete:"new-password"}),r.password&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.password})]}),(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"confirmPassword",className:"medium-label",children:"Confirm Password"}),(0,ga.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:l,placeholder:"Confirm your password",className:"medium-input".concat(r.confirmPassword?" error":""),disabled:i,autoComplete:"new-password"}),r.confirmPassword&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.confirmPassword})]}),(0,ga.jsxs)("div",{className:"terms-agreement",style:{marginBottom:24},children:[(0,ga.jsx)("input",{type:"checkbox",id:"agreeToTerms",name:"agreeToTerms",checked:e.agreeToTerms,onChange:l,disabled:i}),(0,ga.jsxs)("label",{htmlFor:"agreeToTerms",className:"medium-terms-label",children:["I agree to the"," ",(0,ga.jsx)(ft,{to:"/terms",className:"auth-link medium-link",children:"Terms of Service"})," ","and"," ",(0,ga.jsx)(ft,{to:"/privacy",className:"auth-link medium-link",children:"Privacy Policy"})]}),r.agreeToTerms&&(0,ga.jsx)("div",{className:"field-error medium-error",children:r.agreeToTerms})]}),(0,ga.jsx)("button",{type:"submit",className:"auth-button medium-btn".concat(i?" loading":""),disabled:i,children:i?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("span",{className:"loader"})," Creating account..."]}):"Sign up"})]}),(0,ga.jsxs)("div",{className:"auth-footer medium-footer",children:[(0,ga.jsx)("span",{children:"Already have an account? "}),(0,ga.jsx)(ft,{to:"/login",className:"auth-link medium-link",children:"Sign in"})]})]})})]})},df=()=>{const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(!1),[i,s]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1);return(0,ga.jsxs)("div",{className:"auth-page medium-bg",children:[(0,ga.jsx)(of,{}),(0,ga.jsxs)(lf,{children:[(0,ga.jsxs)("div",{className:"auth-header medium-header",children:[(0,ga.jsx)("h1",{className:"medium-title",children:"Reset your password"}),(0,ga.jsx)("p",{className:"auth-subtitle medium-subtitle",children:"Enter your email address and we'll send you a link to reset your password."})]}),r?(0,ga.jsxs)("div",{className:"auth-error-message medium-success",children:["If an account exists for ",(0,ga.jsx)("b",{children:e}),", a reset link has been sent."]}):(0,ga.jsxs)("form",{className:"auth-form",onSubmit:async t=>{if(t.preventDefault(),e&&/\S+@\S+\.\S+/.test(e)){l(!0),s("");try{const t=await fa.forgotPassword(e);t.success?(a(!0),s("")):s(t.message||"Failed to send reset link. Please try again later.")}catch(n){console.error("Reset password error:",n),s("Failed to send reset link. Please try again later.")}finally{l(!1)}}else s("Please enter a valid email address.")},autoComplete:"off",children:[(0,ga.jsxs)("div",{className:"form-group medium-form-group",children:[(0,ga.jsx)("label",{htmlFor:"resetEmail",className:"medium-label",children:"Email Address"}),(0,ga.jsx)("input",{type:"email",id:"resetEmail",name:"resetEmail",value:e,onChange:e=>{n(e.target.value),i&&s("")},placeholder:"Enter your email",className:"medium-input".concat(i?" error":""),disabled:o,autoComplete:"email"}),i&&(0,ga.jsx)("div",{className:"field-error medium-error",children:i})]}),(0,ga.jsx)("button",{type:"submit",className:"auth-button medium-btn".concat(o?" loading":""),disabled:o,children:o?(0,ga.jsxs)(ga.Fragment,{children:[(0,ga.jsx)("span",{className:"loader"})," Sending..."]}):"Send reset link"})]}),(0,ga.jsx)("div",{className:"auth-footer medium-footer",children:(0,ga.jsx)(ft,{to:"/login",className:"auth-link medium-link",children:"Back to sign in"})})]})]})},hf=()=>{const{fileId:e,filename:n}=me(),r=pe(),a=ue(),[i,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),p=(0,t.useRef)(null),m=(0,t.useRef)(null);(0,t.useEffect)((()=>{(async()=>{if(a.state&&a.state.dashboardContent)return u(a.state.dashboardContent),void s(!1);if(!e||!n)return l("Invalid dashboard parameters. Please generate a new dashboard."),void s(!1);try{const t=La.getViewUrl(e,n),r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch dashboard: ".concat(r.statusText));const a=await r.text();u(a),s(!1)}catch(t){console.error("Error fetching dashboard:",t),l("Failed to load the dashboard. The file may have expired or been moved."),s(!1)}})()}),[e,n,a.state]);const f=()=>{r(-1)};return(0,t.useEffect)((()=>{const e=()=>{h(document.fullscreenElement===m.current||document.webkitFullscreenElement===m.current||document.msFullscreenElement===m.current)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e)}}),[]),i?(0,ga.jsx)("div",{className:"dashboard-viewer-container",children:(0,ga.jsxs)("div",{className:"dashboard-loading-indicator",children:[(0,ga.jsx)("div",{className:"dashboard-spinner"}),(0,ga.jsx)("h2",{children:"Loading Interactive Dashboard"}),(0,ga.jsx)("p",{children:"Please wait while we prepare your attrition analysis dashboard..."})]})}):o?(0,ga.jsx)("div",{className:"dashboard-viewer-container",children:(0,ga.jsxs)("div",{className:"dashboard-error-message",children:[(0,ga.jsx)("div",{className:"error-icon",children:(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,ga.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,ga.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),(0,ga.jsx)("h2",{children:"Dashboard Not Available"}),(0,ga.jsx)("p",{children:o}),(0,ga.jsxs)("div",{className:"error-actions",children:[(0,ga.jsx)("button",{className:"dashboard-back-button",onClick:f,children:"\u2190 Go Back"}),(0,ga.jsx)("button",{className:"dashboard-retry-button",onClick:()=>window.location.reload(),children:"Try Again"})]})]})}):(0,ga.jsxs)("div",{className:"dashboard-viewer-container ".concat(d?"fullscreen":""),ref:m,children:[(0,ga.jsxs)("div",{className:"dashboard-viewer-header",children:[(0,ga.jsxs)("div",{className:"header-left",children:[(0,ga.jsx)("button",{className:"dashboard-back-button",onClick:f,children:"\u2190 Back"}),(0,ga.jsxs)("div",{className:"dashboard-info",children:[(0,ga.jsx)("h1",{children:"Interactive Attrition Dashboard"}),(0,ga.jsx)("span",{className:"dashboard-subtitle",children:"Use filters and controls to explore your data"})]})]}),(0,ga.jsxs)("div",{className:"header-actions",children:[(0,ga.jsx)("button",{className:"dashboard-action-btn refresh-btn",onClick:()=>{p.current&&p.current.contentWindow.location.reload()},title:"Refresh Dashboard",children:(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,ga.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,ga.jsx)("path",{d:"m3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),(0,ga.jsx)("button",{className:"dashboard-action-btn new-tab-btn",onClick:()=>{if(e&&n){const t=La.getViewUrl(e,n);window.open(t,"_blank")}},title:"Open in New Tab",children:(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,ga.jsx)("polyline",{points:"15,3 21,3 21,9"}),(0,ga.jsx)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}),(0,ga.jsx)("button",{className:"dashboard-action-btn fullscreen-btn",onClick:()=>{d?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():m.current.requestFullscreen?m.current.requestFullscreen():m.current.webkitRequestFullscreen?m.current.webkitRequestFullscreen():m.current.msRequestFullscreen&&m.current.msRequestFullscreen()},title:d?"Exit Fullscreen":"Enter Fullscreen",children:d?(0,ga.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,ga.jsx)("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):(0,ga.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,ga.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})}),e&&n&&(0,ga.jsx)("button",{className:"dashboard-action-btn download-btn",onClick:()=>{e&&n&&La.downloadReport(e,n)},title:"Download Dashboard",children:(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,ga.jsx)("polyline",{points:"7,10 12,15 17,10"}),(0,ga.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})]})]}),(0,ga.jsx)("div",{className:"dashboard-content",children:(0,ga.jsx)("iframe",{ref:p,title:"Interactive Attrition Dashboard",srcDoc:c,className:"dashboard-iframe",sandbox:"allow-scripts allow-same-origin allow-forms",loading:"lazy"})}),(0,ga.jsxs)("div",{className:"dashboard-status-bar",children:[(0,ga.jsxs)("div",{className:"status-left",children:[(0,ga.jsx)("span",{className:"status-indicator ready",children:"\u25cf"}),(0,ga.jsx)("span",{children:"Dashboard Ready"})]}),(0,ga.jsx)("div",{className:"status-right",children:(0,ga.jsx)("span",{children:"Interactive Mode \u2022 Filters Available \u2022 Responsive Design"})})]})]})};const pf=new class{constructor(){this.baseURL="https://mk9dhshvwr.us-east-1.awsapprunner.com/api/v1",this.api=Xr.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}}),console.log("PredictiveService initialized in ".concat("production"," mode with URL: ").concat(this.baseURL))}async generateReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=new FormData;n.append("file",e);return(await this.api.post("/generate-report/",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(t){const n=Math.round(100*e.loaded/e.total);t(n)}}})).data}catch(n){throw console.error("Error generating report:",n),this._handleError(n)}}getDownloadUrl(e){return"".concat(this.baseURL,"/download/").concat(e)}downloadReport(e){const t=this.getDownloadUrl(e);this._downloadFile(t,e)}getSupportedFormats(){return[".xlsx"]}validateFileFormat(e){const t=this.getSupportedFormats(),n="."+e.name.split(".").pop().toLowerCase();return t.includes(n)}getRequiredColumns(){return["Employee Name","Gender","Function","Job Location","Grade","Action Date","Date of Joining","Action Type"]}formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}_downloadFile(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}_handleError(e){let t="An unknown error occurred",n=null;if(e.response){var r,a;const i=(null===(r=e.response.data)||void 0===r?void 0:r.detail)||(null===(a=e.response.data)||void 0===a?void 0:a.message);switch(t=i||"Server error: ".concat(e.response.status),n=e.response.status,e.response.status){case 400:t=i||"Invalid request. Please check your file format.";break;case 404:t="Report not found. Please generate the report first.";break;case 413:t="File too large. Please upload a smaller file.";break;case 500:t="Server error. Please try again later.";break;case 503:t="Service temporarily unavailable. Please try again later."}}else e.request?(t="No response from server. Please check your connection and try again.",n="NETWORK_ERROR"):t=e.message;const i=new Error(t);return i.code=n,i.originalError=e,i}},mf=()=>{const e=ue(),[n,r]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),[s,o]=(0,t.useState)(0),[l,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[p,m]=(0,t.useState)([]),[f,g]=(0,t.useState)({isOnline:!0,message:"Predictive Analytics API connection established"}),[v,x]=(0,t.useState)(!1),y=(0,t.useRef)(null);(0,t.useEffect)((()=>{e.pathname.startsWith("/tool")?x(!0):x(!1)}),[e]);const b=async e=>{if(!f.isOnline)return void h("Cannot upload files while Predictive Analytics API is offline. Please try again later.");h(null),m([]);const t=ya(e);if(!t.isValid&&(m(t.errors),0===t.validFiles.length))return;const n=t.validFiles,a=n.map((e=>({name:e.name,size:e.size,type:e.type,formattedSize:ba(e.size),status:"pending"})));r((e=>[...e,...a])),i(!0),o(0);try{const e=(await pf.generateReport(n[0],o)).download_url.split("/").pop();u({name:e,size:"Unknown",date:(new Date).toLocaleDateString(),url:pf.getDownloadUrl(e),type:"word"}),r((e=>e.map(((t,r)=>r>=e.length-n.length?c(c({},t),{},{status:"processed"}):t))))}catch(s){console.error("Report generation error:",s),h(s.message||"Failed to generate report."),r((e=>e.map(((t,r)=>r>=e.length-n.length?c(c({},t),{},{status:"failed"}):t))))}finally{i(!1),o(100)}};return(0,ga.jsxs)("div",{className:"predictive-tool-container",children:[(0,ga.jsx)("h1",{children:"Predictive Attrition Analytics"}),(0,ga.jsx)("p",{children:"Upload your HRIS data to identify employees at high risk of attrition using machine learning predictions."}),!f.isOnline&&(0,ga.jsxs)("div",{className:"api-status-warning",children:[(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,ga.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,ga.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,ga.jsx)("span",{children:f.message})]}),(0,ga.jsxs)("div",{className:"platform-modules",children:[(0,ga.jsxs)("section",{className:"data-module",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Data Input \u2014 Predictive Analytics (DOCX Format)"}),(0,ga.jsx)("p",{className:"module-description",children:"Upload Excel file containing HRIS data for predictive attrition analysis"})]}),(0,ga.jsx)("div",{className:"file-input-section",children:(0,ga.jsxs)("div",{className:"file-dropzone",onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:e=>{var t;e.preventDefault(),e.currentTarget.classList.remove("drag-over"),null!==(t=e.dataTransfer.files)&&void 0!==t&&t.length&&b(e.dataTransfer.files)},onClick:()=>{var e;null===(e=y.current)||void 0===e||e.click()},children:[(0,ga.jsx)("div",{className:"dropzone-icon",children:(0,ga.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ga.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M12 16V8",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M9 11L12 8L15 11",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ga.jsx)("p",{className:"dropzone-text",children:"Drag & drop or click to select Excel file"}),(0,ga.jsx)("p",{className:"dropzone-subtext",children:"Excel format (.xlsx) required for predictive analysis"}),(0,ga.jsx)("input",{type:"file",className:"file-input",onChange:e=>{var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&b(e.target.files)},accept:".xlsx",disabled:a||!f.isOnline,ref:y})]})}),p.length>0&&(0,ga.jsxs)("div",{className:"validation-alert",children:[(0,ga.jsx)("div",{className:"alert-header",children:"File Validation Errors:"}),(0,ga.jsx)("ul",{className:"alert-list",children:p.map(((e,t)=>(0,ga.jsx)("li",{children:e},t)))})]}),d&&(0,ga.jsx)("div",{className:"system-alert",children:d}),n.length>0&&(0,ga.jsxs)("div",{className:"selected-files-panel",children:[(0,ga.jsx)("div",{className:"panel-header",children:"Selected Files"}),a&&(0,ga.jsxs)("div",{className:"upload-progress-indicator",children:[(0,ga.jsx)("div",{className:"progress-bar",children:(0,ga.jsx)("div",{className:"progress-completed",style:{width:"".concat(s,"%")}})}),(0,ga.jsxs)("div",{className:"progress-percentage",children:[s,"% Complete"]})]}),(0,ga.jsxs)("table",{className:"files-table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Filename"}),(0,ga.jsx)("th",{children:"Size"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Action"})]})}),(0,ga.jsx)("tbody",{children:n.map(((e,t)=>(0,ga.jsxs)("tr",{className:e.status,children:[(0,ga.jsx)("td",{className:"file-name",children:e.name}),(0,ga.jsx)("td",{className:"file-size",children:e.formattedSize}),(0,ga.jsx)("td",{className:"file-status",children:(0,ga.jsx)("span",{className:"status-".concat(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,ga.jsx)("td",{className:"file-action",children:(0,ga.jsx)("button",{className:"remove-file-btn",onClick:()=>(e=>{r((t=>t.filter(((t,n)=>n!==e)))),u(null)})(t),disabled:a,children:"Remove"})})]},t)))})]})]})]}),(0,ga.jsxs)("section",{className:"analysis-module",children:[(0,ga.jsxs)("div",{className:"module-header",children:[(0,ga.jsx)("h3",{children:"Predictive Analytics Controls"}),(0,ga.jsx)("p",{className:"module-description",children:"Generate predictive attrition reports using machine learning"})]}),(0,ga.jsxs)("div",{className:"control-panel",children:[(0,ga.jsx)("div",{className:"control-actions",children:(0,ga.jsx)("button",{className:"control-btn retrieve-btn ".concat(l?"":"disabled"),onClick:async()=>{if(l){h(null);try{pf.downloadReport(l.name)}catch(e){console.error("Report download error:",e),h(e.message||"Failed to download report.")}}else h("No report available to download.")},disabled:!l,children:"Download Report"})}),l&&(0,ga.jsxs)("div",{className:"analysis-complete",children:[(0,ga.jsx)("div",{className:"complete-header",children:"Predictive Analysis Summary"}),(0,ga.jsxs)("div",{className:"report-metadata",children:[(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Document:"}),(0,ga.jsx)("span",{className:"metadata-value",children:l.name})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Format:"}),(0,ga.jsx)("span",{className:"metadata-value",children:"Microsoft Word"})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Generated:"}),(0,ga.jsx)("span",{className:"metadata-value",children:l.date})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Status:"}),(0,ga.jsx)("span",{className:"metadata-value status-complete",children:"Complete"})]})]}),(0,ga.jsxs)("div",{className:"report-description",children:[(0,ga.jsx)("p",{children:"The predictive analysis has been completed successfully. The report includes:"}),(0,ga.jsxs)("ul",{children:[(0,ga.jsx)("li",{children:"Machine learning model performance metrics"}),(0,ga.jsx)("li",{children:"High-risk employees (probability > 70%)"}),(0,ga.jsx)("li",{children:"Risk analysis by gender, location, function, and grade"}),(0,ga.jsx)("li",{children:"Complete list of employees with attrition risk scores"})]})]})]})]})]}),v&&(0,ga.jsxs)("section",{className:"specifications-module",children:[(0,ga.jsx)("div",{className:"module-header",children:(0,ga.jsx)("h3",{children:"Predictive Analytics Specifications"})}),(0,ga.jsxs)("div",{className:"specifications-grid",children:[(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Machine Learning Model"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Random Forest Classifier with 100 estimators"}),(0,ga.jsx)("p",{children:"Features: Gender, Tenure, Function, Grade"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Risk Threshold"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"High-risk employees: Probability > 70%"}),(0,ga.jsx)("p",{children:"Sorted by descending attrition probability"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Output Analysis"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Demographic risk breakdowns"}),(0,ga.jsx)("p",{children:"Model performance metrics"})]})]}),(0,ga.jsxs)("div",{className:"specification-item",children:[(0,ga.jsx)("div",{className:"specification-title",children:"Data Requirements"}),(0,ga.jsxs)("div",{className:"specification-content",children:[(0,ga.jsx)("p",{children:"Employee Name, Gender, Function, Grade"}),(0,ga.jsx)("p",{children:"Date of Joining, Action Type, Action Date"})]})]})]})]})]})]})};var ff=n(173),gf=n.n(ff),vf=n(332),xf=n.n(vf),yf=n(366),bf=n.n(yf),_f=n(123),wf=n.n(_f),Sf="bodyAttributes",Ef="htmlAttributes",Mf="titleAttributes",Tf={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},Nf=(Object.keys(Tf).map((function(e){return Tf[e]})),"charset"),Af="cssText",Cf="href",Rf="http-equiv",Pf="innerHTML",kf="itemprop",Lf="name",jf="property",Df="rel",Uf="src",If="target",Of={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ff="defaultTitle",zf="defer",Bf="encodeSpecialCharacters",Hf="onChangeClientState",Vf="titleTemplate",Gf=Object.keys(Of).reduce((function(e,t){return e[Of[t]]=t,e}),{}),Wf=[Tf.NOSCRIPT,Tf.SCRIPT,Tf.STYLE],qf="data-react-helmet",Xf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jf=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Zf=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},$f=function(e){var t=rg(e,Tf.TITLE),n=rg(e,Vf);if(n&&t)return n.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var r=rg(e,Ff);return t||r||void 0},Qf=function(e){return rg(e,Hf)||function(){}},eg=function(e,t){return t.filter((function(t){return"undefined"!==typeof t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return Kf({},e,t)}),{})},tg=function(e,t){return t.filter((function(e){return"undefined"!==typeof e[Tf.BASE]})).map((function(e){return e[Tf.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),a=0;a<r.length;a++){var i=r[a].toLowerCase();if(-1!==e.indexOf(i)&&n[i])return t.concat(n)}return t}),[])},ng=function(e,t,n){var r={};return n.filter((function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&lg("Helmet: "+e+' should be of type "Array". Instead found type "'+Xf(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var a={};n.filter((function(e){for(var n=void 0,i=Object.keys(e),s=0;s<i.length;s++){var o=i[s],l=o.toLowerCase();-1===t.indexOf(l)||n===Df&&"canonical"===e[n].toLowerCase()||l===Df&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(o)||o!==Pf&&o!==Af&&o!==kf||(n=o)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),a[n]||(a[n]={}),!r[n][c]&&(a[n][c]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],l=wf()({},r[o],a[o]);r[o]=l}return e}),[]).reverse()},rg=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},ag=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout((function(){ag(t)}),0)}}(),ig=function(e){return clearTimeout(e)},sg="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||ag:n.g.requestAnimationFrame||ag,og="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||ig:n.g.cancelAnimationFrame||ig,lg=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},cg=null,ug=function(e,t){var n=e.baseTag,r=e.bodyAttributes,a=e.htmlAttributes,i=e.linkTags,s=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,h=e.titleAttributes;pg(Tf.BODY,r),pg(Tf.HTML,a),hg(d,h);var p={baseTag:mg(Tf.BASE,n),linkTags:mg(Tf.LINK,i),metaTags:mg(Tf.META,s),noscriptTags:mg(Tf.NOSCRIPT,o),scriptTags:mg(Tf.SCRIPT,c),styleTags:mg(Tf.STYLE,u)},m={},f={};Object.keys(p).forEach((function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(m[e]=n),r.length&&(f[e]=p[e].oldTags)})),t&&t(),l(e,m,f)},dg=function(e){return Array.isArray(e)?e.join(""):e},hg=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=dg(e)),pg(Tf.TITLE,t)},pg=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(qf),a=r?r.split(","):[],i=[].concat(a),s=Object.keys(t),o=0;o<s.length;o++){var l=s[o],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===a.indexOf(l)&&a.push(l);var u=i.indexOf(l);-1!==u&&i.splice(u,1)}for(var d=i.length-1;d>=0;d--)n.removeAttribute(i[d]);a.length===i.length?n.removeAttribute(qf):n.getAttribute(qf)!==s.join(",")&&n.setAttribute(qf,s.join(","))}},mg=function(e,t){var n=document.head||document.querySelector(Tf.HEAD),r=n.querySelectorAll(e+"["+qf+"]"),a=Array.prototype.slice.call(r),i=[],s=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===Pf)n.innerHTML=t.innerHTML;else if(r===Af)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var o="undefined"===typeof t[r]?"":t[r];n.setAttribute(r,o)}n.setAttribute(qf,"true"),a.some((function(e,t){return s=t,n.isEqualNode(e)}))?a.splice(s,1):i.push(n)})),a.forEach((function(e){return e.parentNode.removeChild(e)})),i.forEach((function(e){return n.appendChild(e)})),{oldTags:a,newTags:i}},fg=function(e){return Object.keys(e).reduce((function(t,n){var r="undefined"!==typeof e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},gg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[Of[n]||n]=e[n],t}),t)},vg=function(e,n,r){switch(e){case Tf.TITLE:return{toComponent:function(){return function(e,n,r){var a,i=((a={key:n})[qf]=!0,a),s=gg(r,i);return[t.createElement(Tf.TITLE,s,n)]}(0,n.title,n.titleAttributes)},toString:function(){return function(e,t,n,r){var a=fg(n),i=dg(t);return a?"<"+e+" "+qf+'="true" '+a+">"+Zf(i,r)+"</"+e+">":"<"+e+" "+qf+'="true">'+Zf(i,r)+"</"+e+">"}(e,n.title,n.titleAttributes,r)}};case Sf:case Ef:return{toComponent:function(){return gg(n)},toString:function(){return fg(n)}};default:return{toComponent:function(){return function(e,n){return n.map((function(n,r){var a,i=((a={key:r})[qf]=!0,a);return Object.keys(n).forEach((function(e){var t=Of[e]||e;if(t===Pf||t===Af){var r=n.innerHTML||n.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[t]=n[e]})),t.createElement(e,i)}))}(e,n)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var a=Object.keys(r).filter((function(e){return!(e===Pf||e===Af)})).reduce((function(e,t){var a="undefined"===typeof r[t]?t:t+'="'+Zf(r[t],n)+'"';return e?e+" "+a:a}),""),i=r.innerHTML||r.cssText||"",s=-1===Wf.indexOf(e);return t+"<"+e+" "+qf+'="true" '+a+(s?"/>":">"+i+"</"+e+">")}),"")}(e,n,r)}}}},xg=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,a=e.htmlAttributes,i=e.linkTags,s=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,h=e.titleAttributes;return{base:vg(Tf.BASE,t,r),bodyAttributes:vg(Sf,n,r),htmlAttributes:vg(Ef,a,r),link:vg(Tf.LINK,i,r),meta:vg(Tf.META,s,r),noscript:vg(Tf.NOSCRIPT,o,r),script:vg(Tf.SCRIPT,l,r),style:vg(Tf.STYLE,c,r),title:vg(Tf.TITLE,{title:d,titleAttributes:h},r)}},yg=function(e){var n,r;return r=n=function(n){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,n.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.shouldComponentUpdate=function(e){return!bf()(this.props,e)},r.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case Tf.SCRIPT:case Tf.NOSCRIPT:return{innerHTML:t};case Tf.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},r.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,a=e.newChildProps,i=e.nestedChildren;return Kf({},r,((t={})[n.type]=[].concat(r[n.type]||[],[Kf({},a,this.mapNestedChildrenToProps(n,i))]),t))},r.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,a=e.newProps,i=e.newChildProps,s=e.nestedChildren;switch(r.type){case Tf.TITLE:return Kf({},a,((t={})[r.type]=s,t.titleAttributes=Kf({},i),t));case Tf.BODY:return Kf({},a,{bodyAttributes:Kf({},i)});case Tf.HTML:return Kf({},a,{htmlAttributes:Kf({},i)})}return Kf({},a,((n={})[r.type]=Kf({},i),n))},r.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=Kf({},t);return Object.keys(e).forEach((function(t){var r;n=Kf({},n,((r={})[t]=e[t],r))})),n},r.prototype.warnOnInvalidChildren=function(e,t){return!0},r.prototype.mapChildrenToProps=function(e,n){var r=this,a={};return t.Children.forEach(e,(function(e){if(e&&e.props){var t=e.props,i=t.children,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[Gf[n]||n]=e[n],t}),t)}(Jf(t,["children"]));switch(r.warnOnInvalidChildren(e,i),e.type){case Tf.LINK:case Tf.META:case Tf.NOSCRIPT:case Tf.SCRIPT:case Tf.STYLE:a=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:a,newChildProps:s,nestedChildren:i});break;default:n=r.mapObjectTypeChildren({child:e,newProps:n,newChildProps:s,nestedChildren:i})}}})),n=this.mapArrayTypeChildrenToProps(a,n)},r.prototype.render=function(){var n=this.props,r=n.children,a=Jf(n,["children"]),i=Kf({},a);return r&&(i=this.mapChildrenToProps(r,i)),t.createElement(e,i)},Yf(r,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),r}(t.Component),n.propTypes={base:gf().object,bodyAttributes:gf().object,children:gf().oneOfType([gf().arrayOf(gf().node),gf().node]),defaultTitle:gf().string,defer:gf().bool,encodeSpecialCharacters:gf().bool,htmlAttributes:gf().object,link:gf().arrayOf(gf().object),meta:gf().arrayOf(gf().object),noscript:gf().arrayOf(gf().object),onChangeClientState:gf().func,script:gf().arrayOf(gf().object),style:gf().arrayOf(gf().object),title:gf().string,titleAttributes:gf().object,titleTemplate:gf().string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var t=e.rewind();return t||(t=xg({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},r}(xf()((function(e){return{baseTag:tg([Cf,If],e),bodyAttributes:eg(Sf,e),defer:rg(e,zf),encode:rg(e,Bf),htmlAttributes:eg(Ef,e),linkTags:ng(Tf.LINK,[Df,Cf],e),metaTags:ng(Tf.META,[Lf,Nf,Rf,jf,kf],e),noscriptTags:ng(Tf.NOSCRIPT,[Pf],e),onChangeClientState:Qf(e),scriptTags:ng(Tf.SCRIPT,[Uf,Pf],e),styleTags:ng(Tf.STYLE,[Af],e),title:$f(e),titleAttributes:eg(Mf,e)}}),(function(e){cg&&og(cg),e.defer?cg=sg((function(){ug(e,(function(){cg=null}))})):(ug(e),cg=null)}),xg)((function(){return null})));yg.renderStatic=yg.rewind;const bg=()=>{var e;const n=Jr.getCurrentUser(),[r,a]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[o,l]=(0,t.useState)("");return(0,ga.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:(0,ga.jsx)("div",{className:"container mx-auto max-w-4xl py-8",children:(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-xs mx-auto",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:n?"User Profile":"Login"}),n?(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,ga.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden",children:(0,ga.jsx)("img",{src:n.avatar||"https://via.placeholder.com/80",alt:"Profile",className:"w-full h-full object-cover"})}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h2",{className:"text-xl font-semibold text-gray-600",children:n.displayName||"Unknown User"}),(0,ga.jsxs)("p",{className:"text-gray-500 text-sm",children:["@",n.username||"host"]})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ga.jsxs)("div",{className:"roles",children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-700 mb-2 text-sm",children:"Roles"}),(0,ga.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs inline-block",children:null===(e=n.roles)||void 0===e?void 0:e[0]})]}),(0,ga.jsxs)("div",{className:"capabilities",children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-700 mb-2 text-sm",children:"Capabilities"}),(0,ga.jsxs)("p",{className:"text-gray-600 text-xs",children:[Object.keys(n.capabilities||{}).length," capabilities"]}),(0,ga.jsx)("ul",{className:"text-gray-600 text-xs list-disc pl-4 mt-1",children:Object.keys(n.capabilities||{}).map((e=>(0,ga.jsx)("li",{children:e},e)))})]})]}),(0,ga.jsx)("div",{className:"pt-4 border-t mt-4",children:(0,ga.jsx)("button",{onClick:()=>Jr.logout(),className:"bg-red-500 text-white px-4 py-2 rounded text-sm w-full hover:bg-red-600 transition-colors",children:"Logout"})})]}):(0,ga.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Jr.login(r,i),a(""),s(""),l(""),window.location.reload()}catch(t){l(t.message)}},className:"space-y-4",children:[o&&(0,ga.jsx)("p",{className:"text-red-500 text-sm",children:o}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,ga.jsx)("input",{type:"text",id:"username",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your WordPress username",required:!0})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,ga.jsx)("input",{type:"password",id:"password",value:i,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your application password",required:!0})]}),(0,ga.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white px-4 py-2 rounded text-sm hover:bg-blue-600 transition-colors",children:"Login"})]})]})})})},_g=e=>{let{children:t,requiredRole:n=null,requiredCapability:r=null}=e;const a=Jr.isAuthenticated(),i=Jr.getCurrentUser();if(!a)return(0,ga.jsx)(Ce,{to:"/wpLogin",replace:!0});if(n||r){const e=(null===i||void 0===i?void 0:i.roles)||[],t=Object.keys((null===i||void 0===i?void 0:i.capabilities)||{}),a=!n||e.includes(n)||e.includes("administrator"),s=!r||t.includes(r)||t.includes("manage_options")||e.includes("administrator");if(!a||!s)return(0,ga.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center",children:(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md text-center",children:[(0,ga.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\ud83d\udeab"}),(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),(0,ga.jsxs)("p",{className:"text-gray-600 mb-4",children:["You don't have permission to access this page.",n&&" Required role: ".concat(n,"."),r&&" Required capability: ".concat(r,".")]}),(0,ga.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Current role: ",e.join(", ")||"None"]}),(0,ga.jsx)("button",{onClick:()=>window.history.back(),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Go Back"})]})})}return t},wg=()=>(0,ga.jsxs)(ke,{children:[(0,ga.jsx)(Re,{path:"/profile",element:(0,ga.jsx)(_g,{children:(0,ga.jsx)(bg,{})})}),(0,ga.jsx)(Re,{path:"/users/*",element:(0,ga.jsx)(Ce,{to:"/users",replace:!0})}),(0,ga.jsx)(Re,{path:"/",element:(0,ga.jsx)(Ce,{to:"/users",replace:!0})})]}),Sg=e=>{let{children:t,requiredRole:n=null,requiredCapability:r=null}=e;const a=Jr.isAuthenticated(),i=Jr.getCurrentUser();if(!a)return(0,ga.jsx)(Ce,{to:"/wpLogin",replace:!0});if(n||r){const e=(null===i||void 0===i?void 0:i.roles)||[],t=Object.keys((null===i||void 0===i?void 0:i.capabilities)||{}),a=!n||e.includes(n)||e.includes("administrator"),s=!r||t.includes(r)||t.includes("manage_options")||e.includes("administrator");if(!a||!s)return(0,ga.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center",children:(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md text-center",children:[(0,ga.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\ud83d\udeab"}),(0,ga.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),(0,ga.jsxs)("p",{className:"text-gray-600 mb-4",children:["You don't have permission to access this page.",n&&" Required role: ".concat(n,"."),r&&" Required capability: ".concat(r,".")]}),(0,ga.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Current role: ",e.join(", ")||"None"]}),(0,ga.jsx)("button",{onClick:()=>window.history.back(),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Go Back"})]})})}return t},Eg=()=>{var e,t;const n=Jr.getCurrentUser();return(0,ga.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:(0,ga.jsx)("div",{className:"container mx-auto max-w-4xl py-8",children:(0,ga.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"User Profile"}),n?(0,ga.jsxs)("div",{className:"space-y-4",children:[(0,ga.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,ga.jsx)("img",{src:n.avatar,alt:"Profile",className:"w-20 h-20 rounded-full"}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h2",{className:"text-xl font-semibold",children:n.displayName}),(0,ga.jsxs)("p",{className:"text-gray-600",children:["@",n.username]}),(0,ga.jsx)("p",{className:"text-gray-600",children:n.email})]})]}),(0,ga.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Roles"}),(0,ga.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(e=n.roles)||void 0===e?void 0:e.map((e=>(0,ga.jsx)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:e},e)))})]}),(0,ga.jsxs)("div",{children:[(0,ga.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Capabilities"}),(0,ga.jsxs)("div",{className:"text-sm text-gray-600",children:[Object.keys(n.capabilities||{}).length," capabilities"]}),(0,ga.jsx)("div",{className:"text-sm text-gray-600",children:null===(t=Object.keys(n.capabilities))||void 0===t?void 0:t.map((e=>(0,ga.jsxs)("li",{children:[e," capabilities"]})))})]})]}),(0,ga.jsx)("div",{className:"pt-4 border-t",children:(0,ga.jsx)("button",{onClick:()=>Jr.logout(),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Logout"})})]}):(0,ga.jsx)("p",{children:"No user data available"})]})})})},Mg=()=>(0,ga.jsxs)(ke,{children:[(0,ga.jsx)(Re,{path:"/users",element:(0,ga.jsx)(Sg,{requiredCapability:"edit_users",children:(0,ga.jsx)(wg,{})})}),(0,ga.jsx)(Re,{path:"/profile",element:(0,ga.jsx)(Sg,{children:(0,ga.jsx)(Eg,{})})}),(0,ga.jsx)(Re,{path:"/users/*",element:(0,ga.jsx)(Ce,{to:"/users",replace:!0})}),(0,ga.jsx)(Re,{path:"/",element:(0,ga.jsx)(Ce,{to:"/users",replace:!0})})]}),Tg=()=>(0,ga.jsx)("div",{className:"request-demo-container",children:(0,ga.jsxs)("div",{className:"request-demo-card",children:[(0,ga.jsxs)("div",{className:"request-demo-header",children:[(0,ga.jsx)("h2",{className:"request-demo-title",children:"Book a Demo"}),(0,ga.jsx)("p",{className:"request-demo-subtitle",children:"Fill out the form below to schedule a demo with our team."})]}),(0,ga.jsx)("div",{className:"request-demo-form-container",children:(0,ga.jsx)("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSepF0QTYV590PdaiGHxLz66MwM1wkTLSZkVPZX909tJ_7oldw/viewform?pli=1",className:"request-demo-iframe",frameBorder:"0",marginHeight:"0",marginWidth:"0",title:"Request a Demo Form",children:"Loading\u2026"})})]})}),Ng=()=>(0,ga.jsxs)("div",{className:"container mx-auto p-6",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Terms of Service"}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"1. Acceptance of Terms"}),(0,ga.jsx)("p",{children:"By accessing or using our AI-powered services, you agree to be bound by these Terms of Service. Our services include AI-driven data analysis, machine learning model interactions, and related functionalities."})]}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"2. Use of AI Services"}),(0,ga.jsx)("p",{children:"You may use our AI services for lawful purposes only. You are responsible for ensuring that any data you input into our AI systems complies with applicable laws and does not infringe on third-party rights."})]}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"3. Intellectual Property"}),(0,ga.jsx)("p",{children:"All AI models, algorithms, and outputs generated by our services remain our property. You are granted a non-exclusive license to use the outputs for your personal or business purposes, subject to these terms."})]})]}),Ag=()=>(0,ga.jsxs)("div",{className:"container mx-auto p-6",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"1. Data Collection"}),(0,ga.jsx)("p",{children:"We collect data you provide when interacting with our AI services, such as input queries, usage patterns, and preferences, to improve our models and personalize your experience."})]}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"2. Data Use"}),(0,ga.jsx)("p",{children:"Your data is used to train our AI models, provide tailored responses, and enhance service functionality. We do not share identifiable data with third parties except as required by law."})]}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"3. Data Security"}),(0,ga.jsx)("p",{children:"We implement industry-standard security measures to protect your data. However, no system is completely secure, and you use our services at your own risk."})]})]}),Cg=()=>(0,ga.jsxs)("div",{className:"container mx-auto p-6",children:[(0,ga.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Cookie Policy"}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"1. What Are Cookies?"}),(0,ga.jsx)("p",{children:"Cookies are small text files stored on your device to enhance your experience with our AI services, such as remembering your preferences and tracking usage patterns."})]}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"2. How We Use Cookies"}),(0,ga.jsx)("p",{children:"We use cookies to optimize AI service performance, analyze usage trends, and deliver personalized content. Some cookies are essential for service functionality."})]}),(0,ga.jsxs)("section",{children:[(0,ga.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"3. Managing Cookies"}),(0,ga.jsx)("p",{children:"You can control cookies through your browser settings. Disabling cookies may limit some AI service features, such as personalized recommendations."})]})]}),Rg=()=>{const[e,n]=(0,t.useState)("docs"),[r,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(null),[g,v]=(0,t.useState)({isOnline:!1,message:"Checking API status..."}),x=(0,t.useRef)(null),y={docs:Ea,excel:Aa,html:Ra,slicer:La,predictive:pf},b={docs:"Docs Report",excel:"Excel Report",html:"HTML Report",slicer:"Slicer Report",predictive:"Predictive Analytics"};(0,t.useEffect)((()=>{(async()=>{const e=await async function(){const e=["predictive"],t={main:await Ma(),services:{}};for(const n of e)t.services[n]=await Ta(n);return t}();v({isOnline:e.main.success,message:e.main.success?"API connection established":e.main.message})})()}),[]);const _=t=>{if(!t)return"No file selected";return".xlsx"!=="."+t.name.split(".").pop().toLowerCase()?"Only .xlsx files are supported":"predictive"===e?pf.validateFileFormat(t)?null:"Invalid file format for Predictive Analytics":null};return(0,ga.jsxs)("div",{className:"analysis-tool-container",children:[(0,ga.jsx)("h1",{children:"Analysis Tool"}),(0,ga.jsx)("p",{children:"Upload an Excel file to generate reports using various analytics services."}),!g.isOnline&&(0,ga.jsxs)("div",{className:"api-status-warning",children:[(0,ga.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ga.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,ga.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,ga.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,ga.jsx)("span",{children:g.message})]}),(0,ga.jsxs)("div",{className:"service-selection",children:[(0,ga.jsx)("label",{htmlFor:"service-select",children:"Select Service:"}),(0,ga.jsx)("select",{id:"service-select",value:e,onChange:e=>{n(e.target.value),a(null),d(null),p(null),f(null)},disabled:i,children:Object.keys(y).map((e=>(0,ga.jsx)("option",{value:e,children:b[e]},e)))})]}),(0,ga.jsx)("div",{className:"file-input-section",children:(0,ga.jsxs)("div",{className:"file-dropzone",onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("drag-over")},onDragLeave:e=>{e.preventDefault(),e.currentTarget.classList.remove("drag-over")},onDrop:e=>{var t;if(e.preventDefault(),e.currentTarget.classList.remove("drag-over"),null!==(t=e.dataTransfer.files)&&void 0!==t&&t.length){const t=e.dataTransfer.files[0],n=_(t);if(n)return f(n),void a(null);f(null),a({name:t.name,size:t.size,formattedSize:pf.formatFileSize(t.size),fileObject:t,status:"pending"}),d(null)}},onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},children:[(0,ga.jsx)("div",{className:"dropzone-icon",children:(0,ga.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ga.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M12 16V8",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ga.jsx)("path",{d:"M9 11L12 8L15 11",stroke:"#2D3748",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ga.jsx)("p",{className:"dropzone-text",children:"Drag & drop or click to select Excel file"}),(0,ga.jsx)("p",{className:"dropzone-subtext",children:"Excel format (.xlsx) required"}),(0,ga.jsx)("input",{type:"file",className:"file-input",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=_(n);if(r)return f(r),void a(null);f(null),a({name:n.name,size:n.size,formattedSize:pf.formatFileSize(n.size),fileObject:n,status:"pending"}),d(null)},accept:".xlsx",disabled:i||!g.isOnline,ref:x})]})}),m&&(0,ga.jsxs)("div",{className:"validation-alert",children:[(0,ga.jsx)("div",{className:"alert-header",children:"File Validation Error:"}),(0,ga.jsx)("p",{children:m})]}),h&&(0,ga.jsx)("div",{className:"system-alert",children:h}),r&&(0,ga.jsxs)("div",{className:"selected-files-panel",children:[(0,ga.jsx)("div",{className:"panel-header",children:"Selected File"}),i&&(0,ga.jsxs)("div",{className:"upload-progress-indicator",children:[(0,ga.jsx)("div",{className:"progress-bar",children:(0,ga.jsx)("div",{className:"progress-completed",style:{width:"".concat(o,"%")}})}),(0,ga.jsxs)("div",{className:"progress-percentage",children:[o,"% Complete"]})]}),(0,ga.jsxs)("table",{className:"files-table",children:[(0,ga.jsx)("thead",{children:(0,ga.jsxs)("tr",{children:[(0,ga.jsx)("th",{children:"Filename"}),(0,ga.jsx)("th",{children:"Size"}),(0,ga.jsx)("th",{children:"Status"}),(0,ga.jsx)("th",{children:"Action"})]})}),(0,ga.jsx)("tbody",{children:(0,ga.jsxs)("tr",{className:r.status,children:[(0,ga.jsx)("td",{className:"file-name",children:r.name}),(0,ga.jsx)("td",{className:"file-size",children:r.formattedSize}),(0,ga.jsx)("td",{className:"file-status",children:(0,ga.jsx)("span",{className:"status-".concat(r.status),children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})}),(0,ga.jsx)("td",{className:"file-action",children:(0,ga.jsx)("button",{className:"remove-file-btn",onClick:()=>{a(null),d(null),f(null),p(null),x.current&&(x.current.value="")},disabled:i,children:"Remove"})})]})})]})]}),(0,ga.jsxs)("div",{className:"control-panel",children:[(0,ga.jsxs)("div",{className:"control-actions",children:[(0,ga.jsx)("button",{className:"control-btn generate-btn",onClick:async()=>{if(r&&g.isOnline){p(null),s(!0),l(0);try{const t=y[e];let n;if("predictive"===e){n=await t.generateReport(r.fileObject,l);const e=n.download_url.split("/").pop();d({name:e,url:n.download_url,date:(new Date).toLocaleDateString(),type:"word"})}else{const a=await t.uploadFile(r.fileObject,l);n=await t.generateReport(a.file_id);const i=n.filename||"Report_".concat(Date.now(),".docx");d({name:i,url:t.getDownloadUrl(a.file_id,i),viewUrl:"html"===e||"slicer"===e?t.getViewUrl(a.file_id,i):null,date:(new Date).toLocaleDateString(),type:"excel"===e?"excel":"word",fileId:a.file_id})}a((e=>c(c({},e),{},{status:"processed"})))}catch(t){console.error("Report generation error:",t),p(t.message||"Failed to generate report"),a((e=>c(c({},e),{},{status:"failed"})))}finally{s(!1),l(100)}}else p(r?"API is offline. Please try again later.":"Please select a file")},disabled:i||!r||!g.isOnline,children:"Generate Report"}),(0,ga.jsx)("button",{className:"control-btn download-btn ".concat(u?"":"disabled"),onClick:()=>{if(u){p(null);try{const t=y[e];"predictive"===e?t.downloadReport(u.name):t.downloadReport(u.fileId,u.name)}catch(t){console.error("Download error:",t),p(t.message||"Failed to download report")}}else p("No report available to download")},disabled:!u,children:"Download Report"}),("html"===e||"slicer"===e)&&(0,ga.jsx)("button",{className:"control-btn view-btn ".concat(null!==u&&void 0!==u&&u.viewUrl?"":"disabled"),onClick:()=>{if(null!==u&&void 0!==u&&u.viewUrl){p(null);try{y[e].viewReport(u.fileId,u.name)}catch(t){console.error("View error:",t),p(t.message||"Failed to view report")}}else p("Viewing is not supported for this report type")},disabled:!(null!==u&&void 0!==u&&u.viewUrl),children:"View Report"})]}),u&&(0,ga.jsxs)("div",{className:"analysis-complete",children:[(0,ga.jsx)("div",{className:"complete-header",children:"Report Summary"}),(0,ga.jsxs)("div",{className:"report-metadata",children:[(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Document:"}),(0,ga.jsx)("span",{className:"metadata-value",children:u.name})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Format:"}),(0,ga.jsx)("span",{className:"metadata-value",children:"excel"===u.type?"Excel":"Microsoft Word"})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Generated:"}),(0,ga.jsx)("span",{className:"metadata-value",children:u.date})]}),(0,ga.jsxs)("div",{className:"metadata-item",children:[(0,ga.jsx)("span",{className:"metadata-label",children:"Status:"}),(0,ga.jsx)("span",{className:"metadata-value status-complete",children:"Complete"})]})]})]})]})]})};class Pg extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("App Error Boundary caught an error:",e,t)}render(){return this.state.hasError?(0,ga.jsxs)("div",{style:{padding:"2rem",textAlign:"center",minHeight:"50vh",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,ga.jsx)("h2",{children:"Something went wrong"}),(0,ga.jsx)("p",{children:"We're having trouble loading this page."}),(0,ga.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"#007cba",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",margin:"1rem auto",maxWidth:"200px"},children:"Reload Page"}),(0,ga.jsx)("button",{onClick:()=>window.location.href="#/",style:{padding:"0.5rem 1rem",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",margin:"0.5rem auto",maxWidth:"200px"},children:"Go Home"})]}):this.props.children}}const kg=e=>{let{children:t}=e;const n=Jr.isAuthenticated(),r=ue();return n?t:(0,ga.jsx)(Ce,{to:"/wplogin",state:{from:r},replace:!0})},Lg=e=>{let{children:n}=e;const r=ue();return(0,t.useEffect)((()=>{console.log("Route changed:",{pathname:r.pathname,search:r.search,hash:r.hash,state:r.state})}),[r]),n};const jg=function(){return(0,t.useEffect)((()=>{Jr.isAuthenticated()||Jr.logout(),console.log("GitHub Pages App initialized:",{environment:"production",hostname:window.location.hostname,pathname:window.location.pathname,hash:window.location.hash,href:window.location.href})}),[]),(0,ga.jsx)(Pg,{children:(0,ga.jsx)(pt,{children:(0,ga.jsx)(Lg,{children:(0,ga.jsxs)("div",{className:"app",children:[(0,ga.jsxs)(yg,{children:[(0,ga.jsx)("title",{children:"Automate Reporting | automatereporting.com"}),(0,ga.jsx)("meta",{name:"description",content:"World's first HR AI agent to automate reporting and summaries"}),(0,ga.jsx)("meta",{property:"og:title",content:"Automate Reporting | automatereporting.com"}),(0,ga.jsx)("meta",{property:"og:description",content:"Advanced attrition analysis for human capital management"}),(0,ga.jsx)("meta",{property:"og:url",content:"https://automatereporting.com"}),(0,ga.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,ga.jsx)("link",{rel:"canonical",href:"https://automatereporting.com".concat(window.location.pathname)})]}),(0,ga.jsx)(va,{}),(0,ga.jsx)("main",{className:"main-content",children:(0,ga.jsx)(Pg,{children:(0,ga.jsxs)(ke,{children:[(0,ga.jsx)(Re,{path:"/",element:(0,ga.jsx)(rm,{})}),(0,ga.jsx)(Re,{path:"/blog",element:(0,ga.jsx)(lm,{})}),(0,ga.jsx)(Re,{path:"/blog/category/:category",element:(0,ga.jsx)(lm,{})}),(0,ga.jsx)(Re,{path:"/blog/tag/:tag",element:(0,ga.jsx)(lm,{})}),(0,ga.jsx)(Re,{path:"/blog/create",element:(0,ga.jsx)(kg,{children:(0,ga.jsx)(Ym,{})})}),(0,ga.jsx)(Re,{path:"/blog/edit/:slug",element:(0,ga.jsx)(kg,{children:(0,ga.jsx)(Zm,{})})}),(0,ga.jsx)(Re,{path:"/blog/:slug",element:(0,ga.jsx)(Pm,{})}),(0,ga.jsx)(Re,{path:"/wplogin",element:(0,ga.jsx)(nf,{})}),(0,ga.jsx)(Re,{path:"/wpLogin",element:(0,ga.jsx)(Ce,{to:"/wplogin",replace:!0})}),(0,ga.jsx)(Re,{path:"/admin/*",element:(0,ga.jsx)(Mg,{})}),(0,ga.jsx)(Re,{path:"/product-tools",element:(0,ga.jsx)(Rg,{})}),(0,ga.jsx)(Re,{path:"/tool/docs",element:(0,ga.jsx)(Na,{})}),(0,ga.jsx)(Re,{path:"/tool/Docs",element:(0,ga.jsx)(Ce,{to:"/tool/docs",replace:!0})}),(0,ga.jsx)(Re,{path:"/tool/excel",element:(0,ga.jsx)(Ca,{})}),(0,ga.jsx)(Re,{path:"/tool/html",element:(0,ga.jsx)(Pa,{})}),(0,ga.jsx)(Re,{path:"/tool/slicer",element:(0,ga.jsx)(ja,{})}),(0,ga.jsx)(Re,{path:"/tool/predictive-analysis",element:(0,ga.jsx)(mf,{})}),(0,ga.jsx)(Re,{path:"/analysis",element:(0,ga.jsx)(Rg,{})}),(0,ga.jsx)(Re,{path:"/dashboard/view/:fileId/:filename",element:(0,ga.jsx)(hf,{})}),(0,ga.jsx)(Re,{path:"/documentation",element:(0,ga.jsx)(ka,{})}),(0,ga.jsx)(Re,{path:"/book-demo",element:(0,ga.jsx)(Tg,{})}),(0,ga.jsx)(Re,{path:"/login",element:(0,ga.jsx)(cf,{})}),(0,ga.jsx)(Re,{path:"/signup",element:(0,ga.jsx)(uf,{})}),(0,ga.jsx)(Re,{path:"/reset-password",element:(0,ga.jsx)(df,{})}),(0,ga.jsx)(Re,{path:"/request-demo",element:(0,ga.jsx)(Tg,{})}),(0,ga.jsx)(Re,{path:"/terms",element:(0,ga.jsx)(Ng,{})}),(0,ga.jsx)(Re,{path:"/privacy",element:(0,ga.jsx)(Ag,{})}),(0,ga.jsx)(Re,{path:"/cookies",element:(0,ga.jsx)(Cg,{})}),(0,ga.jsx)(Re,{path:"*",element:(0,ga.jsx)(af,{})})]})})}),(0,ga.jsx)(am,{})]})})})})},Dg=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:s}=t;n(e),r(e),a(e),i(e),s(e)}))};r.createRoot(document.getElementById("root")).render((0,ga.jsx)(t.StrictMode,{children:(0,ga.jsx)(jg,{})})),Dg()})()})();
//# sourceMappingURL=main.fe92e6e5.js.map